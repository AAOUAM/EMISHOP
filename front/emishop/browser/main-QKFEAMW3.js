import{A as dn,B as Jt,a as W,b as Me,c as Xg,d as x,e as rC,f as id,g as iC,h as oC,i as sC,j as em,k as aC,l as Vu,m as tm,n as od,o as uC,p as cC,q as nm,r as tt,s as Io,t as hr,u as sd,v as Lu,w as lC,x as rm,y as ad,z as ud}from"./chunk-O7SLGPJ4.js";var dC=null;var im=1,om=Symbol("SIGNAL");function Te(n){let e=dC;return dC=n,e}var hC={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function H1(n){if(!(um(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===im)){if(!n.producerMustRecompute(n)&&!sm(n)){n.dirty=!1,n.lastCleanEpoch=im;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=im}}function fC(n){return n&&(n.nextProducerIndex=0),Te(n)}function pC(n,e){if(Te(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(um(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)am(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function sm(n){cd(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(H1(t),r!==t.version))return!0}return!1}function gC(n){if(cd(n),um(n))for(let e=0;e<n.producerNode.length;e++)am(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function am(n,e){if(z1(n),cd(n),n.liveConsumerNode.length===1)for(let r=0;r<n.producerNode.length;r++)am(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];cd(i),i.producerIndexOfThis[r]=e}}function um(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function cd(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function z1(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function G1(){throw new Error}var W1=G1;function mC(n){W1=n}function ae(n){return typeof n=="function"}function bs(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var ld=bs(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Eo(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var ut=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ae(r))try{r()}catch(o){e=o instanceof ld?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{yC(o)}catch(s){e=e??[],s instanceof ld?e=[...e,...s.errors]:e.push(s)}}if(e)throw new ld(e)}}add(e){var t;if(e&&e!==this)if(this.closed)yC(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Eo(t,e)}remove(e){let{_finalizers:t}=this;t&&Eo(t,e),e instanceof n&&e._removeParent(this)}};ut.EMPTY=(()=>{let n=new ut;return n.closed=!0,n})();var cm=ut.EMPTY;function dd(n){return n instanceof ut||n&&"closed"in n&&ae(n.remove)&&ae(n.add)&&ae(n.unsubscribe)}function yC(n){ae(n)?n():n.unsubscribe()}var Yn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ts={setTimeout(n,e,...t){let{delegate:r}=Ts;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ts;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function hd(n){Ts.setTimeout(()=>{let{onUnhandledError:e}=Yn;if(e)e(n);else throw n})}function ju(){}var vC=lm("C",void 0,void 0);function _C(n){return lm("E",void 0,n)}function wC(n){return lm("N",n,void 0)}function lm(n,e,t){return{kind:n,value:e,error:t}}var Do=null;function As(n){if(Yn.useDeprecatedSynchronousErrorHandling){let e=!Do;if(e&&(Do={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Do;if(Do=null,t)throw r}}else n()}function IC(n){Yn.useDeprecatedSynchronousErrorHandling&&Do&&(Do.errorThrown=!0,Do.error=n)}var Co=class extends ut{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,dd(e)&&e.add(this)):this.destination=Y1}static create(e,t,r){return new zr(e,t,r)}next(e){this.isStopped?hm(wC(e),this):this._next(e)}error(e){this.isStopped?hm(_C(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?hm(vC,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},K1=Function.prototype.bind;function dm(n,e){return K1.call(n,e)}var fm=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){fd(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){fd(r)}else fd(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){fd(t)}}},zr=class extends Co{constructor(e,t,r){super();let i;if(ae(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Yn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&dm(e.next,o),error:e.error&&dm(e.error,o),complete:e.complete&&dm(e.complete,o)}):i=e}this.destination=new fm(i)}};function fd(n){Yn.useDeprecatedSynchronousErrorHandling?IC(n):hd(n)}function Q1(n){throw n}function hm(n,e){let{onStoppedNotification:t}=Yn;t&&Ts.setTimeout(()=>t(n,e))}var Y1={closed:!0,next:ju,error:Q1,complete:ju};var Ss=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Xt(n){return n}function pd(...n){return pm(n)}function pm(n){return n.length===0?Xt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ce=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=J1(t)?t:new zr(t,r,i);return As(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=EC(r),new r((i,o)=>{let s=new zr({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Ss](){return this}pipe(...t){return pm(t)(this)}toPromise(t){return t=EC(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function EC(n){var e;return(e=n??Yn.Promise)!==null&&e!==void 0?e:Promise}function Z1(n){return n&&ae(n.next)&&ae(n.error)&&ae(n.complete)}function J1(n){return n&&n instanceof Co||Z1(n)&&dd(n)}function gm(n){return ae(n?.lift)}function fe(n){return e=>{if(gm(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function pe(n,e,t,r,i){return new mm(n,e,t,r,i)}var mm=class extends Co{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ms(){return fe((n,e)=>{let t=null;n._refCount++;let r=pe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var xs=class extends ce{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,gm(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ut;let t=this.getSubject();e.add(this.source.subscribe(pe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ut.EMPTY)}return e}refCount(){return Ms()(this)}};var DC=bs(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ot=(()=>{class n extends ce{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new gd(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new DC}next(t){As(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){As(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){As(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?cm:(this.currentObservers=null,o.push(t),new ut(()=>{this.currentObservers=null,Eo(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ce;return t.source=this,t}}return n.create=(e,t)=>new gd(e,t),n})(),gd=class extends ot{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:cm}};var Dt=class extends ot{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Uu={now(){return(Uu.delegate||Date).now()},delegate:void 0};var md=class extends ot{constructor(e=1/0,t=1/0,r=Uu){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var yd=class extends ut{constructor(e,t){super()}schedule(e,t=0){return this}};var Bu={setInterval(n,e,...t){let{delegate:r}=Bu;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Bu;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Rs=class extends yd{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Bu.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Bu.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Eo(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Ns=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Ns.now=Uu.now;var Ps=class extends Ns{constructor(e,t=Ns.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var $u=new Ps(Rs);var vd=class extends Rs{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var _d=class extends Ps{};var ym=new _d(vd);var en=new ce(n=>n.complete());function CC(n){return n&&ae(n.schedule)}function vm(n){return n[n.length-1]}function wd(n){return ae(vm(n))?n.pop():void 0}function fr(n){return CC(vm(n))?n.pop():void 0}function bC(n,e){return typeof vm(n)=="number"?n.pop():e}var Id=n=>n&&typeof n.length=="number"&&typeof n!="function";function Ed(n){return ae(n?.then)}function Dd(n){return ae(n[Ss])}function Cd(n){return Symbol.asyncIterator&&ae(n?.[Symbol.asyncIterator])}function bd(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function X1(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Td=X1();function Ad(n){return ae(n?.[Td])}function Sd(n){return iC(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield id(t.read());if(i)return yield id(void 0);yield yield id(r)}}finally{t.releaseLock()}})}function Md(n){return ae(n?.getReader)}function We(n){if(n instanceof ce)return n;if(n!=null){if(Dd(n))return eO(n);if(Id(n))return tO(n);if(Ed(n))return nO(n);if(Cd(n))return TC(n);if(Ad(n))return rO(n);if(Md(n))return iO(n)}throw bd(n)}function eO(n){return new ce(e=>{let t=n[Ss]();if(ae(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function tO(n){return new ce(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function nO(n){return new ce(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,hd)})}function rO(n){return new ce(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function TC(n){return new ce(e=>{oO(n,e).catch(t=>e.error(t))})}function iO(n){return TC(Sd(n))}function oO(n,e){var t,r,i,o;return rC(this,void 0,void 0,function*(){try{for(t=oC(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function hn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function In(n,e=0){return fe((t,r)=>{t.subscribe(pe(r,i=>hn(r,n,()=>r.next(i),e),()=>hn(r,n,()=>r.complete(),e),i=>hn(r,n,()=>r.error(i),e)))})}function Nn(n,e=0){return fe((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function AC(n,e){return We(n).pipe(Nn(e),In(e))}function SC(n,e){return We(n).pipe(Nn(e),In(e))}function MC(n,e){return new ce(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function xC(n,e){return new ce(t=>{let r;return hn(t,e,()=>{r=n[Td](),hn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ae(r?.return)&&r.return()})}function xd(n,e){if(!n)throw new Error("Iterable cannot be null");return new ce(t=>{hn(t,e,()=>{let r=n[Symbol.asyncIterator]();hn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function RC(n,e){return xd(Sd(n),e)}function NC(n,e){if(n!=null){if(Dd(n))return AC(n,e);if(Id(n))return MC(n,e);if(Ed(n))return SC(n,e);if(Cd(n))return xd(n,e);if(Ad(n))return xC(n,e);if(Md(n))return RC(n,e)}throw bd(n)}function _e(n,e){return e?NC(n,e):We(n)}function te(...n){let e=fr(n);return _e(n,e)}function Os(n,e){let t=ae(n)?n:()=>n,r=i=>i.error(t());return new ce(e?i=>e.schedule(r,0,i):r)}function _m(n){return!!n&&(n instanceof ce||ae(n.lift)&&ae(n.subscribe))}var Gr=bs(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function X(n,e){return fe((t,r)=>{let i=0;t.subscribe(pe(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:sO}=Array;function aO(n,e){return sO(e)?n(...e):n(e)}function Rd(n){return X(e=>aO(n,e))}var{isArray:uO}=Array,{getPrototypeOf:cO,prototype:lO,keys:dO}=Object;function Nd(n){if(n.length===1){let e=n[0];if(uO(e))return{args:e,keys:null};if(hO(e)){let t=dO(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function hO(n){return n&&typeof n=="object"&&cO(n)===lO}function Pd(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function qu(...n){let e=fr(n),t=wd(n),{args:r,keys:i}=Nd(n);if(r.length===0)return _e([],e);let o=new ce(fO(r,e,i?s=>Pd(i,s):Xt));return t?o.pipe(Rd(t)):o}function fO(n,e,t=Xt){return r=>{PC(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)PC(e,()=>{let l=_e(n[u],e),d=!1;l.subscribe(pe(r,f=>{o[u]=f,d||(d=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function PC(n,e,t){n?hn(t,n,e):e()}function OC(n,e,t,r,i,o,s,a){let u=[],l=0,d=0,f=!1,g=()=>{f&&!u.length&&!l&&e.complete()},y=C=>l<r?D(C):u.push(C),D=C=>{o&&e.next(C),l++;let A=!1;We(t(C,d++)).subscribe(pe(e,V=>{i?.(V),o?y(V):e.next(V)},()=>{A=!0},void 0,()=>{if(A)try{for(l--;u.length&&l<r;){let V=u.shift();s?hn(e,s,()=>D(V)):D(V)}g()}catch(V){e.error(V)}}))};return n.subscribe(pe(e,y,()=>{f=!0,g()})),()=>{a?.()}}function ft(n,e,t=1/0){return ae(e)?ft((r,i)=>X((o,s)=>e(r,o,i,s))(We(n(r,i))),t):(typeof e=="number"&&(t=e),fe((r,i)=>OC(r,i,n,t)))}function pr(n=1/0){return ft(Xt,n)}function kC(){return pr(1)}function ks(...n){return kC()(_e(n,fr(n)))}function Od(n){return new ce(e=>{We(n()).subscribe(e)})}function wm(...n){let e=wd(n),{args:t,keys:r}=Nd(n),i=new ce(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let d=0;d<s;d++){let f=!1;We(t[d]).subscribe(pe(o,g=>{f||(f=!0,l--),a[d]=g},()=>u--,void 0,()=>{(!u||!f)&&(l||o.next(r?Pd(r,a):a),o.complete())}))}});return e?i.pipe(Rd(e)):i}function Im(...n){let e=fr(n),t=bC(n,1/0),r=n;return r.length?r.length===1?We(r[0]):pr(t)(_e(r,e)):en}function pt(n,e){return fe((t,r)=>{let i=0;t.subscribe(pe(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Ei(n){return fe((e,t)=>{let r=null,i=!1,o;r=e.subscribe(pe(t,void 0,void 0,s=>{o=We(n(s,Ei(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function FC(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(pe(s,d=>{let f=l++;u=a?n(u,d,f):(a=!0,d),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Wr(n,e){return ae(e)?ft(n,e,1):ft(n,1)}function Di(n){return fe((e,t)=>{let r=!1;e.subscribe(pe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Kr(n){return n<=0?()=>en:fe((e,t)=>{let r=0;e.subscribe(pe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Em(n){return X(()=>n)}function kd(n,e=Xt){return n=n??pO,fe((t,r)=>{let i,o=!0;t.subscribe(pe(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function pO(n,e){return n===e}function Fd(n=gO){return fe((e,t)=>{let r=!1;e.subscribe(pe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function gO(){return new Gr}function Ci(n){return fe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Pn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?pt((i,o)=>n(i,o,r)):Xt,Kr(1),t?Di(e):Fd(()=>new Gr))}function Fs(n){return n<=0?()=>en:fe((e,t)=>{let r=[];e.subscribe(pe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Dm(n,e){let t=arguments.length>=2;return r=>r.pipe(n?pt((i,o)=>n(i,o,r)):Xt,Fs(1),t?Di(e):Fd(()=>new Gr))}function Vs(){return fe((n,e)=>{let t,r=!1;n.subscribe(pe(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function bi(n,e){return fe(FC(n,e,arguments.length>=2,!0))}function VC(n={}){let{connector:e=()=>new ot,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,u,l=0,d=!1,f=!1,g=()=>{a?.unsubscribe(),a=void 0},y=()=>{g(),s=u=void 0,d=f=!1},D=()=>{let C=s;y(),C?.unsubscribe()};return fe((C,A)=>{l++,!f&&!d&&g();let V=u=u??e();A.add(()=>{l--,l===0&&!f&&!d&&(a=Cm(D,i))}),V.subscribe(A),!s&&l>0&&(s=new zr({next:G=>V.next(G),error:G=>{f=!0,g(),a=Cm(y,t,G),V.error(G)},complete:()=>{d=!0,g(),a=Cm(y,r),V.complete()}}),We(C).subscribe(s))})(o)}}function Cm(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new zr({next:()=>{r.unsubscribe(),n()}});return We(e(...t)).subscribe(r)}function Vd(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,VC({connector:()=>new md(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Ti(...n){let e=fr(n);return fe((t,r)=>{(e?ks(n,t,e):ks(n,t)).subscribe(r)})}function Ye(n,e){return fe((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(pe(r,u=>{i?.unsubscribe();let l=0,d=o++;We(n(u,d)).subscribe(i=pe(r,f=>r.next(e?e(u,f,d,l++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Ld(n,e){return ae(e)?Ye(()=>n,e):Ye(()=>n)}function bm(n){return fe((e,t)=>{We(n).subscribe(pe(t,()=>t.complete(),ju)),!t.closed&&e.subscribe(t)})}function gt(n,e,t){let r=ae(n)||e||t?{next:n,error:e,complete:t}:n;return r?fe((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(pe(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Xt}var Db="https://g.co/ng/security#xss",ne=class extends Error{constructor(e,t){super(mh(e,t)),this.code=e}};function mh(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function tc(n){return{toString:n}.toString()}var jd="__parameters__";function mO(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function Cb(n,e,t){return tc(()=>{let r=mO(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,d){let f=u.hasOwnProperty(jd)?u[jd]:Object.defineProperty(u,jd,{value:[]})[jd];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(s),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Jn=globalThis;function Ue(n){for(let e in n)if(n[e]===Ue)return e;throw Error("Could not find renamed property on target object.")}function yO(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function nn(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(nn).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function LC(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var vO=Ue({__forward_ref__:Ue});function pn(n){return n.__forward_ref__=pn,n.toString=function(){return nn(this())},n}function tn(n){return bb(n)?n():n}function bb(n){return typeof n=="function"&&n.hasOwnProperty(vO)&&n.__forward_ref__===pn}function K(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function mt(n){return{providers:n.providers||[],imports:n.imports||[]}}function yh(n){return jC(n,Ab)||jC(n,Sb)}function Tb(n){return yh(n)!==null}function jC(n,e){return n.hasOwnProperty(e)?n[e]:null}function _O(n){let e=n&&(n[Ab]||n[Sb]);return e||null}function UC(n){return n&&(n.hasOwnProperty(BC)||n.hasOwnProperty(wO))?n[BC]:null}var Ab=Ue({\u0275prov:Ue}),BC=Ue({\u0275inj:Ue}),Sb=Ue({ngInjectableDef:Ue}),wO=Ue({ngInjectorDef:Ue}),q=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=K({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Mb(n){return n&&!!n.\u0275providers}var IO=Ue({\u0275cmp:Ue}),EO=Ue({\u0275dir:Ue}),DO=Ue({\u0275pipe:Ue}),CO=Ue({\u0275mod:Ue}),Qd=Ue({\u0275fac:Ue}),Hu=Ue({__NG_ELEMENT_ID__:Ue}),$C=Ue({__NG_ENV_ID__:Ue});function Hs(n){return typeof n=="string"?n:n==null?"":String(n)}function bO(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Hs(n)}function TO(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new ne(-200,n)}function jy(n,e){throw new ne(-201,!1)}var ve=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ve||{}),$m;function xb(){return $m}function fn(n){let e=$m;return $m=n,e}function Rb(n,e,t){let r=yh(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ve.Optional)return null;if(e!==void 0)return e;jy(n,"Injector")}var AO={},zu=AO,qm="__NG_DI_FLAG__",Yd="ngTempTokenPath",SO="ngTokenPath",MO=/\n/gm,xO="\u0275",qC="__source",$s;function RO(){return $s}function Ai(n){let e=$s;return $s=n,e}function NO(n,e=ve.Default){if($s===void 0)throw new ne(-203,!1);return $s===null?Rb(n,void 0,e):$s.get(n,e&ve.Optional?null:void 0,e)}function j(n,e=ve.Default){return(xb()||NO)(tn(n),e)}function B(n,e=ve.Default){return j(n,vh(e))}function vh(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Hm(n){let e=[];for(let t=0;t<n.length;t++){let r=tn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new ne(900,!1);let i,o=ve.Default;for(let s=0;s<r.length;s++){let a=r[s],u=PO(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(j(i,o))}else e.push(j(r))}return e}function Nb(n,e){return n[qm]=e,n.prototype[qm]=e,n}function PO(n){return n[qm]}function OO(n,e,t,r){let i=n[Yd];throw e[qC]&&i.unshift(e[qC]),n.message=kO(`
`+n.message,i,t,r),n[SO]=i,n[Yd]=null,n}function kO(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==xO?n.slice(2):n;let i=nn(e);if(Array.isArray(e))i=e.map(nn).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):nn(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(MO,`
  `)}`}var Dn=Nb(Cb("Optional"),8);var _h=Nb(Cb("SkipSelf"),4);function So(n,e){let t=n.hasOwnProperty(Qd);return t?n[Qd]:null}function FO(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function VO(n){return n.flat(Number.POSITIVE_INFINITY)}function Uy(n,e){n.forEach(t=>Array.isArray(t)?Uy(t,e):e(t))}function Pb(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Zd(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function LO(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function jO(n,e,t){let r=nc(n,e);return r>=0?n[r|1]=t:(r=~r,LO(n,r,e,t)),r}function Tm(n,e){let t=nc(n,e);if(t>=0)return n[t|1]}function nc(n,e){return UO(n,e,1)}function UO(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var zs={},On=[],Gs=new q(""),Ob=new q("",-1),kb=new q(""),Jd=class{get(e,t=zu){if(t===zu){let r=new Error(`NullInjectorError: No provider for ${nn(e)}!`);throw r.name="NullInjectorError",r}return t}},Fb=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Fb||{}),yr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(yr||{}),ke=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(ke||{});function BO(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function zm(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];$O(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function Vb(n){return n===3||n===4||n===6}function $O(n){return n.charCodeAt(0)===64}function Gu(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?HC(n,t,i,null,e[++r]):HC(n,t,i,null,null))}}return n}function HC(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var Lb="ng-template";function qO(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&BO(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(By(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function By(n){return n.type===4&&n.value!==Lb}function HO(n,e,t){let r=n.type===4&&!t?Lb:n.value;return e===r}function zO(n,e,t){let r=4,i=n.attrs,o=i!==null?KO(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Zn(r)&&!Zn(u))return!1;if(s&&Zn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!HO(n,u,t)||u===""&&e.length===1){if(Zn(r))return!1;s=!0}}else if(r&8){if(i===null||!qO(n,i,u,t)){if(Zn(r))return!1;s=!0}}else{let l=e[++a],d=GO(u,i,By(n),t);if(d===-1){if(Zn(r))return!1;s=!0;continue}if(l!==""){let f;if(d>o?f="":f=i[d+1].toLowerCase(),r&2&&l!==f){if(Zn(r))return!1;s=!0}}}}return Zn(r)||s}function Zn(n){return(n&1)===0}function GO(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return QO(e,n)}function WO(n,e,t=!1){for(let r=0;r<e.length;r++)if(zO(n,e[r],t))return!0;return!1}function KO(n){for(let e=0;e<n.length;e++){let t=n[e];if(Vb(t))return e}return n.length}function QO(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function zC(n,e){return n?":not("+e.trim()+")":e}function YO(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Zn(s)&&(e+=zC(o,i),i=""),r=s,o=o||!Zn(r);t++}return i!==""&&(e+=zC(o,i)),e}function ZO(n){return n.map(YO).join(",")}function JO(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Zn(i))break;i=o}r++}return{attrs:e,classes:t}}function Je(n){return tc(()=>{let e=qb(n),t=Me(W({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Fb.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||yr.Emulated,styles:n.styles||On,_:null,schemas:n.schemas||null,tView:null,id:""});Hb(t);let r=n.dependencies;return t.directiveDefs=WC(r,!1),t.pipeDefs=WC(r,!0),t.id=tk(t),t})}function XO(n){return Mi(n)||jb(n)}function ek(n){return n!==null}function yt(n){return tc(()=>({type:n.type,bootstrap:n.bootstrap||On,declarations:n.declarations||On,imports:n.imports||On,exports:n.exports||On,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function GC(n,e){if(n==null)return zs;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=ke.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==ke.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Ne(n){return tc(()=>{let e=qb(n);return Hb(e),e})}function wh(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Mi(n){return n[IO]||null}function jb(n){return n[EO]||null}function Ub(n){return n[DO]||null}function Bb(n){let e=Mi(n)||jb(n)||Ub(n);return e!==null?e.standalone:!1}function $b(n,e){let t=n[CO]||null;if(!t&&e===!0)throw new Error(`Type ${nn(n)} does not have '\u0275mod' property.`);return t}function qb(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||zs,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||On,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:GC(n.inputs,e),outputs:GC(n.outputs),debugInfo:null}}function Hb(n){n.features?.forEach(e=>e(n))}function WC(n,e){if(!n)return null;let t=e?Ub:XO;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(ek)}function tk(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Pi(n){return{\u0275providers:n}}function Lo(...n){return{\u0275providers:zb(!0,n),\u0275fromNgModule:!0}}function zb(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Uy(e,s=>{let a=s;Gm(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Gb(i,o),t}function Gb(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];$y(i,o=>{e(o,r)})}}function Gm(n,e,t,r){if(n=tn(n),!n)return!1;let i=null,o=UC(n),s=!o&&Mi(n);if(!o&&!s){let u=n.ngModule;if(o=UC(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Gm(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Uy(o.imports,d=>{Gm(d,e,t,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&Gb(l,e)}if(!a){let l=So(i)||(()=>new i);e({provide:i,useFactory:l,deps:On},i),e({provide:kb,useValue:i,multi:!0},i),e({provide:Gs,useValue:()=>j(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;$y(u,d=>{e(d,l)})}}else return!1;return i!==n&&n.providers!==void 0}function $y(n,e){for(let t of n)Mb(t)&&(t=t.\u0275providers),Array.isArray(t)?$y(t,e):e(t)}var nk=Ue({provide:String,useValue:Ue});function Wb(n){return n!==null&&typeof n=="object"&&nk in n}function rk(n){return!!(n&&n.useExisting)}function ik(n){return!!(n&&n.useFactory)}function Ws(n){return typeof n=="function"}function ok(n){return!!n.useClass}var Ih=new q(""),qd={},sk={},Am;function qy(){return Am===void 0&&(Am=new Jd),Am}var Ht=class{},Wu=class extends Ht{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Km(e,s=>this.processProvider(s)),this.records.set(Ob,Ls(void 0,this)),i.has("environment")&&this.records.set(Ht,Ls(void 0,this));let o=this.records.get(Ih);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(kb,On,ve.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Te(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Te(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Ai(this),r=fn(void 0),i;try{return e()}finally{Ai(t),fn(r)}}get(e,t=zu,r=ve.Default){if(this.assertNotDestroyed(),e.hasOwnProperty($C))return e[$C](this);r=vh(r);let i,o=Ai(this),s=fn(void 0);try{if(!(r&ve.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=dk(e)&&yh(e);l&&this.injectableDefInScope(l)?u=Ls(Wm(e),qd):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&ve.Self?qy():this.parent;return t=r&ve.Optional&&t===zu?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Yd]=a[Yd]||[]).unshift(nn(e)),o)throw a;return OO(a,e,"R3InjectorError",this.source)}else throw a}finally{fn(s),Ai(o)}}resolveInjectorInitializers(){let e=Te(null),t=Ai(this),r=fn(void 0),i;try{let o=this.get(Gs,On,ve.Self);for(let s of o)s()}finally{Ai(t),fn(r),Te(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(nn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ne(205,!1)}processProvider(e){e=tn(e);let t=Ws(e)?e:tn(e&&e.provide),r=uk(e);if(!Ws(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Ls(void 0,qd,!0),i.factory=()=>Hm(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Te(null);try{return t.value===qd&&(t.value=sk,t.value=t.factory()),typeof t.value=="object"&&t.value&&lk(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Te(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=tn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Wm(n){let e=yh(n),t=e!==null?e.factory:So(n);if(t!==null)return t;if(n instanceof q)throw new ne(204,!1);if(n instanceof Function)return ak(n);throw new ne(204,!1)}function ak(n){if(n.length>0)throw new ne(204,!1);let t=_O(n);return t!==null?()=>t.factory(n):()=>new n}function uk(n){if(Wb(n))return Ls(void 0,n.useValue);{let e=Kb(n);return Ls(e,qd)}}function Kb(n,e,t){let r;if(Ws(n)){let i=tn(n);return So(i)||Wm(i)}else if(Wb(n))r=()=>tn(n.useValue);else if(ik(n))r=()=>n.useFactory(...Hm(n.deps||[]));else if(rk(n))r=()=>j(tn(n.useExisting));else{let i=tn(n&&(n.useClass||n.provide));if(ck(n))r=()=>new i(...Hm(n.deps));else return So(i)||Wm(i)}return r}function Ls(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function ck(n){return!!n.deps}function lk(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function dk(n){return typeof n=="function"||typeof n=="object"&&n instanceof q}function Km(n,e){for(let t of n)Array.isArray(t)?Km(t,e):t&&Mb(t)?Km(t.\u0275providers,e):e(t)}function nr(n,e){n instanceof Wu&&n.assertNotDestroyed();let t,r=Ai(n),i=fn(void 0);try{return e()}finally{Ai(r),fn(i)}}function Qb(){return xb()!==void 0||RO()!=null}function hk(n){if(!Qb())throw new ne(-203,!1)}function fk(n){return typeof n=="function"}var Zr=0,ge=1,se=2,Ft=3,Xn=4,rr=5,Xd=6,Ku=7,er=8,Ks=9,tr=10,Ct=11,Qu=12,KC=13,Js=14,vr=15,rc=16,js=17,Qr=18,Eh=19,Yb=20,Si=21,Sm=22,Mo=23,kn=25,Zb=1;var xo=7,eh=8,Qs=9,En=10,Hy=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Hy||{});function To(n){return Array.isArray(n)&&typeof n[Zb]=="object"}function Jr(n){return Array.isArray(n)&&n[Zb]===!0}function Jb(n){return(n.flags&4)!==0}function Dh(n){return n.componentOffset>-1}function zy(n){return(n.flags&1)===1}function xi(n){return!!n.template}function pk(n){return(n[se]&512)!==0}var Qm=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function Xb(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Fn(){return eT}function eT(n){return n.type.prototype.ngOnChanges&&(n.setInput=mk),gk}Fn.ngInherit=!0;function gk(){let n=nT(this),e=n?.current;if(e){let t=n.previous;if(t===zs)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function mk(n,e,t,r,i){let o=this.declaredInputs[r],s=nT(n)||yk(n,{previous:zs,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Qm(l&&l.currentValue,t,u===zs),Xb(n,e,i,t)}var tT="__ngSimpleChanges__";function nT(n){return n[tT]||null}function yk(n,e){return n[tT]=e}var QC=null;var gr=function(n,e,t){QC?.(n,e,t)},vk="svg",_k="math",wk=!1;function Ik(){return wk}function _r(n){for(;Array.isArray(n);)n=n[Zr];return n}function rT(n,e){return _r(e[n])}function Vn(n,e){return _r(e[n.index])}function iT(n,e){return n.data[e]}function Gy(n,e){return n[e]}function Oi(n,e){let t=e[n];return To(t)?t:t[Zr]}function Ek(n){return(n[se]&4)===4}function Wy(n){return(n[se]&128)===128}function Dk(n){return Jr(n[Ft])}function th(n,e){return e==null?null:n[e]}function oT(n){n[js]=0}function Ck(n){n[se]&1024||(n[se]|=1024,Wy(n)&&Yu(n))}function bk(n,e){for(;n>0;)e=e[Js],n--;return e}function Ky(n){return!!(n[se]&9216||n[Mo]?.dirty)}function Ym(n){n[tr].changeDetectionScheduler?.notify(1),Ky(n)?Yu(n):n[se]&64&&(Ik()?(n[se]|=1024,Yu(n)):n[tr].changeDetectionScheduler?.notify())}function Yu(n){n[tr].changeDetectionScheduler?.notify();let e=Zu(n);for(;e!==null&&!(e[se]&8192||(e[se]|=8192,!Wy(e)));)e=Zu(e)}function sT(n,e){if((n[se]&256)===256)throw new ne(911,!1);n[Si]===null&&(n[Si]=[]),n[Si].push(e)}function Tk(n,e){if(n[Si]===null)return;let t=n[Si].indexOf(e);t!==-1&&n[Si].splice(t,1)}function Zu(n){let e=n[Ft];return Jr(e)?e[Ft]:e}var me={lFrame:pT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Ak(){return me.lFrame.elementDepthCount}function Sk(){me.lFrame.elementDepthCount++}function Mk(){me.lFrame.elementDepthCount--}function aT(){return me.bindingsEnabled}function xk(){return me.skipHydrationRootTNode!==null}function Rk(n){return me.skipHydrationRootTNode===n}function Nk(){me.skipHydrationRootTNode=null}function De(){return me.lFrame.lView}function zt(){return me.lFrame.tView}function Fe(n){return me.lFrame.contextLView=n,n[er]}function Ve(n){return me.lFrame.contextLView=null,n}function rn(){let n=uT();for(;n!==null&&n.type===64;)n=n.parent;return n}function uT(){return me.lFrame.currentTNode}function Pk(){let n=me.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function ic(n,e){let t=me.lFrame;t.currentTNode=n,t.isParent=e}function cT(){return me.lFrame.isParent}function Ok(){me.lFrame.isParent=!1}function kk(){return me.lFrame.contextLView}function oc(){let n=me.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Fk(){return me.lFrame.bindingIndex}function Vk(n){return me.lFrame.bindingIndex=n}function Ch(){return me.lFrame.bindingIndex++}function lT(n){let e=me.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Lk(){return me.lFrame.inI18n}function jk(n,e){let t=me.lFrame;t.bindingIndex=t.bindingRootIndex=n,Zm(e)}function Uk(){return me.lFrame.currentDirectiveIndex}function Zm(n){me.lFrame.currentDirectiveIndex=n}function Bk(n){let e=me.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function dT(){return me.lFrame.currentQueryIndex}function Qy(n){me.lFrame.currentQueryIndex=n}function $k(n){let e=n[ge];return e.type===2?e.declTNode:e.type===1?n[rr]:null}function hT(n,e,t){if(t&ve.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&ve.Host);)if(i=$k(o),i===null||(o=o[Js],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=me.lFrame=fT();return r.currentTNode=e,r.lView=n,!0}function Yy(n){let e=fT(),t=n[ge];me.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function fT(){let n=me.lFrame,e=n===null?null:n.child;return e===null?pT(n):e}function pT(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function gT(){let n=me.lFrame;return me.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var mT=gT;function Zy(){let n=gT();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function qk(n){return(me.lFrame.contextLView=bk(n,me.lFrame.contextLView))[er]}function jo(){return me.lFrame.selectedIndex}function Ro(n){me.lFrame.selectedIndex=n}function Jy(){let n=me.lFrame;return iT(n.tView,n.selectedIndex)}function Hk(){return me.lFrame.currentNamespace}var yT=!0;function Xy(){return yT}function ev(n){yT=n}function zk(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=eT(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function tv(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function Hd(n,e,t){vT(n,e,3,t)}function zd(n,e,t,r){(n[se]&3)===t&&vT(n,e,t,r)}function Mm(n,e){let t=n[se];(t&3)===e&&(t&=16383,t+=1,n[se]=t)}function vT(n,e,t,r){let i=r!==void 0?n[js]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[js]+=65536),(a<o||o==-1)&&(Gk(n,t,e,u),n[js]=(n[js]&4294901760)+u+2),u++}function YC(n,e){gr(4,n,e);let t=Te(null);try{e.call(n)}finally{Te(t),gr(5,n,e)}}function Gk(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[se]>>14<n[js]>>16&&(n[se]&3)===e&&(n[se]+=16384,YC(a,o)):YC(a,o)}var qs=-1,No=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function Wk(n){return n instanceof No}function Kk(n){return(n.flags&8)!==0}function Qk(n){return(n.flags&16)!==0}function _T(n){return n!==qs}function nh(n){return n&32767}function Yk(n){return n>>16}function rh(n,e){let t=Yk(n),r=e;for(;t>0;)r=r[Js],t--;return r}var Jm=!0;function ih(n){let e=Jm;return Jm=n,e}var Zk=256,wT=Zk-1,IT=5,Jk=0,mr={};function Xk(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Hu)&&(r=t[Hu]),r==null&&(r=t[Hu]=Jk++);let i=r&wT,o=1<<i;e.data[n+(i>>IT)]|=o}function oh(n,e){let t=ET(n,e);if(t!==-1)return t;let r=e[ge];r.firstCreatePass&&(n.injectorIndex=e.length,xm(r.data,n),xm(e,null),xm(r.blueprint,null));let i=nv(n,e),o=n.injectorIndex;if(_T(i)){let s=nh(i),a=rh(i,e),u=a[ge].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function xm(n,e){n.push(0,0,0,0,0,0,0,0,e)}function ET(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function nv(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=AT(i),r===null)return qs;if(t++,i=i[Js],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return qs}function Xm(n,e,t){Xk(n,e,t)}function eF(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(Vb(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function DT(n,e,t){if(t&ve.Optional||n!==void 0)return n;jy(e,"NodeInjector")}function CT(n,e,t,r){if(t&ve.Optional&&r===void 0&&(r=null),!(t&(ve.Self|ve.Host))){let i=n[Ks],o=fn(void 0);try{return i?i.get(e,r,t&ve.Optional):Rb(e,r,t&ve.Optional)}finally{fn(o)}}return DT(r,e,t)}function bT(n,e,t,r=ve.Default,i){if(n!==null){if(e[se]&2048&&!(r&ve.Self)){let s=iF(n,e,t,r,mr);if(s!==mr)return s}let o=TT(n,e,t,r,mr);if(o!==mr)return o}return CT(e,t,r,i)}function TT(n,e,t,r,i){let o=nF(t);if(typeof o=="function"){if(!hT(e,n,r))return r&ve.Host?DT(i,t,r):CT(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&ve.Optional))jy(t);else return s}finally{mT()}}else if(typeof o=="number"){let s=null,a=ET(n,e),u=qs,l=r&ve.Host?e[vr][rr]:null;for((a===-1||r&ve.SkipSelf)&&(u=a===-1?nv(n,e):e[a+8],u===qs||!JC(r,!1)?a=-1:(s=e[ge],a=nh(u),e=rh(u,e)));a!==-1;){let d=e[ge];if(ZC(o,a,d.data)){let f=tF(a,e,t,s,r,l);if(f!==mr)return f}u=e[a+8],u!==qs&&JC(r,e[ge].data[a+8]===l)&&ZC(o,a,e)?(s=d,a=nh(u),e=rh(u,e)):a=-1}}return i}function tF(n,e,t,r,i,o){let s=e[ge],a=s.data[n+8],u=r==null?Dh(a)&&Jm:r!=s&&(a.type&3)!==0,l=i&ve.Host&&o===a,d=Gd(a,s,t,u,l);return d!==null?Po(e,s,d,a):mr}function Gd(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,d=o>>20,f=r?a:a+d,g=i?a+d:l;for(let y=f;y<g;y++){let D=s[y];if(y<u&&t===D||y>=u&&D.type===t)return y}if(i){let y=s[u];if(y&&xi(y)&&y.type===t)return u}return null}function Po(n,e,t,r){let i=n[t],o=e.data;if(Wk(i)){let s=i;s.resolving&&TO(bO(o[t]));let a=ih(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?fn(s.injectImpl):null,d=hT(n,r,ve.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&zk(t,o[t],e)}finally{l!==null&&fn(l),ih(a),s.resolving=!1,mT()}}return i}function nF(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Hu)?n[Hu]:void 0;return typeof e=="number"?e>=0?e&wT:rF:e}function ZC(n,e,t){let r=1<<n;return!!(t[e+(n>>IT)]&r)}function JC(n,e){return!(n&ve.Self)&&!(n&ve.Host&&e)}var Ao=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return bT(this._tNode,this._lView,e,vh(r),t)}};function rF(){return new Ao(rn(),De())}function Er(n){return tc(()=>{let e=n.prototype.constructor,t=e[Qd]||ey(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Qd]||ey(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function ey(n){return bb(n)?()=>{let e=ey(tn(n));return e&&e()}:So(n)}function iF(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[se]&2048&&!(s[se]&512);){let a=TT(o,s,t,r|ve.Self,mr);if(a!==mr)return a;let u=o.parent;if(!u){let l=s[Yb];if(l){let d=l.get(t,mr,r);if(d!==mr)return d}u=AT(s),s=s[Js]}o=u}return i}function AT(n){let e=n[ge],t=e.type;return t===2?e.declTNode:t===1?n[rr]:null}function rv(n){return eF(rn(),n)}function XC(n,e=null,t=null,r){let i=ST(n,e,t,r);return i.resolveInjectorInitializers(),i}function ST(n,e=null,t=null,r,i=new Set){let o=[t||On,Lo(n)];return r=r||(typeof n=="object"?void 0:nn(n)),new Wu(o,e||qy(),r||null,i)}var Cn=(()=>{class n{static{this.THROW_IF_NOT_FOUND=zu}static{this.NULL=new Jd}static create(t,r){if(Array.isArray(t))return XC({name:""},r,t,"");{let i=t.name??"";return XC({name:i},t.parent,t.providers,i)}}static{this.\u0275prov=K({token:n,providedIn:"any",factory:()=>j(Ob)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();var oF="ngOriginalError";function Rm(n){return n[oF]}var wr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Rm(e);for(;t&&Rm(t);)t=Rm(t);return t||null}},MT=new q("",{providedIn:"root",factory:()=>B(wr).handleError.bind(void 0)}),iv=(()=>{class n{static{this.__NG_ELEMENT_ID__=sF}static{this.__NG_ENV_ID__=t=>t}}return n})(),ty=class extends iv{constructor(e){super(),this._lView=e}onDestroy(e){return sT(this._lView,e),()=>Tk(this._lView,e)}};function sF(){return new ty(De())}function aF(){return Xs(rn(),De())}function Xs(n,e){return new Rt(Vn(n,e))}var Rt=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=aF}}return n})();function uF(n){return n instanceof Rt?n.nativeElement:n}var ny=class extends ot{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,Qb()&&(this.destroyRef=B(iv,{optional:!0})??void 0)}emit(e){let t=Te(null);try{super.next(e)}finally{Te(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=Nm(o),i&&(i=Nm(i)),s&&(s=Nm(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof ut&&e.add(a),a}};function Nm(n){return e=>{setTimeout(n,void 0,e)}}var Ze=ny;function cF(){return this._results[Symbol.iterator]()}var ry=class n{get changes(){return this._changes??=new Ze}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=n.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=cF)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=VO(e);(this._changesDetected=!FO(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function xT(n){return(n.flags&128)===128}var RT=new Map,lF=0;function dF(){return lF++}function hF(n){RT.set(n[Eh],n)}function fF(n){RT.delete(n[Eh])}var eb="__ngContext__";function Oo(n,e){To(e)?(n[eb]=e[Eh],hF(e)):n[eb]=e}function NT(n){return OT(n[Qu])}function PT(n){return OT(n[Xn])}function OT(n){for(;n!==null&&!Jr(n);)n=n[Xn];return n}var iy;function kT(n){iy=n}function pF(){if(iy!==void 0)return iy;if(typeof document<"u")return document;throw new ne(210,!1)}var ov=new q("",{providedIn:"root",factory:()=>gF}),gF="ng",sv=new q(""),bt=new q("",{providedIn:"platform",factory:()=>"unknown"});var av=new q("",{providedIn:"root",factory:()=>pF().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null}),uv={breakpoints:[16,32,48,64,96,128,256,384,640,750,828,1080,1200,1920,2048,3840],placeholderResolution:30,disableImageSizeWarning:!1,disableImageLazyLoadWarning:!1},FT=new q("",{providedIn:"root",factory:()=>uv});var mF="h",yF="b";var vF=()=>null;function cv(n,e,t=!1){return vF(n,e,t)}var VT=!1,_F=new q("",{providedIn:"root",factory:()=>VT});var Ud;function wF(){if(Ud===void 0&&(Ud=null,Jn.trustedTypes))try{Ud=Jn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Ud}function tb(n){return wF()?.createScriptURL(n)||n}var sh=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Db})`}};function ea(n){return n instanceof sh?n.changingThisBreaksApplicationSecurity:n}function lv(n,e){let t=IF(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Db})`)}return t===e}function IF(n){return n instanceof sh&&n.getTypeName()||null}var EF=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function LT(n){return n=String(n),n.match(EF)?n:"unsafe:"+n}var bh=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(bh||{});function Dr(n){let e=UT();return e?e.sanitize(bh.URL,n)||"":lv(n,"URL")?ea(n):LT(Hs(n))}function DF(n){let e=UT();if(e)return tb(e.sanitize(bh.RESOURCE_URL,n)||"");if(lv(n,"ResourceURL"))return tb(ea(n));throw new ne(904,!1)}function CF(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?DF:Dr}function jT(n,e,t){return CF(e,t)(n)}function UT(){let n=De();return n&&n[tr].sanitizer}function BT(n){return n instanceof Function?n():n}function bF(n){return(n??B(Cn)).get(bt)==="browser"}var Ir=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ir||{}),TF;function dv(n,e){return TF(n,e)}function Us(n,e,t,r,i){if(r!=null){let o,s=!1;Jr(r)?o=r:To(r)&&(s=!0,r=r[Zr]);let a=_r(r);n===0&&t!==null?i==null?GT(e,t,a):ah(e,t,a,i||null,!0):n===1&&t!==null?ah(e,t,a,i||null,!0):n===2?qF(e,a,s):n===3&&e.destroyNode(a),o!=null&&zF(e,n,o,t,i)}}function AF(n,e){return n.createText(e)}function SF(n,e,t){n.setValue(e,t)}function $T(n,e,t){return n.createElement(e,t)}function MF(n,e){qT(n,e),e[Zr]=null,e[rr]=null}function xF(n,e,t,r,i,o){r[Zr]=i,r[rr]=e,Th(n,r,t,1,i,o)}function qT(n,e){e[tr].changeDetectionScheduler?.notify(1),Th(n,e,e[Ct],2,null,null)}function RF(n){let e=n[Qu];if(!e)return Pm(n[ge],n);for(;e;){let t=null;if(To(e))t=e[Qu];else{let r=e[En];r&&(t=r)}if(!t){for(;e&&!e[Xn]&&e!==n;)To(e)&&Pm(e[ge],e),e=e[Ft];e===null&&(e=n),To(e)&&Pm(e[ge],e),t=e&&e[Xn]}e=t}}function NF(n,e,t,r){let i=En+r,o=t.length;r>0&&(t[i-1][Xn]=e),r<o-En?(e[Xn]=t[i],Pb(t,En+r,e)):(t.push(e),e[Xn]=null),e[Ft]=t;let s=e[rc];s!==null&&t!==s&&PF(s,e);let a=e[Qr];a!==null&&a.insertView(n),Ym(e),e[se]|=128}function PF(n,e){let t=n[Qs],i=e[Ft][Ft][vr];e[vr]!==i&&(n[se]|=Hy.HasTransplantedViews),t===null?n[Qs]=[e]:t.push(e)}function HT(n,e){let t=n[Qs],r=t.indexOf(e);t.splice(r,1)}function oy(n,e){if(n.length<=En)return;let t=En+e,r=n[t];if(r){let i=r[rc];i!==null&&i!==n&&HT(i,r),e>0&&(n[t-1][Xn]=r[Xn]);let o=Zd(n,En+e);MF(r[ge],r);let s=o[Qr];s!==null&&s.detachView(o[ge]),r[Ft]=null,r[Xn]=null,r[se]&=-129}return r}function zT(n,e){if(!(e[se]&256)){let t=e[Ct];t.destroyNode&&Th(n,e,t,3,null,null),RF(e)}}function Pm(n,e){if(e[se]&256)return;let t=Te(null);try{e[se]&=-129,e[se]|=256,e[Mo]&&gC(e[Mo]),kF(n,e),OF(n,e),e[ge].type===1&&e[Ct].destroy();let r=e[rc];if(r!==null&&Jr(e[Ft])){r!==e[Ft]&&HT(r,e);let i=e[Qr];i!==null&&i.detachView(n)}fF(e)}finally{Te(t)}}function OF(n,e){let t=n.cleanup,r=e[Ku];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[Ku]=null);let i=e[Si];if(i!==null){e[Si]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function kF(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof No)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];gr(4,a,u);try{u.call(a)}finally{gr(5,a,u)}}else{gr(4,i,o);try{o.call(i)}finally{gr(5,i,o)}}}}}function FF(n,e,t){return VF(n,e.parent,t)}function VF(n,e,t){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return t[Zr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===yr.None||o===yr.Emulated)return null}return Vn(r,t)}}function ah(n,e,t,r,i){n.insertBefore(e,t,r,i)}function GT(n,e,t){n.appendChild(e,t)}function nb(n,e,t,r,i){r!==null?ah(n,e,t,r,i):GT(n,e,t)}function LF(n,e,t,r){n.removeChild(e,t,r)}function hv(n,e){return n.parentNode(e)}function jF(n,e){return n.nextSibling(e)}function UF(n,e,t){return $F(n,e,t)}function BF(n,e,t){return n.type&40?Vn(n,t):null}var $F=BF,rb;function fv(n,e,t,r){let i=FF(n,r,e),o=e[Ct],s=r.parent||e[rr],a=UF(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)nb(o,i,t[u],a,!1);else nb(o,i,t,a,!1);rb!==void 0&&rb(o,r,e,t,i)}function Wd(n,e){if(e!==null){let t=e.type;if(t&3)return Vn(e,n);if(t&4)return sy(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Wd(n,r);{let i=n[e.index];return Jr(i)?sy(-1,i):_r(i)}}else{if(t&32)return dv(e,n)()||_r(n[e.index]);{let r=WT(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Zu(n[vr]);return Wd(i,r)}else return Wd(n,e.next)}}}return null}function WT(n,e){if(e!==null){let r=n[vr][rr],i=e.projection;return r.projection[i]}return null}function sy(n,e){let t=En+n+1;if(t<e.length){let r=e[t],i=r[ge].firstChild;if(i!==null)return Wd(r,i)}return e[xo]}function qF(n,e,t){let r=hv(n,e);r&&LF(n,r,e,t)}function pv(n,e,t,r,i,o,s){for(;t!=null;){let a=r[t.index],u=t.type;if(s&&e===0&&(a&&Oo(_r(a),r),t.flags|=2),(t.flags&32)!==32)if(u&8)pv(n,e,t.child,r,i,o,!1),Us(e,n,i,a,o);else if(u&32){let l=dv(t,r),d;for(;d=l();)Us(e,n,i,d,o);Us(e,n,i,a,o)}else u&16?HF(n,e,r,t,i,o):Us(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Th(n,e,t,r,i,o){pv(t,r,n.firstChild,e,i,o,!1)}function HF(n,e,t,r,i,o){let s=t[vr],u=s[rr].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let d=u[l];Us(e,n,i,d,o)}else{let l=u,d=s[Ft];xT(r)&&(l.flags|=128),pv(n,e,l,d,i,o,!0)}}function zF(n,e,t,r,i){let o=t[xo],s=_r(t);o!==s&&Us(e,n,r,o,i);for(let a=En;a<t.length;a++){let u=t[a];Th(u[ge],u,n,e,r,o)}}function GF(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Ir.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ir.Important),n.setStyle(t,r,i,o))}}function WF(n,e,t){n.setAttribute(e,"style",t)}function KT(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function QT(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&zm(n,e,r),i!==null&&KT(n,e,i),o!==null&&WF(n,e,o)}var Cr={};function Y(n=1){YT(zt(),De(),jo()+n,!1)}function YT(n,e,t,r){if(!r)if((e[se]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Hd(e,o,t)}else{let o=n.preOrderHooks;o!==null&&zd(e,o,0,t)}Ro(t)}function U(n,e=ve.Default){let t=De();if(t===null)return j(n,e);let r=rn();return bT(r,t,tn(n),e)}function ZT(){let n="invalid";throw new Error(n)}function JT(n,e,t,r,i,o){let s=Te(null);try{let a=null;i&ke.SignalBased&&(a=e[r][om]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&ke.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):Xb(e,a,r,o)}finally{Te(s)}}function KF(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Ro(~i);else{let o=i,s=t[++r],a=t[++r];jk(s,o);let u=e[o];a(2,u)}}}finally{Ro(-1)}}function Ah(n,e,t,r,i,o,s,a,u,l,d){let f=e.blueprint.slice();return f[Zr]=i,f[se]=r|4|128|8|64,(l!==null||n&&n[se]&2048)&&(f[se]|=2048),oT(f),f[Ft]=f[Js]=n,f[er]=t,f[tr]=s||n&&n[tr],f[Ct]=a||n&&n[Ct],f[Ks]=u||n&&n[Ks]||null,f[rr]=o,f[Eh]=dF(),f[Xd]=d,f[Yb]=l,f[vr]=e.type==2?n[vr]:f,f}function Sh(n,e,t,r,i){let o=n.data[e];if(o===null)o=QF(n,e,t,r,i),Lk()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=Pk();o.injectorIndex=s===null?-1:s.injectorIndex}return ic(o,!0),o}function QF(n,e,t,r,i){let o=uT(),s=cT(),a=s?o:o&&o.parent,u=n.data[e]=tV(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function XT(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function eA(n,e,t,r,i){let o=jo(),s=r&2;try{Ro(-1),s&&e.length>kn&&YT(n,e,kn,!1),gr(s?2:0,i),t(r,i)}finally{Ro(o),gr(s?3:1,i)}}function tA(n,e,t){if(Jb(e)){let r=Te(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{Te(r)}}}function nA(n,e,t){aT()&&(aV(n,e,t,Vn(t,e)),(t.flags&64)===64&&uA(n,e,t))}function rA(n,e,t=Vn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function iA(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=gv(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function gv(n,e,t,r,i,o,s,a,u,l,d){let f=kn+r,g=f+i,y=YF(f,g),D=typeof l=="function"?l():l;return y[ge]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:D,incompleteFirstPass:!1,ssrId:d}}function YF(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Cr);return t}function ZF(n,e,t,r){let o=r.get(_F,VT)||t===yr.ShadowDom,s=n.selectRootElement(e,o);return JF(s),s}function JF(n){XF(n)}var XF=()=>null;function eV(n,e,t,r){let i=dA(e);i.push(t),n.firstCreatePass&&hA(n).push(r,i.length-1)}function tV(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return xk()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function ib(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=ke.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?ob(r,t,l,a,u):ob(r,t,l,a)}return r}function ob(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function nV(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],u=null,l=null;for(let d=r;d<i;d++){let f=o[d],g=t?t.get(f):null,y=g?g.inputs:null,D=g?g.outputs:null;u=ib(0,f.inputs,d,u,y),l=ib(1,f.outputs,d,l,D);let C=u!==null&&s!==null&&!By(e)?vV(u,d,s):null;a.push(C)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function rV(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function oA(n,e,t,r,i,o,s,a){let u=Vn(e,t),l=e.inputs,d;!a&&l!=null&&(d=l[r])?(mv(n,t,d,r,i),Dh(e)&&iV(t,e.index)):e.type&3?(r=rV(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function iV(n,e){let t=Oi(e,n);t[se]&16||(t[se]|=64)}function sA(n,e,t,r){if(aT()){let i=r===null?null:{"":-1},o=cV(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&aA(n,e,t,s,i,a),i&&lV(t,r,i)}t.mergedAttrs=Gu(t.mergedAttrs,t.attrs)}function aA(n,e,t,r,i,o){for(let l=0;l<r.length;l++)Xm(oh(t,e),n,r[l].type);hV(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let d=r[l];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,u=XT(n,e,r.length,null);for(let l=0;l<r.length;l++){let d=r[l];t.mergedAttrs=Gu(t.mergedAttrs,d.hostAttrs),fV(n,t,e,u,d),dV(u,d,i),d.contentQueries!==null&&(t.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(t.flags|=64);let f=d.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}nV(n,t,o)}function oV(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;sV(s)!=a&&s.push(a),s.push(t,r,o)}}function sV(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function aV(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;Dh(t)&&pV(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||oh(t,e),Oo(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let u=n.data[a],l=Po(e,n,a,t);if(Oo(l,e),s!==null&&yV(e,a-i,l,u,t,s),xi(u)){let d=Oi(t.index,e);d[er]=Po(e,n,a,t)}}}function uA(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=Uk();try{Ro(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];Zm(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&uV(u,l)}}finally{Ro(-1),Zm(s)}}function uV(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function cV(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(WO(e,s.selectors,!1))if(r||(r=[]),xi(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;ay(n,e,u)}else r.unshift(s),ay(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function ay(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function lV(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new ne(-301,!1);r.push(e[i],o)}}}function dV(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;xi(e)&&(t[""]=n)}}function hV(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function fV(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=So(i.type,!0)),s=new No(o,xi(i),U);n.blueprint[r]=s,t[r]=s,oV(n,e,r,XT(n,t,i.hostVars,Cr),i)}function pV(n,e,t){let r=Vn(e,n),i=iA(t),o=n[tr].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=Mh(n,Ah(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function gV(n,e,t,r,i,o){let s=Vn(n,e);mV(e[Ct],s,o,n.value,t,r,i)}function mV(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Hs(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function yV(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],d=s[a++],f=s[a++];JT(r,t,u,l,d,f)}}function vV(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function cA(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function lA(n,e){let t=n.contentQueries;if(t!==null){let r=Te(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];Qy(o),a.contentQueries(2,e[s],s)}}}finally{Te(r)}}}function Mh(n,e){return n[Qu]?n[KC][Xn]=e:n[Qu]=e,n[KC]=e,e}function uy(n,e,t){Qy(0);let r=Te(null);try{e(n,t)}finally{Te(r)}}function dA(n){return n[Ku]||(n[Ku]=[])}function hA(n){return n.cleanup||(n.cleanup=[])}function fA(n,e){let t=n[Ks],r=t?t.get(wr,null):null;r&&r.handleError(e)}function mv(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],u=t[o++],l=e[s],d=n.data[s];JT(d,l,r,a,u,i)}}function pA(n,e,t){let r=rT(e,n);SF(n[Ct],r,t)}function _V(n,e){let t=Oi(e,n),r=t[ge];wV(r,t);let i=t[Zr];i!==null&&t[Xd]===null&&(t[Xd]=cv(i,t[Ks])),yv(r,t,t[er])}function wV(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function yv(n,e,t){Yy(e);try{let r=n.viewQuery;r!==null&&uy(1,r,t);let i=n.template;i!==null&&eA(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Qr]?.finishViewCreation(n),n.staticContentQueries&&lA(n,e),n.staticViewQueries&&uy(2,n.viewQuery,t);let o=n.components;o!==null&&IV(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[se]&=-5,Zy()}}function IV(n,e){for(let t=0;t<e.length;t++)_V(n,e[t])}function EV(n,e,t,r){let i=Te(null);try{let o=e.tView,a=n[se]&4096?4096:16,u=Ah(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[rc]=l;let d=n[Qr];return d!==null&&(u[Qr]=d.createEmbeddedView(o)),yv(o,u,t),u}finally{Te(i)}}function sb(n,e){return!e||e.firstChild===null||xT(n)}function DV(n,e,t,r=!0){let i=e[ge];if(NF(i,e,n,t),r){let s=sy(t,n),a=e[Ct],u=hv(a,n[xo]);u!==null&&xF(i,n[rr],a,e,u,s)}let o=e[Xd];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function uh(n,e,t,r,i=!1){for(;t!==null;){let o=e[t.index];o!==null&&r.push(_r(o)),Jr(o)&&CV(o,r);let s=t.type;if(s&8)uh(n,e,t.child,r);else if(s&32){let a=dv(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=WT(e,t);if(Array.isArray(a))r.push(...a);else{let u=Zu(e[vr]);uh(u[ge],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function CV(n,e){for(let t=En;t<n.length;t++){let r=n[t],i=r[ge].firstChild;i!==null&&uh(r[ge],r,i,e)}n[xo]!==n[Zr]&&e.push(n[xo])}var gA=[];function bV(n){return n[Mo]??TV(n)}function TV(n){let e=gA.pop()??Object.create(SV);return e.lView=n,e}function AV(n){n.lView[Mo]!==n&&(n.lView=null,gA.push(n))}var SV=Me(W({},hC),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Yu(n.lView)},consumerOnSignalRead(){this.lView[Mo]=this}}),mA=100;function yA(n,e=!0,t=0){let r=n[tr],i=r.rendererFactory,o=!1;o||i.begin?.();try{MV(n,t)}catch(s){throw e&&fA(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function MV(n,e){cy(n,e);let t=0;for(;Ky(n);){if(t===mA)throw new ne(103,!1);t++,cy(n,1)}}function xV(n,e,t,r){let i=e[se];if((i&256)===256)return;let o=!1;!o&&e[tr].inlineEffectRunner?.flush(),Yy(e);let s=null,a=null;!o&&RV(n)&&(a=bV(e),s=fC(a));try{oT(e),Vk(n.bindingStartIndex),t!==null&&eA(n,e,t,2,r);let u=(i&3)===3;if(!o)if(u){let f=n.preOrderCheckHooks;f!==null&&Hd(e,f,null)}else{let f=n.preOrderHooks;f!==null&&zd(e,f,0,null),Mm(e,0)}if(NV(e),vA(e,0),n.contentQueries!==null&&lA(n,e),!o)if(u){let f=n.contentCheckHooks;f!==null&&Hd(e,f)}else{let f=n.contentHooks;f!==null&&zd(e,f,1),Mm(e,1)}KF(n,e);let l=n.components;l!==null&&wA(e,l,0);let d=n.viewQuery;if(d!==null&&uy(2,d,r),!o)if(u){let f=n.viewCheckHooks;f!==null&&Hd(e,f)}else{let f=n.viewHooks;f!==null&&zd(e,f,2),Mm(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Sm]){for(let f of e[Sm])f();e[Sm]=null}o||(e[se]&=-73)}catch(u){throw Yu(e),u}finally{a!==null&&(pC(a,s),AV(a)),Zy()}}function RV(n){return n.type!==2}function vA(n,e){for(let t=NT(n);t!==null;t=PT(t))for(let r=En;r<t.length;r++){let i=t[r];_A(i,e)}}function NV(n){for(let e=NT(n);e!==null;e=PT(e)){if(!(e[se]&Hy.HasTransplantedViews))continue;let t=e[Qs];for(let r=0;r<t.length;r++){let i=t[r],o=i[Ft];Ck(i)}}}function PV(n,e,t){let r=Oi(e,n);_A(r,t)}function _A(n,e){Wy(n)&&cy(n,e)}function cy(n,e){let r=n[ge],i=n[se],o=n[Mo],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&sm(o)),o&&(o.dirty=!1),n[se]&=-9217,s)xV(r,n,r.template,n[er]);else if(i&8192){vA(n,1);let a=r.components;a!==null&&wA(n,a,1)}}function wA(n,e,t){for(let r=0;r<e.length;r++)PV(n,e[r],t)}function vv(n){for(n[tr].changeDetectionScheduler?.notify();n;){n[se]|=64;let e=Zu(n);if(pk(n)&&!e)return n;n=e}return null}var ko=class{get rootNodes(){let e=this._lView,t=e[ge];return uh(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[er]}set context(e){this._lView[er]=e}get destroyed(){return(this._lView[se]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ft];if(Jr(e)){let t=e[eh],r=t?t.indexOf(this):-1;r>-1&&(oy(e,r),Zd(t,r))}this._attachedToViewContainer=!1}zT(this._lView[ge],this._lView)}onDestroy(e){sT(this._lView,e)}markForCheck(){vv(this._cdRefInjectingView||this._lView)}detach(){this._lView[se]&=-129}reattach(){Ym(this._lView),this._lView[se]|=128}detectChanges(){this._lView[se]|=1024,yA(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ne(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,qT(this._lView[ge],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ne(902,!1);this._appRef=e,Ym(this._lView)}},Fo=(()=>{class n{static{this.__NG_ELEMENT_ID__=FV}}return n})(),OV=Fo,kV=class extends OV{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=EV(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new ko(i)}};function FV(){return _v(rn(),De())}function _v(n,e){return n.type&4?new kV(e,n,Xs(n,e)):null}var NW=new RegExp(`^(\\d+)*(${yF}|${mF})*(.*)`);var VV=()=>null;function ab(n,e){return VV(n,e)}var ch=class{},ly=class{},lh=class{};function LV(n){let e=Error(`No component factory found for ${nn(n)}.`);return e[jV]=n,e}var jV="ngComponent";var dy=class{resolveComponentFactory(e){throw LV(e)}},xh=(()=>{class n{static{this.NULL=new dy}}return n})(),Ju=class{},gn=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>UV()}}return n})();function UV(){let n=De(),e=rn(),t=Oi(e.index,n);return(To(t)?t:n)[Ct]}var BV=(()=>{class n{static{this.\u0275prov=K({token:n,providedIn:"root",factory:()=>null})}}return n})(),Om={};var ub=new Set;function sc(n){ub.has(n)||(ub.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function cb(...n){}function $V(){let n=typeof Jn.requestAnimationFrame=="function",e=Jn[n?"requestAnimationFrame":"setTimeout"],t=Jn[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}var Ee=class n{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ze(!1),this.onMicrotaskEmpty=new Ze(!1),this.onStable=new Ze(!1),this.onError=new Ze(!1),typeof Zone>"u")throw new ne(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=$V().nativeRequestAnimationFrame,zV(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ne(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ne(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,qV,cb,cb);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},qV={};function wv(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function HV(n){n.isCheckStableRunning||n.lastRequestAnimationFrameId!==-1||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Jn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,hy(n),n.isCheckStableRunning=!0,wv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),hy(n))}function zV(n){let e=()=>{HV(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,o,s,a)=>{if(GV(a))return t.invokeTask(i,o,s,a);try{return lb(n),t.invokeTask(i,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),db(n)}},onInvoke:(t,r,i,o,s,a,u)=>{try{return lb(n),t.invoke(i,o,s,a,u)}finally{n.shouldCoalesceRunChangeDetection&&e(),db(n)}},onHasTask:(t,r,i,o)=>{t.hasTask(i,o),r===i&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,hy(n),wv(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,i,o)=>(t.handleError(i,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function hy(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.lastRequestAnimationFrameId!==-1?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function lb(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function db(n){n._nesting--,wv(n)}function GV(n){return!Array.isArray(n)||n.length!==1?!1:n[0].data?.__ignore_ng_zone__===!0}var Bs=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Bs||{}),WV={destroy(){}};function Rh(n,e){!e&&hk(Rh);let t=e?.injector??B(Cn);if(!bF(t))return WV;sc("NgAfterNextRender");let r=t.get(Iv),i=r.handler??=new py,o=e?.phase??Bs.MixedReadWrite,s=()=>{i.unregister(u),a()},a=t.get(iv).onDestroy(s),u=nr(t,()=>new fy(o,()=>{s(),n()}));return i.register(u),{destroy:s}}var fy=class{constructor(e,t){this.phase=e,this.callbackFn=t,this.zone=B(Ee),this.errorHandler=B(wr,{optional:!0}),B(ch,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},py=class{constructor(){this.executingCallbacks=!1,this.buckets={[Bs.EarlyRead]:new Set,[Bs.Write]:new Set,[Bs.MixedReadWrite]:new Set,[Bs.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let t of e)t.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},Iv=(()=>{class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let t=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of t)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=K({token:n,providedIn:"root",factory:()=>new n})}}return n})();function gy(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=LC(i,a);else if(o==2){let u=a,l=e[++s];r=LC(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var dh=class extends xh{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Mi(e);return new Ys(t,this.ngModule)}};function hb(n){let e=[];for(let t in n){if(!n.hasOwnProperty(t))continue;let r=n[t];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:t})}return e}function KV(n){let e=n.toLowerCase();return e==="svg"?vk:e==="math"?_k:null}var my=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=vh(r);let i=this.injector.get(e,Om,r);return i!==Om||t===Om?i:this.parentInjector.get(e,t,r)}},Ys=class extends lh{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=hb(e.inputs);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return hb(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=ZO(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=Te(null);try{i=i||this.ngModule;let s=i instanceof Ht?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new my(e,s):e,u=a.get(Ju,null);if(u===null)throw new ne(407,!1);let l=a.get(BV,null),d=a.get(Iv,null),f=a.get(ch,null),g={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:d,changeDetectionScheduler:f},y=u.createRenderer(null,this.componentDef),D=this.componentDef.selectors[0][0]||"div",C=r?ZF(y,r,this.componentDef.encapsulation,a):$T(y,D,KV(D)),A=512;this.componentDef.signals?A|=4096:this.componentDef.onPush||(A|=16);let V=null;C!==null&&(V=cv(C,a,!0));let G=gv(0,null,null,1,0,null,null,null,null,null,null),k=Ah(null,G,null,A,null,null,g,y,a,null,V);Yy(k);let J,oe;try{let re=this.componentDef,I,v=null;re.findHostDirectiveDefs?(I=[],v=new Map,re.findHostDirectiveDefs(re,I,v),I.push(re)):I=[re];let w=QV(k,C),E=YV(w,C,re,I,k,g,y);oe=iT(G,kn),C&&XV(y,re,C,r),t!==void 0&&eL(oe,this.ngContentSelectors,t),J=JV(E,re,I,v,k,[tL]),yv(G,k,null)}finally{Zy()}return new yy(this.componentType,J,Xs(oe,k),k,oe)}finally{Te(o)}}},yy=class extends ly{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new ko(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;mv(o[ge],o,i,e,t),this.previousInputValues.set(e,t);let s=Oi(this._tNode.index,o);vv(s)}}get injector(){return new Ao(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function QV(n,e){let t=n[ge],r=kn;return n[r]=e,Sh(t,r,2,"#host",null)}function YV(n,e,t,r,i,o,s){let a=i[ge];ZV(r,n,e,s);let u=null;e!==null&&(u=cv(e,i[Ks]));let l=o.rendererFactory.createRenderer(e,t),d=16;t.signals?d=4096:t.onPush&&(d=64);let f=Ah(i,iA(t),null,d,i[n.index],n,o,l,null,null,u);return a.firstCreatePass&&ay(a,n,r.length-1),Mh(i,f),i[n.index]=f}function ZV(n,e,t,r){for(let i of n)e.mergedAttrs=Gu(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(gy(e,e.mergedAttrs,!0),t!==null&&QT(r,t,e))}function JV(n,e,t,r,i,o){let s=rn(),a=i[ge],u=Vn(s,i);aA(a,i,s,t,null,r);for(let d=0;d<t.length;d++){let f=s.directiveStart+d,g=Po(i,a,f,s);Oo(g,i)}uA(a,i,s),u&&Oo(u,i);let l=Po(i,a,s.directiveStart+s.componentOffset,s);if(n[er]=i[er]=l,o!==null)for(let d of o)d(l,e);return tA(a,s,i),l}function XV(n,e,t,r){if(r)zm(n,t,["ng-version","17.3.12"]);else{let{attrs:i,classes:o}=JO(e.selectors[0]);i&&zm(n,t,i),o&&o.length>0&&KT(n,t,o.join(" "))}}function eL(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function tL(){let n=rn();tv(De()[ge],n)}var ki=(()=>{class n{static{this.__NG_ELEMENT_ID__=nL}}return n})();function nL(){let n=rn();return EA(n,De())}var rL=ki,IA=class extends rL{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Xs(this._hostTNode,this._hostLView)}get injector(){return new Ao(this._hostTNode,this._hostLView)}get parentInjector(){let e=nv(this._hostTNode,this._hostLView);if(_T(e)){let t=rh(e,this._hostLView),r=nh(e),i=t[ge].data[r+8];return new Ao(i,t)}else return new Ao(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=fb(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-En}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=ab(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,sb(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!fk(e),a;if(s)a=t;else{let D=t||{};a=D.index,r=D.injector,i=D.projectableNodes,o=D.environmentInjector||D.ngModuleRef}let u=s?e:new Ys(Mi(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let C=(s?l:this.parentInjector).get(Ht,null);C&&(o=C)}let d=Mi(u.componentType??{}),f=ab(this._lContainer,d?.id??null),g=f?.firstChild??null,y=u.create(l,i,g,o);return this.insertImpl(y.hostView,a,sb(this._hostTNode,f)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(Dk(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Ft],l=new IA(u,u[rr],u[Ft]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return DV(s,i,o,r),e.attachToViewContainerRef(),Pb(km(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=fb(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=oy(this._lContainer,t);r&&(Zd(km(this._lContainer),t),zT(r[ge],r))}detach(e){let t=this._adjustIndex(e,-1),r=oy(this._lContainer,t);return r&&Zd(km(this._lContainer),t)!=null?new ko(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function fb(n){return n[eh]}function km(n){return n[eh]||(n[eh]=[])}function EA(n,e){let t,r=e[n.index];return Jr(r)?t=r:(t=cA(r,e,null,n),e[n.index]=t,Mh(e,t)),oL(t,e,n,r),new IA(t,n,e)}function iL(n,e){let t=n[Ct],r=t.createComment(""),i=Vn(e,n),o=hv(t,i);return ah(t,o,r,jF(t,i),!1),r}var oL=uL,sL=()=>!1;function aL(n,e,t){return sL(n,e,t)}function uL(n,e,t,r){if(n[xo])return;let i;t.type&8?i=_r(r):i=iL(e,t),n[xo]=i}var vy=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},_y=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Ev(e,t).matches!==null&&this.queries[t].setDirty()}},wy=class{constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=mL(e):this.predicate=e}},Iy=class n{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Ey=class n{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,cL(t,o)),this.matchTNodeWithReadOption(e,t,Gd(t,e,o,!1,!1))}else r===Fo?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Gd(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Rt||i===ki||i===Fo&&t.type&4)this.addMatch(t.index,-2);else{let o=Gd(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function cL(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function lL(n,e){return n.type&11?Xs(n,e):n.type&4?_v(n,e):null}function dL(n,e,t,r){return t===-1?lL(e,n):t===-2?hL(n,e,r):Po(n,n[ge],t,e)}function hL(n,e,t){if(t===Rt)return Xs(e,n);if(t===Fo)return _v(e,n);if(t===ki)return EA(e,n)}function DA(n,e,t,r){let i=e[Qr].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let d=o[l];a.push(dL(e,d,s[u+1],t.metadata.read))}}i.matches=a}return i.matches}function Dy(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=DA(n,e,i,t);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],d=e[-u];for(let f=En;f<d.length;f++){let g=d[f];g[rc]===g[Ft]&&Dy(g[ge],g,l,r)}if(d[Qs]!==null){let f=d[Qs];for(let g=0;g<f.length;g++){let y=f[g];Dy(y[ge],y,l,r)}}}}}return r}function fL(n,e){return n[Qr].queries[e].queryList}function pL(n,e,t){let r=new ry((t&4)===4);return eV(n,e,r,r.destroy),(e[Qr]??=new _y).queries.push(new vy(r))-1}function gL(n,e,t,r){let i=zt();if(i.firstCreatePass){let o=rn();yL(i,new wy(e,t,r),o.index),vL(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return pL(i,De(),t)}function mL(n){return n.split(",").map(e=>e.trim())}function yL(n,e,t){n.queries===null&&(n.queries=new Iy),n.queries.track(new Ey(e,t))}function vL(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function Ev(n,e){return n.queries.getByIndex(e)}function _L(n,e){let t=n[ge],r=Ev(t,e);return r.crossesNgTemplate?Dy(t,n,e,[]):DA(t,n,r,e)}function wL(n){return typeof n=="function"&&n[om]!==void 0}function CA(n){return wL(n)&&typeof n.set=="function"}function IL(n){return Object.getPrototypeOf(n.prototype).constructor}function Gt(n){let e=IL(n.type),t=!0,r=[n];for(;e;){let i;if(xi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ne(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Bd(n.inputs),s.inputTransforms=Bd(n.inputTransforms),s.declaredInputs=Bd(n.declaredInputs),s.outputs=Bd(n.outputs);let a=i.hostBindings;a&&TL(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&CL(n,u),l&&bL(n,l),EL(n,i),yO(n.outputs,i.outputs),xi(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Gt&&(t=!1)}}e=Object.getPrototypeOf(e)}DL(r)}function EL(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function DL(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Gu(i.hostAttrs,t=Gu(t,i.hostAttrs))}}function Bd(n){return n===zs?{}:n===On?[]:n}function CL(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function bL(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function TL(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function Nh(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var Ri=class{},Xu=class{};var Cy=class extends Ri{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new dh(this);let i=$b(e);this._bootstrapComponents=BT(i.bootstrap),this._r3Injector=ST(e,t,[{provide:Ri,useValue:this},{provide:xh,useValue:this.componentFactoryResolver},...r],nn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},by=class extends Xu{constructor(e){super(),this.moduleType=e}create(e){return new Cy(this.moduleType,e,[])}};var hh=class extends Ri{constructor(e){super(),this.componentFactoryResolver=new dh(this),this.instance=null;let t=new Wu([...e.providers,{provide:Ri,useValue:this},{provide:xh,useValue:this.componentFactoryResolver}],e.parent||qy(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ph(n,e,t=null){return new hh({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var Uo=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Dt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function bA(n){return Dv(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function AL(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function Dv(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Cv(n,e,t){return n[e]=t}function SL(n,e){return n[e]}function Ni(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function TA(n,e,t,r){let i=Ni(n,e,t);return Ni(n,e+1,r)||i}function ML(n){return(n.flags&32)===32}function xL(n,e,t,r,i,o,s,a,u){let l=e.consts,d=Sh(e,n,4,s||null,th(l,a));sA(e,t,d,th(l,u)),tv(e,d);let f=d.tView=gv(2,d,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function st(n,e,t,r,i,o,s,a){let u=De(),l=zt(),d=n+kn,f=l.firstCreatePass?xL(d,l,u,e,t,r,i,o,s):l.data[d];ic(f,!1);let g=RL(l,u,f,n);Xy()&&fv(l,u,g,f),Oo(g,u);let y=cA(g,u,g,f);return u[d]=y,Mh(u,y),aL(y,f,u),zy(f)&&nA(l,u,f),s!=null&&rA(u,f,a),st}var RL=NL;function NL(n,e,t,r){return ev(!0),e[Ct].createComment("")}function ta(n,e,t,r){let i=De(),o=Ch();if(Ni(i,o,e)){let s=zt(),a=Jy();gV(a,i,n,e,t,r)}return ta}function PL(n,e,t,r){return Ni(n,Ch(),t)?e+Hs(t)+r:Cr}function OL(n,e,t,r,i,o){let s=Fk(),a=TA(n,s,t,i);return lT(2),a?e+Hs(t)+r+Hs(i)+o:Cr}function $d(n,e){return n<<17|e<<2}function Vo(n){return n>>17&32767}function kL(n){return(n&2)==2}function FL(n,e){return n&131071|e<<17}function Ty(n){return n|2}function Zs(n){return(n&131068)>>2}function Fm(n,e){return n&-131069|e<<2}function VL(n){return(n&1)===1}function Ay(n){return n|1}function LL(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Vo(s),u=Zs(s);n[r]=t;let l=!1,d;if(Array.isArray(t)){let f=t;d=f[1],(d===null||nc(f,d)>0)&&(l=!0)}else d=t;if(i)if(u!==0){let g=Vo(n[a+1]);n[r+1]=$d(g,a),g!==0&&(n[g+1]=Fm(n[g+1],r)),n[a+1]=FL(n[a+1],r)}else n[r+1]=$d(a,0),a!==0&&(n[a+1]=Fm(n[a+1],r)),a=r;else n[r+1]=$d(u,0),a===0?a=r:n[u+1]=Fm(n[u+1],r),u=r;l&&(n[r+1]=Ty(n[r+1])),pb(n,d,r,!0),pb(n,d,r,!1),jL(e,d,n,r,o),s=$d(a,u),o?e.classBindings=s:e.styleBindings=s}function jL(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&nc(o,e)>=0&&(t[r+1]=Ay(t[r+1]))}function pb(n,e,t,r){let i=n[t+1],o=e===null,s=r?Vo(i):Zs(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];UL(u,e)&&(a=!0,n[s+1]=r?Ay(l):Ty(l)),s=r?Vo(l):Zs(l)}a&&(n[t+1]=r?Ty(i):Ay(i))}function UL(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?nc(n,e)>=0:!1}function le(n,e,t){let r=De(),i=Ch();if(Ni(r,i,e)){let o=zt(),s=Jy();oA(o,s,r,n,e,r[Ct],t,!1)}return le}function gb(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";mv(n,t,o[s],s,r)}function bv(n,e,t){return AA(n,e,t,!1),bv}function Oh(n,e){return AA(n,e,null,!0),Oh}function AA(n,e,t,r){let i=De(),o=zt(),s=lT(2);if(o.firstUpdatePass&&$L(o,n,s,r),e!==Cr&&Ni(i,s,e)){let a=o.data[jo()];WL(o,a,i,i[Ct],n,i[s+1]=KL(e,t),r,s)}}function BL(n,e){return e>=n.expandoStartIndex}function $L(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[jo()],s=BL(n,t);QL(o,r)&&e===null&&!s&&(e=!1),e=qL(i,o,e,r),LL(i,o,e,t,s,r)}}function qL(n,e,t,r){let i=Bk(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Vm(null,n,e,t,r),t=ec(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Vm(i,n,e,t,r),o===null){let u=HL(n,e,r);u!==void 0&&Array.isArray(u)&&(u=Vm(null,n,e,u[1],r),u=ec(u,e.attrs,r),zL(n,e,r,u))}else o=GL(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function HL(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Zs(r)!==0)return n[Vo(r)]}function zL(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Vo(i)]=r}function GL(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=ec(r,s,t)}return ec(r,e.attrs,t)}function Vm(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=ec(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function ec(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),jO(n,s,t?!0:e[++o]))}return n===void 0?null:n}function WL(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],d=VL(l)?mb(u,e,t,i,Zs(l),s):void 0;if(!fh(d)){fh(o)||kL(l)&&(o=mb(u,null,t,i,a,s));let f=rT(jo(),t);GF(r,s,f,i,o)}}function mb(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),d=l?u[1]:u,f=d===null,g=t[i+1];g===Cr&&(g=f?On:void 0);let y=f?Tm(g,r):d===r?g:void 0;if(l&&!fh(y)&&(y=Tm(u,r)),fh(y)&&(a=y,s))return a;let D=n[i+1];i=s?Vo(D):Zs(D)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Tm(u,r))}return a}function fh(n){return n!==void 0}function KL(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=nn(ea(n)))),n}function QL(n,e){return(n.flags&(e?8:16))!==0}function YL(n,e,t,r,i,o){let s=e.consts,a=th(s,i),u=Sh(e,n,2,r,a);return sA(e,t,u,th(s,o)),u.attrs!==null&&gy(u,u.attrs,!1),u.mergedAttrs!==null&&gy(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function P(n,e,t,r){let i=De(),o=zt(),s=kn+n,a=i[Ct],u=o.firstCreatePass?YL(s,o,i,e,t,r):o.data[s],l=ZL(o,i,u,a,e,n);i[s]=l;let d=zy(u);return ic(u,!0),QT(a,l,u),!ML(u)&&Xy()&&fv(o,i,l,u),Ak()===0&&Oo(l,i),Sk(),d&&(nA(o,i,u),tA(o,u,i)),r!==null&&rA(i,u),P}function O(){let n=rn();cT()?Ok():(n=n.parent,ic(n,!1));let e=n;Rk(e)&&Nk(),Mk();let t=zt();return t.firstCreatePass&&(tv(t,n),Jb(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&Kk(e)&&gb(t,e,De(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Qk(e)&&gb(t,e,De(),e.stylesWithoutHost,!1),O}function ye(n,e,t,r){return P(n,e,t,r),O(),ye}var ZL=(n,e,t,r,i,o)=>(ev(!0),$T(r,i,Hk()));function on(){return De()}var bo=void 0;function JL(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var XL=["en",[["a","p"],["AM","PM"],bo],[["AM","PM"],bo,bo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],bo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],bo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",bo,"{1} 'at' {0}",bo],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",JL],Lm={};function mn(n){let e=e2(n),t=yb(e);if(t)return t;let r=e.split("-")[0];if(t=yb(r),t)return t;if(r==="en")return XL;throw new ne(701,!1)}function yb(n){return n in Lm||(Lm[n]=Jn.ng&&Jn.ng.common&&Jn.ng.common.locales&&Jn.ng.common.locales[n]),Lm[n]}var nt=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(nt||{});function e2(n){return n.toLowerCase().replace(/_/g,"-")}var ph="en-US",t2="USD";var n2=ph;function r2(n){typeof n=="string"&&(n2=n.toLowerCase().replace(/_/g,"-"))}function we(n,e,t,r){let i=De(),o=zt(),s=rn();return SA(o,i,i[Ct],s,n,e,r),we}function i2(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Ku],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function SA(n,e,t,r,i,o,s){let a=zy(r),l=n.firstCreatePass&&hA(n),d=e[er],f=dA(e),g=!0;if(r.type&3||s){let C=Vn(r,e),A=s?s(C):C,V=f.length,G=s?J=>s(_r(J[r.index])):r.index,k=null;if(!s&&a&&(k=i2(n,e,i,r.index)),k!==null){let J=k.__ngLastListenerFn__||k;J.__ngNextListenerFn__=o,k.__ngLastListenerFn__=o,g=!1}else{o=_b(r,e,d,o,!1);let J=t.listen(A,i,o);f.push(o,J),l&&l.push(i,G,V,V+1)}}else o=_b(r,e,d,o,!1);let y=r.outputs,D;if(g&&y!==null&&(D=y[i])){let C=D.length;if(C)for(let A=0;A<C;A+=2){let V=D[A],G=D[A+1],oe=e[V][G].subscribe(o),re=f.length;f.push(o,oe),l&&l.push(i,r.index,re,-(re+1))}}}function vb(n,e,t,r){let i=Te(null);try{return gr(6,e,t),t(r)!==!1}catch(o){return fA(n,o),!1}finally{gr(7,e,t),Te(i)}}function _b(n,e,t,r,i){return function o(s){if(s===Function)return r;let a=n.componentOffset>-1?Oi(n.index,e):e;vv(a);let u=vb(e,t,r,s),l=o.__ngNextListenerFn__;for(;l;)u=vb(e,t,l,s)&&u,l=l.__ngNextListenerFn__;return i&&u===!1&&s.preventDefault(),u}}function Tt(n=1){return qk(n)}function MA(n,e,t,r){gL(n,e,t,r)}function xA(n){let e=De(),t=zt(),r=dT();Qy(r+1);let i=Ev(t,r);if(n.dirty&&Ek(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=_L(e,r);n.reset(o,uF),n.notifyOnChanges()}return!0}return!1}function RA(){return fL(De(),dT())}function o2(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function ac(n){let e=kk();return Gy(e,kn+n)}function Q(n,e=""){let t=De(),r=zt(),i=n+kn,o=r.firstCreatePass?Sh(r,i,1,e,null):r.data[i],s=s2(r,t,o,e,n);t[i]=s,Xy()&&fv(r,t,s,o),ic(o,!1)}var s2=(n,e,t,r,i)=>(ev(!0),AF(e[Ct],r));function Wt(n){return Nt("",n,""),Wt}function Nt(n,e,t){let r=De(),i=PL(r,n,e,t);return i!==Cr&&pA(r,jo(),i),Nt}function uc(n,e,t,r,i){let o=De(),s=OL(o,n,e,t,r,i);return s!==Cr&&pA(o,jo(),s),uc}function At(n,e,t){CA(e)&&(e=e());let r=De(),i=Ch();if(Ni(r,i,e)){let o=zt(),s=Jy();oA(o,s,r,n,e,r[Ct],t,!1)}return At}function Pt(n,e){let t=CA(n);return t&&n.set(e),t}function St(n,e){let t=De(),r=zt(),i=rn();return SA(r,t,t[Ct],i,n,e),St}function a2(n,e,t){let r=zt();if(r.firstCreatePass){let i=xi(n);Sy(t,r.data,r.blueprint,i,!0),Sy(e,r.data,r.blueprint,i,!1)}}function Sy(n,e,t,r,i){if(n=tn(n),Array.isArray(n))for(let o=0;o<n.length;o++)Sy(n[o],e,t,r,i);else{let o=zt(),s=De(),a=rn(),u=Ws(n)?n:tn(n.provide),l=Kb(n),d=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(Ws(n)||!n.multi){let y=new No(l,i,U),D=Um(u,e,i?d:d+g,f);D===-1?(Xm(oh(a,s),o,u),jm(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[D]=y,s[D]=y)}else{let y=Um(u,e,d+g,f),D=Um(u,e,d,d+g),C=y>=0&&t[y],A=D>=0&&t[D];if(i&&!A||!i&&!C){Xm(oh(a,s),o,u);let V=l2(i?c2:u2,t.length,i,r,l);!i&&A&&(t[D].providerFactory=V),jm(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(V),s.push(V)}else{let V=NA(t[i?D:y],l,!i&&r);jm(o,n,y>-1?y:D,V)}!i&&r&&A&&t[D].componentProviders++}}}function jm(n,e,t,r){let i=Ws(e),o=ok(e);if(i||o){let u=(o?tn(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(t);d===-1?l.push(t,[r,u]):l[d+1].push(r,u)}else l.push(t,u)}}}function NA(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Um(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function u2(n,e,t,r){return My(this.multi,[])}function c2(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Po(t,t[ge],this.providerFactory.index,r);o=a.slice(0,s),My(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],My(i,o);return o}function My(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function l2(n,e,t,r,i){let o=new No(n,t,U);return o.multi=[],o.index=e,o.componentProviders=0,NA(o,i,r&&!t),o}function Ln(n,e=[]){return t=>{t.providersResolver=(r,i)=>a2(r,i?i(n):n,e)}}var d2=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=zb(!1,t.type),i=r.length>0?Ph([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=K({token:n,providedIn:"environment",factory:()=>new n(j(Ht))})}}return n})();function Xe(n){sc("NgStandalone"),n.getStandaloneInjector=e=>e.get(d2).getOrCreateStandaloneInjector(n)}function kh(n,e,t){let r=oc()+n,i=De();return i[r]===Cr?Cv(i,r,t?e.call(t):e()):SL(i,r)}function Tv(n,e,t,r){return kA(De(),oc(),n,e,t,r)}function PA(n,e,t,r,i){return FA(De(),oc(),n,e,t,r,i)}function OA(n,e){let t=n[e];return t===Cr?void 0:t}function kA(n,e,t,r,i,o){let s=e+t;return Ni(n,s,i)?Cv(n,s+1,o?r.call(o,i):r(i)):OA(n,s+1)}function FA(n,e,t,r,i,o,s){let a=e+t;return TA(n,a,i,o)?Cv(n,a+2,s?r.call(s,i,o):r(i,o)):OA(n,a+2)}function ir(n,e){let t=zt(),r,i=n+kn;t.firstCreatePass?(r=h2(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=So(r.type,!0)),s,a=fn(U);try{let u=ih(!1),l=o();return ih(u),o2(t,De(),i,l),l}finally{fn(a)}}function h2(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Fh(n,e,t){let r=n+kn,i=De(),o=Gy(i,r);return VA(i,r)?kA(i,oc(),e,o.transform,t,o):o.transform(t)}function Fi(n,e,t,r){let i=n+kn,o=De(),s=Gy(o,i);return VA(o,i)?FA(o,oc(),e,s.transform,t,r,s):s.transform(t,r)}function VA(n,e){return n[ge].data[e].pure}var Yr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Vh=new Yr("17.3.12"),Lh=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var LA=new q("");function Vi(n){return!!n&&typeof n.then=="function"}function Av(n){return!!n&&typeof n.subscribe=="function"}var jh=new q(""),jA=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=B(jh,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(Vi(o))t.push(o);else if(Av(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),cc=new q("");function f2(){mC(()=>{throw new ne(600,!1)})}function p2(n){return n.isBoundToModule}function g2(n,e,t){try{let r=t();return Vi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var na=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=B(MT),this.afterRenderEffectManager=B(Iv),this.externalTestViews=new Set,this.beforeRender=new ot,this.afterTick=new ot,this.componentTypes=[],this.components=[],this.isStable=B(Uo).hasPendingTasks.pipe(X(t=>!t)),this._injector=B(Ht)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof lh;if(!this._injector.get(jA).done){let g=!i&&Bb(t),y=!1;throw new ne(405,y)}let s;i?s=t:s=this._injector.get(xh).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=p2(s)?void 0:this._injector.get(Ri),u=r||s.selector,l=s.create(Cn.NULL,[],u,a),d=l.location.nativeElement,f=l.injector.get(LA,null);return f?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),Bm(this.components,l),f?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(t){if(this._runningTick)throw new ne(101,!1);let r=Te(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(t)}catch(i){this.internalErrorHandler(i)}finally{this.afterTick.next(),this._runningTick=!1,Te(r)}}detectChangesInAttachedViews(t){let r=0,i=this.afterRenderEffectManager;for(;;){if(r===mA)throw new ne(103,!1);if(t){let o=r===0;this.beforeRender.next(o);for(let{_lView:s,notifyErrorHandler:a}of this._views)m2(s,o,a)}if(r++,i.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>xy(o))&&(i.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>xy(o))))break}}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Bm(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(cc,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Bm(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ne(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Bm(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function m2(n,e,t){!e&&!xy(n)||y2(n,t,e)}function xy(n){return Ky(n)}function y2(n,e,t){let r;t?(r=0,n[se]|=1024):n[se]&64?r=0:r=1,yA(n,e,r)}var Ry=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Uh=(()=>{class n{compileModuleSync(t){return new by(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=$b(t),o=BT(i.declarations).reduce((s,a)=>{let u=Mi(a);return u&&s.push(new Ys(u)),s},[]);return new Ry(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var v2=(()=>{class n{constructor(){this.zone=B(Ee),this.applicationRef=B(na)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function _2(n){return[{provide:Ee,useFactory:n},{provide:Gs,multi:!0,useFactory:()=>{let e=B(v2,{optional:!0});return()=>e.initialize()}},{provide:Gs,multi:!0,useFactory:()=>{let e=B(D2);return()=>{e.initialize()}}},{provide:MT,useFactory:w2}]}function w2(){let n=B(Ee),e=B(wr);return t=>n.runOutsideAngular(()=>e.handleError(t))}function I2(n){let e=_2(()=>new Ee(E2(n)));return Pi([[],e])}function E2(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var D2=(()=>{class n{constructor(){this.subscription=new ut,this.initialized=!1,this.zone=B(Ee),this.pendingTasks=B(Uo)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ee.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ee.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function C2(){return typeof $localize<"u"&&$localize.locale||ph}var lc=new q("",{providedIn:"root",factory:()=>B(lc,ve.Optional|ve.SkipSelf)||C2()}),UA=new q("",{providedIn:"root",factory:()=>t2});var BA=new q("");var Kd=null;function b2(n=[],e){return Cn.create({name:e,providers:[{provide:Ih,useValue:"platform"},{provide:BA,useValue:new Set([()=>Kd=null])},...n]})}function T2(n=[]){if(Kd)return Kd;let e=b2(n);return Kd=e,f2(),A2(e),e}function A2(n){n.get(sv,null)?.forEach(t=>t())}function Sv(){return!1}var jn=(()=>{class n{static{this.__NG_ELEMENT_ID__=S2}}return n})();function S2(n){return M2(rn(),De(),(n&16)===16)}function M2(n,e,t){if(Dh(n)&&!t){let r=Oi(n.index,e);return new ko(r,r)}else if(n.type&47){let r=e[vr];return new ko(r,e)}return null}var Ny=class{constructor(){}supports(e){return bA(e)}create(e){return new Py(e)}},x2=(n,e)=>e,Py=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||x2}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<wb(r,i,o)?t:r,a=wb(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,d=u-i;if(l!=d){for(let g=0;g<l;g++){let y=g<o.length?o[g]:o[g]=0,D=y+g;d<=D&&D<l&&(o[g]=y+1)}let f=s.previousIndex;o[f]=d-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!bA(e))throw new ne(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,AL(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Oy(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new gh),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new gh),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Oy=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},ky=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},gh=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new ky,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function wb(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}var Fy=class{constructor(){}supports(e){return e instanceof Map||Dv(e)}create(){return new Vy}},Vy=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let t;for(t=this._mapHead;t!==null;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||Dv(e)))throw new ne(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{let o=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){let r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,t);let o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}let r=new Ly(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}},Ly=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function Ib(){return new Mv([new Ny])}var Mv=(()=>{class n{static{this.\u0275prov=K({token:n,providedIn:"root",factory:Ib})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||Ib()),deps:[[n,new _h,new Dn]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new ne(901,!1)}}return n})();function Eb(){return new xv([new Fy])}var xv=(()=>{class n{static{this.\u0275prov=K({token:n,providedIn:"root",factory:Eb})}constructor(t){this.factories=t}static create(t,r){if(r){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||Eb()),deps:[[n,new _h,new Dn]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r)return r;throw new ne(901,!1)}}return n})();function $A(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=T2(r),o=[I2(),...t||[]],a=new hh({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,u=a.get(Ee);return u.run(()=>{a.resolveInjectorInitializers();let l=a.get(wr,null),d;u.runOutsideAngular(()=>{d=u.onError.subscribe({next:y=>{l.handleError(y)}})});let f=()=>a.destroy(),g=i.get(BA);return g.add(f),a.onDestroy(()=>{d.unsubscribe(),g.delete(f)}),g2(l,u,()=>{let y=a.get(jA);return y.runInitializers(),y.donePromise.then(()=>{let D=a.get(lc,ph);r2(D||ph);let C=a.get(na);return e!==void 0&&C.bootstrap(e),C})})})}catch(e){return Promise.reject(e)}}function Un(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Rv(n,e=NaN){return!isNaN(parseFloat(n))&&!isNaN(Number(n))?Number(n):e}function Nv(n){let e=Te(null);try{return n()}finally{Te(e)}}function qA(n){let e=Mi(n);if(!e)return null;let t=new Ys(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var JA=null;function ri(){return JA}function XA(n){JA??=n}var Qh=class{};var Vt=new q(""),zv=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:()=>B(R2),providedIn:"platform"})}}return n})(),eS=new q(""),R2=(()=>{class n extends zv{constructor(){super(),this._doc=B(Vt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ri().getBaseHref(this._doc)}onPopState(t){let r=ri().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=ri().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function Gv(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function HA(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function ei(n){return n&&n[0]!=="?"?"?"+n:n}var ii=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:()=>B(Wv),providedIn:"root"})}}return n})(),tS=new q(""),Wv=(()=>{class n extends ii{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??B(Vt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Gv(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+ei(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+ei(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+ei(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(j(zv),j(tS,8))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),nS=(()=>{class n extends ii{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Gv(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+ei(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+ei(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(j(zv),j(tS,8))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),ia=(()=>{class n{constructor(t){this._subject=new Ze,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=O2(HA(zA(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ei(r))}normalize(t){return n.stripTrailingSlash(P2(this._basePath,zA(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ei(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ei(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=ei}static{this.joinWithSlash=Gv}static{this.stripTrailingSlash=HA}static{this.\u0275fac=function(r){return new(r||n)(j(ii))}}static{this.\u0275prov=K({token:n,factory:()=>N2(),providedIn:"root"})}}return n})();function N2(){return new ia(j(ii))}function P2(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function zA(n){return n.replace(/\/index.html$/,"")}function O2(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var rS={ADP:[void 0,void 0,0],AFN:[void 0,"\u060B",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058F",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20BC"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09F3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xA5","\xA5"],COP:[void 0,"$",2],CRC:[void 0,"\u20A1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010D",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xA3"],ESP:[void 0,"\u20A7",0],EUR:["\u20AC"],FJD:[void 0,"$"],FKP:[void 0,"\xA3"],GBP:["\xA3"],GEL:[void 0,"\u20BE"],GHS:[void 0,"GH\u20B5"],GIP:[void 0,"\xA3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20AA"],INR:["\u20B9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xA5",void 0,0],KHR:[void 0,"\u17DB"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20A9",0],KRW:["\u20A9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20B8"],LAK:[void 0,"\u20AD",0],LBP:[void 0,"L\xA3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20AE",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20A6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20B1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20B2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20BD"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xA3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xA3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xA3",0],THB:[void 0,"\u0E3F"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20BA"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20B4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20AB",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202FCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xA4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},iS=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(iS||{});var sn=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(sn||{}),Be=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Be||{}),bn=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(bn||{}),Tn={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function k2(n){return mn(n)[nt.LocaleId]}function F2(n,e,t){let r=mn(n),i=[r[nt.DayPeriodsFormat],r[nt.DayPeriodsStandalone]],o=Bn(i,e);return Bn(o,t)}function V2(n,e,t){let r=mn(n),i=[r[nt.DaysFormat],r[nt.DaysStandalone]],o=Bn(i,e);return Bn(o,t)}function L2(n,e,t){let r=mn(n),i=[r[nt.MonthsFormat],r[nt.MonthsStandalone]],o=Bn(i,e);return Bn(o,t)}function j2(n,e){let r=mn(n)[nt.Eras];return Bn(r,e)}function Bh(n,e){let t=mn(n);return Bn(t[nt.DateFormat],e)}function $h(n,e){let t=mn(n);return Bn(t[nt.TimeFormat],e)}function qh(n,e){let r=mn(n)[nt.DateTimeFormat];return Bn(r,e)}function ti(n,e){let t=mn(n),r=t[nt.NumberSymbols][e];if(typeof r>"u"){if(e===Tn.CurrencyDecimal)return t[nt.NumberSymbols][Tn.Decimal];if(e===Tn.CurrencyGroup)return t[nt.NumberSymbols][Tn.Group]}return r}function U2(n,e){return mn(n)[nt.NumberFormats][e]}function B2(n){return mn(n)[nt.Currencies]}function oS(n){if(!n[nt.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[nt.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function $2(n){let e=mn(n);return oS(e),(e[nt.ExtraData][2]||[]).map(r=>typeof r=="string"?Pv(r):[Pv(r[0]),Pv(r[1])])}function q2(n,e,t){let r=mn(n);oS(r);let i=[r[nt.ExtraData][0],r[nt.ExtraData][1]],o=Bn(i,e)||[];return Bn(o,t)||[]}function Bn(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function Pv(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}function H2(n,e,t="en"){let r=B2(t)[n]||rS[n]||[],i=r[1];return e==="narrow"&&typeof i=="string"?i:r[0]||n}var z2=2;function G2(n){let e,t=rS[n];return t&&(e=t[2]),typeof e=="number"?e:z2}var W2=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Hh={},K2=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,ni=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(ni||{}),Re=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(Re||{}),xe=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(xe||{});function Q2(n,e,t,r){let i=ij(n);e=Xr(t,e)||e;let s=[],a;for(;e;)if(a=K2.exec(e),a){s=s.concat(a.slice(1));let d=s.pop();if(!d)break;e=d}else{s.push(e);break}let u=i.getTimezoneOffset();r&&(u=aS(r,u),i=rj(i,r,!0));let l="";return s.forEach(d=>{let f=tj(d);l+=f?f(i,t,u):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Yh(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Xr(n,e){let t=k2(n);if(Hh[t]??={},Hh[t][e])return Hh[t][e];let r="";switch(e){case"shortDate":r=Bh(n,bn.Short);break;case"mediumDate":r=Bh(n,bn.Medium);break;case"longDate":r=Bh(n,bn.Long);break;case"fullDate":r=Bh(n,bn.Full);break;case"shortTime":r=$h(n,bn.Short);break;case"mediumTime":r=$h(n,bn.Medium);break;case"longTime":r=$h(n,bn.Long);break;case"fullTime":r=$h(n,bn.Full);break;case"short":let i=Xr(n,"shortTime"),o=Xr(n,"shortDate");r=zh(qh(n,bn.Short),[i,o]);break;case"medium":let s=Xr(n,"mediumTime"),a=Xr(n,"mediumDate");r=zh(qh(n,bn.Medium),[s,a]);break;case"long":let u=Xr(n,"longTime"),l=Xr(n,"longDate");r=zh(qh(n,bn.Long),[u,l]);break;case"full":let d=Xr(n,"fullTime"),f=Xr(n,"fullDate");r=zh(qh(n,bn.Full),[d,f]);break}return r&&(Hh[t][e]=r),r}function zh(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function or(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function Y2(n,e){return or(n,3).substring(0,e)}function vt(n,e,t=0,r=!1,i=!1){return function(o,s){let a=Z2(n,o);if((t>0||a>-t)&&(a+=t),n===Re.Hours)a===0&&t===-12&&(a=12);else if(n===Re.FractionalSeconds)return Y2(a,e);let u=ti(s,Tn.MinusSign);return or(a,e,u,r,i)}}function Z2(n,e){switch(n){case Re.FullYear:return e.getFullYear();case Re.Month:return e.getMonth();case Re.Date:return e.getDate();case Re.Hours:return e.getHours();case Re.Minutes:return e.getMinutes();case Re.Seconds:return e.getSeconds();case Re.FractionalSeconds:return e.getMilliseconds();case Re.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function qe(n,e,t=sn.Format,r=!1){return function(i,o){return J2(i,o,n,e,t,r)}}function J2(n,e,t,r,i,o){switch(t){case xe.Months:return L2(e,i,r)[n.getMonth()];case xe.Days:return V2(e,i,r)[n.getDay()];case xe.DayPeriods:let s=n.getHours(),a=n.getMinutes();if(o){let l=$2(e),d=q2(e,i,r),f=l.findIndex(g=>{if(Array.isArray(g)){let[y,D]=g,C=s>=y.hours&&a>=y.minutes,A=s<D.hours||s===D.hours&&a<D.minutes;if(y.hours<D.hours){if(C&&A)return!0}else if(C||A)return!0}else if(g.hours===s&&g.minutes===a)return!0;return!1});if(f!==-1)return d[f]}return F2(e,i,r)[s<12?0:1];case xe.Eras:return j2(e,r)[n.getFullYear()<=0?0:1];default:let u=t;throw new Error(`unexpected translation type ${u}`)}}function Gh(n){return function(e,t,r){let i=-1*r,o=ti(t,Tn.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case ni.Short:return(i>=0?"+":"")+or(s,2,o)+or(Math.abs(i%60),2,o);case ni.ShortGMT:return"GMT"+(i>=0?"+":"")+or(s,1,o);case ni.Long:return"GMT"+(i>=0?"+":"")+or(s,2,o)+":"+or(Math.abs(i%60),2,o);case ni.Extended:return r===0?"Z":(i>=0?"+":"")+or(s,2,o)+":"+or(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var X2=0,Kh=4;function ej(n){let e=Yh(n,X2,1).getDay();return Yh(n,0,1+(e<=Kh?Kh:Kh+7)-e)}function sS(n){let e=n.getDay(),t=e===0?-3:Kh-e;return Yh(n.getFullYear(),n.getMonth(),n.getDate()+t)}function Ov(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=sS(t),s=ej(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return or(i,n,ti(r,Tn.MinusSign))}}function Wh(n,e=!1){return function(t,r){let o=sS(t).getFullYear();return or(o,n,ti(r,Tn.MinusSign),e)}}var kv={};function tj(n){if(kv[n])return kv[n];let e;switch(n){case"G":case"GG":case"GGG":e=qe(xe.Eras,Be.Abbreviated);break;case"GGGG":e=qe(xe.Eras,Be.Wide);break;case"GGGGG":e=qe(xe.Eras,Be.Narrow);break;case"y":e=vt(Re.FullYear,1,0,!1,!0);break;case"yy":e=vt(Re.FullYear,2,0,!0,!0);break;case"yyy":e=vt(Re.FullYear,3,0,!1,!0);break;case"yyyy":e=vt(Re.FullYear,4,0,!1,!0);break;case"Y":e=Wh(1);break;case"YY":e=Wh(2,!0);break;case"YYY":e=Wh(3);break;case"YYYY":e=Wh(4);break;case"M":case"L":e=vt(Re.Month,1,1);break;case"MM":case"LL":e=vt(Re.Month,2,1);break;case"MMM":e=qe(xe.Months,Be.Abbreviated);break;case"MMMM":e=qe(xe.Months,Be.Wide);break;case"MMMMM":e=qe(xe.Months,Be.Narrow);break;case"LLL":e=qe(xe.Months,Be.Abbreviated,sn.Standalone);break;case"LLLL":e=qe(xe.Months,Be.Wide,sn.Standalone);break;case"LLLLL":e=qe(xe.Months,Be.Narrow,sn.Standalone);break;case"w":e=Ov(1);break;case"ww":e=Ov(2);break;case"W":e=Ov(1,!0);break;case"d":e=vt(Re.Date,1);break;case"dd":e=vt(Re.Date,2);break;case"c":case"cc":e=vt(Re.Day,1);break;case"ccc":e=qe(xe.Days,Be.Abbreviated,sn.Standalone);break;case"cccc":e=qe(xe.Days,Be.Wide,sn.Standalone);break;case"ccccc":e=qe(xe.Days,Be.Narrow,sn.Standalone);break;case"cccccc":e=qe(xe.Days,Be.Short,sn.Standalone);break;case"E":case"EE":case"EEE":e=qe(xe.Days,Be.Abbreviated);break;case"EEEE":e=qe(xe.Days,Be.Wide);break;case"EEEEE":e=qe(xe.Days,Be.Narrow);break;case"EEEEEE":e=qe(xe.Days,Be.Short);break;case"a":case"aa":case"aaa":e=qe(xe.DayPeriods,Be.Abbreviated);break;case"aaaa":e=qe(xe.DayPeriods,Be.Wide);break;case"aaaaa":e=qe(xe.DayPeriods,Be.Narrow);break;case"b":case"bb":case"bbb":e=qe(xe.DayPeriods,Be.Abbreviated,sn.Standalone,!0);break;case"bbbb":e=qe(xe.DayPeriods,Be.Wide,sn.Standalone,!0);break;case"bbbbb":e=qe(xe.DayPeriods,Be.Narrow,sn.Standalone,!0);break;case"B":case"BB":case"BBB":e=qe(xe.DayPeriods,Be.Abbreviated,sn.Format,!0);break;case"BBBB":e=qe(xe.DayPeriods,Be.Wide,sn.Format,!0);break;case"BBBBB":e=qe(xe.DayPeriods,Be.Narrow,sn.Format,!0);break;case"h":e=vt(Re.Hours,1,-12);break;case"hh":e=vt(Re.Hours,2,-12);break;case"H":e=vt(Re.Hours,1);break;case"HH":e=vt(Re.Hours,2);break;case"m":e=vt(Re.Minutes,1);break;case"mm":e=vt(Re.Minutes,2);break;case"s":e=vt(Re.Seconds,1);break;case"ss":e=vt(Re.Seconds,2);break;case"S":e=vt(Re.FractionalSeconds,1);break;case"SS":e=vt(Re.FractionalSeconds,2);break;case"SSS":e=vt(Re.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Gh(ni.Short);break;case"ZZZZZ":e=Gh(ni.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Gh(ni.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Gh(ni.Long);break;default:return null}return kv[n]=e,e}function aS(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function nj(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function rj(n,e,t){let r=t?-1:1,i=n.getTimezoneOffset(),o=aS(e,i);return nj(n,r*(o-i))}function ij(n){if(GA(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return Yh(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(W2))return oj(r)}let e=new Date(n);if(!GA(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function oj(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,u=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,u,l),e}function GA(n){return n instanceof Date&&!isNaN(n.valueOf())}var sj=/^(\d+)?\.((\d+)(-(\d+))?)?$/,WA=22,Zh=".",dc="0",aj=";",uj=",",Fv="#",KA="\xA4";function cj(n,e,t,r,i,o,s=!1){let a="",u=!1;if(!isFinite(n))a=ti(t,Tn.Infinity);else{let l=fj(n);s&&(l=hj(l));let d=e.minInt,f=e.minFrac,g=e.maxFrac;if(o){let G=o.match(sj);if(G===null)throw new Error(`${o} is not a valid digit info`);let k=G[1],J=G[3],oe=G[5];k!=null&&(d=Vv(k)),J!=null&&(f=Vv(J)),oe!=null?g=Vv(oe):J!=null&&f>g&&(g=f)}pj(l,f,g);let y=l.digits,D=l.integerLen,C=l.exponent,A=[];for(u=y.every(G=>!G);D<d;D++)y.unshift(0);for(;D<0;D++)y.unshift(0);D>0?A=y.splice(D,y.length):(A=y,y=[0]);let V=[];for(y.length>=e.lgSize&&V.unshift(y.splice(-e.lgSize,y.length).join(""));y.length>e.gSize;)V.unshift(y.splice(-e.gSize,y.length).join(""));y.length&&V.unshift(y.join("")),a=V.join(ti(t,r)),A.length&&(a+=ti(t,i)+A.join("")),C&&(a+=ti(t,Tn.Exponential)+"+"+C)}return n<0&&!u?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function lj(n,e,t,r,i){let o=U2(e,iS.Currency),s=dj(o,ti(e,Tn.MinusSign));return s.minFrac=G2(r),s.maxFrac=s.minFrac,cj(n,s,e,Tn.CurrencyGroup,Tn.CurrencyDecimal,i).replace(KA,t).replace(KA,"").trim()}function dj(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(aj),i=r[0],o=r[1],s=i.indexOf(Zh)!==-1?i.split(Zh):[i.substring(0,i.lastIndexOf(dc)+1),i.substring(i.lastIndexOf(dc)+1)],a=s[0],u=s[1]||"";t.posPre=a.substring(0,a.indexOf(Fv));for(let d=0;d<u.length;d++){let f=u.charAt(d);f===dc?t.minFrac=t.maxFrac=d+1:f===Fv?t.maxFrac=d+1:t.posSuf+=f}let l=a.split(uj);if(t.gSize=l[1]?l[1].length:0,t.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,o){let d=i.length-t.posPre.length-t.posSuf.length,f=o.indexOf(Fv);t.negPre=o.substring(0,f).replace(/'/g,""),t.negSuf=o.slice(f+d).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function hj(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function fj(n){let e=Math.abs(n)+"",t=0,r,i,o,s,a;for((i=e.indexOf(Zh))>-1&&(e=e.replace(Zh,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===dc;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===dc;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>WA&&(r=r.splice(0,WA-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function pj(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen,o=Math.min(Math.max(e,i),t),s=o+n.integerLen,a=r[s];if(s>0){r.splice(Math.max(n.integerLen,s));for(let f=s;f<r.length;f++)r[f]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let f=1;f<s;f++)r[f]=0}if(a>=5)if(s-1<0){for(let f=0;f>s;f--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let u=o!==0,l=e+n.integerLen,d=r.reduceRight(function(f,g,y,D){return g=g+f,D[y]=g<10?g:g-10,u&&(D[y]===0&&y>=l?D.pop():u=!1),g>=10?1:0},0);d&&(r.unshift(d),n.integerLen++)}function Vv(n){let e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function Jh(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Lv=/\s+/,QA=[],uS=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=QA,this.stateMap=new Map}set klass(t){this.initialClasses=t!=null?t.trim().split(Lv):QA}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(Lv):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(Lv).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)(U(Rt),U(gn))}}static{this.\u0275dir=Ne({type:n,selectors:[["","ngClass",""]],inputs:{klass:[ke.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var jv=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},br=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new jv(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),YA(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);YA(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(U(ki),U(Fo),U(Mv))}}static{this.\u0275dir=Ne({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function YA(n,e){n.context.$implicit=e.item}var Tr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Uv,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ZA("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ZA("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(U(ki),U(Fo))}}static{this.\u0275dir=Ne({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),Uv=class{constructor(){this.$implicit=null,this.ngIf=null}};function ZA(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${nn(e)}'.`)}var cS=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){let t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){let[i,o]=t.split("."),s=i.indexOf("-")===-1?void 0:Ir.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,i,s)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static{this.\u0275fac=function(r){return new(r||n)(U(Rt),U(xv),U(gn))}}static{this.\u0275dir=Ne({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return n})();function Kv(n,e){return new ne(2100,!1)}var Bv=class{createSubscription(e,t){return Nv(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){Nv(()=>e.unsubscribe())}},$v=class{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}},gj=new $v,mj=new Bv,lS=(()=>{class n{constructor(t){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(Vi(t))return gj;if(Av(t))return mj;throw Kv(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(r){return new(r||n)(U(jn,16))}}static{this.\u0275pipe=wh({name:"async",type:n,pure:!1,standalone:!0})}}return n})();var yj="mediumDate",vj=new q(""),_j=new q(""),Xh=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??yj,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return Q2(t,s,o||this.locale,a)}catch(s){throw Kv(n,s.message)}}static{this.\u0275fac=function(r){return new(r||n)(U(lc,16),U(vj,24),U(_j,24))}}static{this.\u0275pipe=wh({name:"date",type:n,pure:!0,standalone:!0})}}return n})();var ef=(()=>{class n{constructor(t,r="USD"){this._locale=t,this._defaultCurrencyCode=r}transform(t,r=this._defaultCurrencyCode,i="symbol",o,s){if(!wj(t))return null;s||=this._locale,typeof i=="boolean"&&(i=i?"symbol":"code");let a=r||this._defaultCurrencyCode;i!=="code"&&(i==="symbol"||i==="symbol-narrow"?a=H2(a,i==="symbol"?"wide":"narrow",s):a=i);try{let u=Ij(t);return lj(u,s,a,r,o)}catch(u){throw Kv(n,u.message)}}static{this.\u0275fac=function(r){return new(r||n)(U(lc,16),U(UA,16))}}static{this.\u0275pipe=wh({name:"currency",type:n,pure:!0,standalone:!0})}}return n})();function wj(n){return!(n==null||n===""||n!==n)}function Ij(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var Qv="browser",Ej="server";function Dj(n){return n===Qv}function oi(n){return n===Ej}var dS=(()=>{class n{static{this.\u0275prov=K({token:n,providedIn:"root",factory:()=>Dj(B(bt))?new qv(B(Vt),window):new Hv})}}return n})(),qv=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=Cj(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function Cj(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Hv=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},ra=class{};var hS=n=>n.src,bj=new q("",{providedIn:"root",factory:()=>hS});var Tj=new q("NG_OPTIMIZED_PRELOADED_IMAGES",{providedIn:"root",factory:()=>new Set}),Aj=(()=>{class n{constructor(){this.preloadedImages=B(Tj),this.document=B(Vt)}createPreloadLinkTag(t,r,i,o){if(this.preloadedImages.has(r))return;this.preloadedImages.add(r);let s=t.createElement("link");t.setAttribute(s,"as","image"),t.setAttribute(s,"href",r),t.setAttribute(s,"rel","preload"),t.setAttribute(s,"fetchpriority","high"),o&&t.setAttribute(s,"imageSizes",o),i&&t.setAttribute(s,"imageSrcset",i),t.appendChild(this.document.head,s)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Sj=/^((\s*\d+w\s*(,|$)){1,})$/;var Mj=[1,2],xj=640;var Rj=1920,Nj=1080;var fS=(()=>{class n{constructor(){this.imageLoader=B(bj),this.config=Pj(B(FT)),this.renderer=B(gn),this.imgElement=B(Rt).nativeElement,this.injector=B(Cn),this.isServer=oi(B(bt)),this.preloadLinkCreator=B(Aj),this.lcpObserver=null,this._renderedSrc=null,this.priority=!1,this.disableOptimizedSrcset=!1,this.fill=!1}ngOnInit(){sc("NgOptimizedImage"),this.placeholder&&this.removePlaceholderOnLoad(this.imgElement),this.setHostAttributes()}setHostAttributes(){this.fill?this.sizes||="100vw":(this.setHostAttribute("width",this.width.toString()),this.setHostAttribute("height",this.height.toString())),this.setHostAttribute("loading",this.getLoadingBehavior()),this.setHostAttribute("fetchpriority",this.getFetchPriority()),this.setHostAttribute("ng-img","true");let t=this.updateSrcAndSrcset();this.sizes&&this.setHostAttribute("sizes",this.sizes),this.isServer&&this.priority&&this.preloadLinkCreator.createPreloadLinkTag(this.renderer,this.getRewrittenSrc(),t,this.sizes)}ngOnChanges(t){if(t.ngSrc&&!t.ngSrc.isFirstChange()){let r=this._renderedSrc;this.updateSrcAndSrcset(!0);let i=this._renderedSrc;this.lcpObserver!==null&&r&&i&&r!==i&&this.injector.get(Ee).runOutsideAngular(()=>{this.lcpObserver?.updateImage(r,i)})}}callImageLoader(t){let r=t;return this.loaderParams&&(r.loaderParams=this.loaderParams),this.imageLoader(r)}getLoadingBehavior(){return!this.priority&&this.loading!==void 0?this.loading:this.priority?"eager":"lazy"}getFetchPriority(){return this.priority?"high":"auto"}getRewrittenSrc(){if(!this._renderedSrc){let t={src:this.ngSrc};this._renderedSrc=this.callImageLoader(t)}return this._renderedSrc}getRewrittenSrcset(){let t=Sj.test(this.ngSrcset);return this.ngSrcset.split(",").filter(i=>i!=="").map(i=>{i=i.trim();let o=t?parseFloat(i):parseFloat(i)*this.width;return`${this.callImageLoader({src:this.ngSrc,width:o})} ${i}`}).join(", ")}getAutomaticSrcset(){return this.sizes?this.getResponsiveSrcset():this.getFixedSrcset()}getResponsiveSrcset(){let{breakpoints:t}=this.config,r=t;return this.sizes?.trim()==="100vw"&&(r=t.filter(o=>o>=xj)),r.map(o=>`${this.callImageLoader({src:this.ngSrc,width:o})} ${o}w`).join(", ")}updateSrcAndSrcset(t=!1){t&&(this._renderedSrc=null);let r=this.getRewrittenSrc();this.setHostAttribute("src",r);let i;return this.ngSrcset?i=this.getRewrittenSrcset():this.shouldGenerateAutomaticSrcset()&&(i=this.getAutomaticSrcset()),i&&this.setHostAttribute("srcset",i),i}getFixedSrcset(){return Mj.map(r=>`${this.callImageLoader({src:this.ngSrc,width:this.width*r})} ${r}x`).join(", ")}shouldGenerateAutomaticSrcset(){let t=!1;return this.sizes||(t=this.width>Rj||this.height>Nj),!this.disableOptimizedSrcset&&!this.srcset&&this.imageLoader!==hS&&!t}generatePlaceholder(t){let{placeholderResolution:r}=this.config;return t===!0?`url(${this.callImageLoader({src:this.ngSrc,width:r,isPlaceholder:!0})})`:typeof t=="string"&&t.startsWith("data:")?`url(${t})`:null}shouldBlurPlaceholder(t){return!t||!t.hasOwnProperty("blur")?!0:!!t.blur}removePlaceholderOnLoad(t){let r=()=>{let s=this.injector.get(jn);i(),o(),this.placeholder=!1,s.markForCheck()},i=this.renderer.listen(t,"load",r),o=this.renderer.listen(t,"error",r)}ngOnDestroy(){}setHostAttribute(t,r){this.renderer.setAttribute(this.imgElement,t,r)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ne({type:n,selectors:[["img","ngSrc",""]],hostVars:18,hostBindings:function(r,i){r&2&&bv("position",i.fill?"absolute":null)("width",i.fill?"100%":null)("height",i.fill?"100%":null)("inset",i.fill?"0":null)("background-size",i.placeholder?"cover":null)("background-position",i.placeholder?"50% 50%":null)("background-repeat",i.placeholder?"no-repeat":null)("background-image",i.placeholder?i.generatePlaceholder(i.placeholder):null)("filter",i.placeholder&&i.shouldBlurPlaceholder(i.placeholderConfig)?"blur(15px)":null)},inputs:{ngSrc:[ke.HasDecoratorInputTransform,"ngSrc","ngSrc",Oj],ngSrcset:"ngSrcset",sizes:"sizes",width:[ke.HasDecoratorInputTransform,"width","width",Rv],height:[ke.HasDecoratorInputTransform,"height","height",Rv],loading:"loading",priority:[ke.HasDecoratorInputTransform,"priority","priority",Un],loaderParams:"loaderParams",disableOptimizedSrcset:[ke.HasDecoratorInputTransform,"disableOptimizedSrcset","disableOptimizedSrcset",Un],fill:[ke.HasDecoratorInputTransform,"fill","fill",Un],placeholder:[ke.HasDecoratorInputTransform,"placeholder","placeholder",kj],placeholderConfig:"placeholderConfig",src:"src",srcset:"srcset"},standalone:!0,features:[Nh,Fn]})}}return n})();function Pj(n){let e={};return n.breakpoints&&(e.breakpoints=n.breakpoints.sort((t,r)=>t-r)),Object.assign({},uv,n,e)}function Oj(n){return typeof n=="string"?n:ea(n)}function kj(n){return typeof n=="string"&&n.startsWith("data:")?n:Un(n)}var fc=class{},nf=class{},Bo=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=i.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Zv=class{encodeKey(e){return gS(e)}encodeValue(e){return gS(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function Lj(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],u=t.get(s)||[];u.push(a),t.set(s,u)}),t}var jj=/%(\d[a-f0-9])/gi,Uj={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function gS(n){return encodeURIComponent(n).replace(jj,(e,t)=>Uj[t]??e)}function tf(n){return`${n}`}var Li=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Zv,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=Lj(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(tf):[tf(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(tf(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(tf(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Jv=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function Bj(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function mS(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function yS(n){return typeof Blob<"u"&&n instanceof Blob}function vS(n){return typeof FormData<"u"&&n instanceof FormData}function $j(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var hc=class n{constructor(e,t,r,i){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(Bj(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Bo,this.context??=new Jv,!this.params)this.params=new Li,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),u=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+u+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||mS(this.body)||yS(this.body)||vS(this.body)||$j(this.body)?this.body:this.body instanceof Li?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||vS(this.body)?null:yS(this.body)?this.body.type||null:mS(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Li?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,l=e.headers||this.headers,d=e.params||this.params,f=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((g,y)=>g.set(y,e.setHeaders[y]),l)),e.setParams&&(d=Object.keys(e.setParams).reduce((g,y)=>g.set(y,e.setParams[y]),d)),new n(t,r,s,{params:d,headers:l,context:f,reportProgress:u,responseType:i,withCredentials:a,transferCache:o})}},oa=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(oa||{}),pc=class{constructor(e,t=sf.Ok,r="OK"){this.headers=e.headers||new Bo,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Xv=class n extends pc{constructor(e={}){super(e),this.type=oa.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},rf=class n extends pc{constructor(e={}){super(e),this.type=oa.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},of=class extends pc{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},sf=function(n){return n[n.Continue=100]="Continue",n[n.SwitchingProtocols=101]="SwitchingProtocols",n[n.Processing=102]="Processing",n[n.EarlyHints=103]="EarlyHints",n[n.Ok=200]="Ok",n[n.Created=201]="Created",n[n.Accepted=202]="Accepted",n[n.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",n[n.NoContent=204]="NoContent",n[n.ResetContent=205]="ResetContent",n[n.PartialContent=206]="PartialContent",n[n.MultiStatus=207]="MultiStatus",n[n.AlreadyReported=208]="AlreadyReported",n[n.ImUsed=226]="ImUsed",n[n.MultipleChoices=300]="MultipleChoices",n[n.MovedPermanently=301]="MovedPermanently",n[n.Found=302]="Found",n[n.SeeOther=303]="SeeOther",n[n.NotModified=304]="NotModified",n[n.UseProxy=305]="UseProxy",n[n.Unused=306]="Unused",n[n.TemporaryRedirect=307]="TemporaryRedirect",n[n.PermanentRedirect=308]="PermanentRedirect",n[n.BadRequest=400]="BadRequest",n[n.Unauthorized=401]="Unauthorized",n[n.PaymentRequired=402]="PaymentRequired",n[n.Forbidden=403]="Forbidden",n[n.NotFound=404]="NotFound",n[n.MethodNotAllowed=405]="MethodNotAllowed",n[n.NotAcceptable=406]="NotAcceptable",n[n.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",n[n.RequestTimeout=408]="RequestTimeout",n[n.Conflict=409]="Conflict",n[n.Gone=410]="Gone",n[n.LengthRequired=411]="LengthRequired",n[n.PreconditionFailed=412]="PreconditionFailed",n[n.PayloadTooLarge=413]="PayloadTooLarge",n[n.UriTooLong=414]="UriTooLong",n[n.UnsupportedMediaType=415]="UnsupportedMediaType",n[n.RangeNotSatisfiable=416]="RangeNotSatisfiable",n[n.ExpectationFailed=417]="ExpectationFailed",n[n.ImATeapot=418]="ImATeapot",n[n.MisdirectedRequest=421]="MisdirectedRequest",n[n.UnprocessableEntity=422]="UnprocessableEntity",n[n.Locked=423]="Locked",n[n.FailedDependency=424]="FailedDependency",n[n.TooEarly=425]="TooEarly",n[n.UpgradeRequired=426]="UpgradeRequired",n[n.PreconditionRequired=428]="PreconditionRequired",n[n.TooManyRequests=429]="TooManyRequests",n[n.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",n[n.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",n[n.InternalServerError=500]="InternalServerError",n[n.NotImplemented=501]="NotImplemented",n[n.BadGateway=502]="BadGateway",n[n.ServiceUnavailable=503]="ServiceUnavailable",n[n.GatewayTimeout=504]="GatewayTimeout",n[n.HttpVersionNotSupported=505]="HttpVersionNotSupported",n[n.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",n[n.InsufficientStorage=507]="InsufficientStorage",n[n.LoopDetected=508]="LoopDetected",n[n.NotExtended=510]="NotExtended",n[n.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",n}(sf||{});function Yv(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var e_=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof hc)o=t;else{let u;i.headers instanceof Bo?u=i.headers:u=new Bo(i.headers);let l;i.params&&(i.params instanceof Li?l=i.params:l=new Li({fromObject:i.params})),o=new hc(t,r,i.body!==void 0?i.body:null,{headers:u,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=te(o).pipe(Wr(u=>this.handler.handle(u)));if(t instanceof hc||i.observe==="events")return s;let a=s.pipe(pt(u=>u instanceof rf));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(X(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return a.pipe(X(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return a.pipe(X(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return a.pipe(X(u=>u.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new Li().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Yv(i,r))}post(t,r,i={}){return this.request("POST",t,Yv(i,r))}put(t,r,i={}){return this.request("PUT",t,Yv(i,r))}static{this.\u0275fac=function(r){return new(r||n)(j(fc))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})();function ES(n,e){return e(n)}function qj(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}function Hj(n,e,t){return(r,i)=>nr(t,()=>e(r,o=>n(o,i)))}var t_=new q(""),n_=new q(""),zj=new q(""),Gj=new q("");function Wj(){let n=null;return(e,t)=>{n===null&&(n=(B(t_,{optional:!0})??[]).reduceRight(qj,ES));let r=B(Uo),i=r.add();return n(e,t).pipe(Ci(()=>r.remove(i)))}}var _S=(()=>{class n extends fc{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=B(Uo);let i=B(Gj,{optional:!0});this.backend=i??t}handle(t){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(n_),...this.injector.get(zj,[])]));this.chain=i.reduceRight((o,s)=>Hj(o,s,this.injector),ES)}let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Ci(()=>this.pendingTasks.remove(r)))}static{this.\u0275fac=function(r){return new(r||n)(j(nf),j(Ht))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})();var Kj=/^\)\]\}',?\n/;function Qj(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var wS=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new ne(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?_e(r.\u0275loadImpl()):te(null)).pipe(Ye(()=>new ce(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((C,A)=>s.setRequestHeader(C,A.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let C=t.detectContentTypeHeader();C!==null&&s.setRequestHeader("Content-Type",C)}if(t.responseType){let C=t.responseType.toLowerCase();s.responseType=C!=="json"?C:"text"}let a=t.serializeBody(),u=null,l=()=>{if(u!==null)return u;let C=s.statusText||"OK",A=new Bo(s.getAllResponseHeaders()),V=Qj(s)||t.url;return u=new Xv({headers:A,status:s.status,statusText:C,url:V}),u},d=()=>{let{headers:C,status:A,statusText:V,url:G}=l(),k=null;A!==sf.NoContent&&(k=typeof s.response>"u"?s.responseText:s.response),A===0&&(A=k?sf.Ok:0);let J=A>=200&&A<300;if(t.responseType==="json"&&typeof k=="string"){let oe=k;k=k.replace(Kj,"");try{k=k!==""?JSON.parse(k):null}catch(re){k=oe,J&&(J=!1,k={error:re,text:k})}}J?(o.next(new rf({body:k,headers:C,status:A,statusText:V,url:G||void 0})),o.complete()):o.error(new of({error:k,headers:C,status:A,statusText:V,url:G||void 0}))},f=C=>{let{url:A}=l(),V=new of({error:C,status:s.status||0,statusText:s.statusText||"Unknown Error",url:A||void 0});o.error(V)},g=!1,y=C=>{g||(o.next(l()),g=!0);let A={type:oa.DownloadProgress,loaded:C.loaded};C.lengthComputable&&(A.total=C.total),t.responseType==="text"&&s.responseText&&(A.partialText=s.responseText),o.next(A)},D=C=>{let A={type:oa.UploadProgress,loaded:C.loaded};C.lengthComputable&&(A.total=C.total),o.next(A)};return s.addEventListener("load",d),s.addEventListener("error",f),s.addEventListener("timeout",f),s.addEventListener("abort",f),t.reportProgress&&(s.addEventListener("progress",y),a!==null&&s.upload&&s.upload.addEventListener("progress",D)),s.send(a),o.next({type:oa.Sent}),()=>{s.removeEventListener("error",f),s.removeEventListener("abort",f),s.removeEventListener("load",d),s.removeEventListener("timeout",f),t.reportProgress&&(s.removeEventListener("progress",y),a!==null&&s.upload&&s.upload.removeEventListener("progress",D)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(j(ra))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),DS=new q(""),Yj="XSRF-TOKEN",Zj=new q("",{providedIn:"root",factory:()=>Yj}),Jj="X-XSRF-TOKEN",Xj=new q("",{providedIn:"root",factory:()=>Jj}),af=class{},eU=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Jh(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(j(Vt),j(bt),j(Zj))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})();function tU(n,e){let t=n.url.toLowerCase();if(!B(DS)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=B(af).getToken(),i=B(Xj);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var CS=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(CS||{});function nU(n,e){return{\u0275kind:n,\u0275providers:e}}function rU(...n){let e=[e_,wS,_S,{provide:fc,useExisting:_S},{provide:nf,useExisting:wS},{provide:n_,useValue:tU,multi:!0},{provide:DS,useValue:!0},{provide:af,useClass:eU}];for(let t of n)e.push(...t.\u0275providers);return Pi(e)}var IS=new q("");function iU(){return nU(CS.LegacyInterceptors,[{provide:IS,useFactory:Wj},{provide:n_,useExisting:IS,multi:!0}])}var bS=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=yt({type:n})}static{this.\u0275inj=mt({providers:[rU(iU())]})}}return n})();var o_=class extends Qh{constructor(){super(...arguments),this.supportsDOMEvents=!0}},s_=class n extends o_{static makeCurrent(){XA(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=sU();return t==null?null:aU(t)}resetBaseElement(){gc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Jh(document.cookie,e)}},gc=null;function sU(){return gc=gc||document.querySelector("base"),gc?gc.getAttribute("href"):null}function aU(n){return new URL(n,document.baseURI).pathname}var uU=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),a_=new q(""),MS=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new ne(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(j(a_),j(Ee))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),uf=class{constructor(e){this._doc=e}},r_="ng-app-id",xS=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=oi(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${r_}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(r_),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(r_,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(j(Vt),j(ov),j(av,8),j(bt))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),i_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},c_=/%COMP%/g,RS="%COMP%",cU=`_nghost-${RS}`,lU=`_ngcontent-${RS}`,dU=!0,hU=new q("",{providedIn:"root",factory:()=>dU});function fU(n){return lU.replace(c_,n)}function pU(n){return cU.replace(c_,n)}function NS(n,e){return e.map(t=>t.replace(c_,n))}var TS=(()=>{class n{constructor(t,r,i,o,s,a,u,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=oi(a),this.defaultRenderer=new mc(t,s,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===yr.ShadowDom&&(r=Me(W({},r),{encapsulation:yr.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof cf?i.applyToHost(t):i instanceof yc&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(r.encapsulation){case yr.Emulated:o=new cf(u,l,r,this.appId,d,s,a,f);break;case yr.ShadowDom:return new u_(u,l,t,r,s,a,this.nonce,f);default:o=new yc(u,l,r,d,s,a,f);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(j(MS),j(xS),j(ov),j(hU),j(Vt),j(bt),j(Ee),j(av))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),mc=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(i_[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(AS(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(AS(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ne(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=i_[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=i_[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ir.DashCase|Ir.Important)?e.style.setProperty(t,r,i&Ir.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ir.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=ri().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function AS(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var u_=class extends mc{constructor(e,t,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=NS(i.id,i.styles);for(let d of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},yc=class extends mc{constructor(e,t,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?NS(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},cf=class extends yc{constructor(e,t,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,t,r,o,s,a,u,l),this.contentAttr=fU(l),this.hostAttr=pU(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},gU=(()=>{class n extends uf{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(j(Vt))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),SS=["alt","control","meta","shift"],mU={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},yU={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},vU=(()=>{class n extends uf{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ri().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),SS.forEach(l=>{let d=r.indexOf(l);d>-1&&(r.splice(d,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=mU[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),SS.forEach(s=>{if(s!==i){let a=yU[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(j(Vt))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})();function PS(n,e){return $A(W({rootComponent:n},_U(e)))}function _U(n){return{appProviders:[...CU,...n?.providers??[]],platformProviders:DU}}function wU(){s_.makeCurrent()}function IU(){return new wr}function EU(){return kT(document),document}var DU=[{provide:bt,useValue:Qv},{provide:sv,useValue:wU,multi:!0},{provide:Vt,useFactory:EU,deps:[]}];var CU=[{provide:Ih,useValue:"root"},{provide:wr,useFactory:IU,deps:[]},{provide:a_,useClass:gU,multi:!0,deps:[Vt,Ee,bt]},{provide:a_,useClass:vU,multi:!0,deps:[Vt]},TS,xS,MS,{provide:Ju,useExisting:TS},{provide:ra,useClass:uU,deps:[]},[]];var OS=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(j(Vt))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var he="primary",Pc=Symbol("RouteTitle"),p_=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function la(n){return new p_(n)}function TU(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function AU(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ar(n[t],e[t]))return!1;return!0}function Ar(n,e){let t=n?g_(n):void 0,r=e?g_(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!qS(n[i],e[i]))return!1;return!0}function g_(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function qS(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function HS(n){return n.length>0?n[n.length-1]:null}function qi(n){return _m(n)?n:Vi(n)?_e(Promise.resolve(n)):te(n)}var SU={exact:GS,subset:WS},zS={exact:MU,subset:xU,ignored:()=>!0};function kS(n,e,t){return SU[t.paths](n.root,e.root,t.matrixParams)&&zS[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function MU(n,e){return Ar(n,e)}function GS(n,e,t){if(!qo(n.segments,e.segments)||!hf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!GS(n.children[r],e.children[r],t))return!1;return!0}function xU(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>qS(n[t],e[t]))}function WS(n,e,t){return KS(n,e,e.segments,t)}function KS(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!qo(i,t)||e.hasChildren()||!hf(i,t,r))}else if(n.segments.length===t.length){if(!qo(n.segments,t)||!hf(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!WS(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!qo(n.segments,i)||!hf(n.segments,i,r)||!n.children[he]?!1:KS(n.children[he],e,o,r)}}function hf(n,e,t){return e.every((r,i)=>zS[t](n[i].parameters,r.parameters))}var ji=class{constructor(e=new Pe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=la(this.queryParams),this._queryParamMap}toString(){return PU.serialize(this)}},Pe=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ff(this)}},$o=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=la(this.parameters),this._parameterMap}toString(){return YS(this)}};function RU(n,e){return qo(n,e)&&n.every((t,r)=>Ar(t.parameters,e[r].parameters))}function qo(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function NU(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===he&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==he&&(t=t.concat(e(i,r)))}),t}var Oc=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:()=>new Cc,providedIn:"root"})}}return n})(),Cc=class{parse(e){let t=new y_(e);return new ji(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${vc(e.root,!0)}`,r=FU(e.queryParams),i=typeof e.fragment=="string"?`#${OU(e.fragment)}`:"";return`${t}${r}${i}`}},PU=new Cc;function ff(n){return n.segments.map(e=>YS(e)).join("/")}function vc(n,e){if(!n.hasChildren())return ff(n);if(e){let t=n.children[he]?vc(n.children[he],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==he&&r.push(`${i}:${vc(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=NU(n,(r,i)=>i===he?[vc(n.children[he],!1)]:[`${i}:${vc(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[he]!=null?`${ff(n)}/${t[0]}`:`${ff(n)}/(${t.join("//")})`}}function QS(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function lf(n){return QS(n).replace(/%3B/gi,";")}function OU(n){return encodeURI(n)}function m_(n){return QS(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function pf(n){return decodeURIComponent(n)}function FS(n){return pf(n.replace(/\+/g,"%20"))}function YS(n){return`${m_(n.path)}${kU(n.parameters)}`}function kU(n){return Object.entries(n).map(([e,t])=>`;${m_(e)}=${m_(t)}`).join("")}function FU(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${lf(t)}=${lf(i)}`).join("&"):`${lf(t)}=${lf(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var VU=/^[^\/()?;#]+/;function l_(n){let e=n.match(VU);return e?e[0]:""}var LU=/^[^\/()?;=#]+/;function jU(n){let e=n.match(LU);return e?e[0]:""}var UU=/^[^=?&#]+/;function BU(n){let e=n.match(UU);return e?e[0]:""}var $U=/^[^&#]+/;function qU(n){let e=n.match($U);return e?e[0]:""}var y_=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Pe([],{}):new Pe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[he]=new Pe(e,t)),r}parseSegment(){let e=l_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ne(4009,!1);return this.capture(e),new $o(pf(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=jU(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=l_(this.remaining);i&&(r=i,this.capture(r))}e[pf(t)]=pf(r)}parseQueryParam(e){let t=BU(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=qU(this.remaining);s&&(r=s,this.capture(r))}let i=FS(t),o=FS(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=l_(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ne(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=he);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[he]:new Pe([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ne(4011,!1)}};function ZS(n){return n.segments.length>0?new Pe([],{[he]:n}):n}function JS(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=JS(i);if(r===he&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Pe(n.segments,e);return HU(t)}function HU(n){if(n.numberOfChildren===1&&n.children[he]){let e=n.children[he];return new Pe(n.segments.concat(e.segments),e.children)}return n}function da(n){return n instanceof ji}function zU(n,e,t=null,r=null){let i=XS(n);return eM(i,e,t,r)}function XS(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new Pe(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=ZS(r);return e??i}function eM(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return d_(i,i,i,t,r);let o=GU(e);if(o.toRoot())return d_(i,i,new Pe([],{}),t,r);let s=WU(o,i,n),a=s.processChildren?Ic(s.segmentGroup,s.index,o.commands):nM(s.segmentGroup,s.index,o.commands);return d_(i,s.segmentGroup,a,t,r)}function gf(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function bc(n){return typeof n=="object"&&n!=null&&n.outlets}function d_(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let s;n===e?s=t:s=tM(n,e,t);let a=ZS(JS(s));return new ji(a,o,i)}function tM(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=tM(o,e,t)}),new Pe(n.segments,r)}var mf=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&gf(r[0]))throw new ne(4003,!1);let i=r.find(bc);if(i&&i!==HS(r))throw new ne(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function GU(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new mf(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new mf(t,e,r)}var ua=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function WU(n,e,t){if(n.isAbsolute)return new ua(e,!0,0);if(!t)return new ua(e,!1,NaN);if(t.parent===null)return new ua(t,!0,0);let r=gf(n.commands[0])?0:1,i=t.segments.length-1+r;return KU(t,i,n.numberOfDoubleDots)}function KU(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new ne(4005,!1);i=r.segments.length}return new ua(r,!1,i-o)}function QU(n){return bc(n[0])?n[0].outlets:{[he]:n}}function nM(n,e,t){if(n??=new Pe([],{}),n.segments.length===0&&n.hasChildren())return Ic(n,e,t);let r=YU(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Pe(n.segments.slice(0,r.pathIndex),{});return o.children[he]=new Pe(n.segments.slice(r.pathIndex),n.children),Ic(o,0,i)}else return r.match&&i.length===0?new Pe(n.segments,{}):r.match&&!n.hasChildren()?v_(n,e,t):r.match?Ic(n,0,i):v_(n,e,t)}function Ic(n,e,t){if(t.length===0)return new Pe(n.segments,{});{let r=QU(t),i={};if(Object.keys(r).some(o=>o!==he)&&n.children[he]&&n.numberOfChildren===1&&n.children[he].segments.length===0){let o=Ic(n.children[he],e,t);return new Pe(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=nM(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Pe(n.segments,i)}}function YU(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(bc(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!LS(u,l,s))return o;r+=2}else{if(!LS(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function v_(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(bc(o)){let u=ZU(o.outlets);return new Pe(r,u)}if(i===0&&gf(t[0])){let u=n.segments[e];r.push(new $o(u.path,VS(t[0]))),i++;continue}let s=bc(o)?o.outlets[he]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&gf(a)?(r.push(new $o(s,VS(a))),i+=2):(r.push(new $o(s,{})),i++)}return new Pe(r,{})}function ZU(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=v_(new Pe([],{}),0,r))}),e}function VS(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function LS(n,e,t){return n==t.path&&Ar(e,t.parameters)}var Ec="imperative",Ot=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Ot||{}),$n=class{constructor(e,t){this.id=e,this.url=t}},ha=class extends $n{constructor(e,t,r="imperative",i=null){super(e,t),this.type=Ot.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Mn=class extends $n{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Ot.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Sn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Sn||{}),yf=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(yf||{}),Ui=class extends $n{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Ot.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Bi=class extends $n{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Ot.NavigationSkipped}},Tc=class extends $n{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=Ot.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},vf=class extends $n{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ot.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},__=class extends $n{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ot.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},w_=class extends $n{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Ot.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},I_=class extends $n{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ot.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},E_=class extends $n{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ot.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},D_=class{constructor(e){this.route=e,this.type=Ot.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},C_=class{constructor(e){this.route=e,this.type=Ot.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},b_=class{constructor(e){this.snapshot=e,this.type=Ot.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},T_=class{constructor(e){this.snapshot=e,this.type=Ot.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},A_=class{constructor(e){this.snapshot=e,this.type=Ot.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},S_=class{constructor(e){this.snapshot=e,this.type=Ot.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_f=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=Ot.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Ac=class{},Sc=class{constructor(e){this.url=e}};var M_=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new kc,this.attachRef=null}},kc=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new M_,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),wf=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=x_(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=x_(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=R_(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return R_(e,this._root).map(t=>t.value)}};function x_(n,e){if(n===e.value)return e;for(let t of e.children){let r=x_(n,t);if(r)return r}return null}function R_(n,e){if(n===e.value)return[e];for(let t of e.children){let r=R_(n,t);if(r.length)return r.unshift(e),r}return[]}var An=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function aa(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var If=class extends wf{constructor(e,t){super(e),this.snapshot=t,B_(this,e)}toString(){return this.snapshot.toString()}};function rM(n){let e=JU(n),t=new Dt([new $o("",{})]),r=new Dt({}),i=new Dt({}),o=new Dt({}),s=new Dt(""),a=new qn(t,r,o,s,i,he,n,e.root);return a.snapshot=e.root,new If(new An(a,[]),e)}function JU(n){let e={},t={},r={},i="",o=new Mc([],e,r,i,t,he,n,null,{});return new Ef("",new An(o,[]))}var qn=class{constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(X(l=>l[Pc]))??te(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(X(e=>la(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(X(e=>la(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function U_(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:W(W({},e.params),n.params),data:W(W({},e.data),n.data),resolve:W(W(W(W({},n.data),e.data),i?.data),n._resolvedData)}:r={params:W({},n.params),data:W({},n.data),resolve:W(W({},n.data),n._resolvedData??{})},i&&oM(i)&&(r.resolve[Pc]=i.title),r}var Mc=class{get title(){return this.data?.[Pc]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=la(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=la(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Ef=class extends wf{constructor(e,t){super(t),this.url=e,B_(this,t)}toString(){return iM(this._root)}};function B_(n,e){e.value._routerState=n,e.children.forEach(t=>B_(n,t))}function iM(n){let e=n.children.length>0?` { ${n.children.map(iM).join(", ")} } `:"";return`${n.value}${e}`}function h_(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ar(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Ar(e.params,t.params)||n.paramsSubject.next(t.params),AU(e.url,t.url)||n.urlSubject.next(t.url),Ar(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function N_(n,e){let t=Ar(n.params,e.params)&&RU(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||N_(n.parent,e.parent))}function oM(n){return typeof n.title=="string"||n.title===null}var $_=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=he,this.activateEvents=new Ze,this.deactivateEvents=new Ze,this.attachEvents=new Ze,this.detachEvents=new Ze,this.parentContexts=B(kc),this.location=B(ki),this.changeDetector=B(jn),this.environmentInjector=B(Ht),this.inputBinder=B(Tf,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ne(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ne(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ne(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new ne(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new P_(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ne({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Fn]})}}return n})(),P_=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===qn?this.route:e===kc?this.childContexts:this.parent.get(e,t)}},Tf=new q(""),jS=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=qu([r.queryParams,r.params,r.data]).pipe(Ye(([o,s,a],u)=>(a=W(W(W({},o),s),a),u===0?te(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=qA(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})();function XU(n,e,t){let r=xc(n,e._root,t?t._root:void 0);return new If(r,e)}function xc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=eB(n,e,t);return new An(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>xc(n,a)),s}}let r=tB(e.value),i=e.children.map(o=>xc(n,o));return new An(r,i)}}function eB(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return xc(n,r,i);return xc(n,r)})}function tB(n){return new qn(new Dt(n.url),new Dt(n.params),new Dt(n.queryParams),new Dt(n.fragment),new Dt(n.data),n.outlet,n.component,n)}var sM="ngNavigationCancelingError";function aM(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=da(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=uM(!1,Sn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function uM(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[sM]=!0,t.cancellationCode=e,t}function nB(n){return cM(n)&&da(n.url)}function cM(n){return!!n&&n[sM]}var rB=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Je({type:n,selectors:[["ng-component"]],standalone:!0,features:[Xe],decls:1,vars:0,template:function(r,i){r&1&&ye(0,"router-outlet")},dependencies:[$_],encapsulation:2})}}return n})();function iB(n,e){return n.providers&&!n._injector&&(n._injector=Ph(n.providers,e,`Route: ${n.path}`)),n._injector??e}function q_(n){let e=n.children&&n.children.map(q_),t=e?Me(W({},n),{children:e}):W({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==he&&(t.component=rB),t}function Sr(n){return n.outlet||he}function oB(n,e){let t=n.filter(r=>Sr(r)===e);return t.push(...n.filter(r=>Sr(r)!==e)),t}function Fc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var sB=(n,e,t,r)=>X(i=>(new O_(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),O_=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),h_(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=aa(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=aa(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=aa(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=aa(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new S_(o.value.snapshot))}),e.children.length&&this.forwardEvent(new T_(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(h_(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),h_(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=Fc(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},Df=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ca=class{constructor(e,t){this.component=e,this.route=t}};function aB(n,e,t){let r=n._root,i=e?e._root:null;return _c(r,i,t,[r.value])}function uB(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function pa(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Tb(n)?n:e.get(n):r}function _c(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=aa(e);return n.children.forEach(s=>{cB(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Dc(a,t.getContext(s),i)),i}function cB(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=lB(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Df(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?_c(n,e,a?a.children:null,r,i):_c(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ca(a.outlet.component,s))}else s&&Dc(e,a,i),i.canActivateChecks.push(new Df(r)),o.component?_c(n,null,a?a.children:null,r,i):_c(n,null,t,r,i);return i}function lB(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!qo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!qo(n.url,e.url)||!Ar(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!N_(n,e)||!Ar(n.queryParams,e.queryParams);case"paramsChange":default:return!N_(n,e)}}function Dc(n,e,t){let r=aa(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Dc(s,e.children.getContext(o),t):Dc(s,null,t):Dc(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ca(e.outlet.component,i)):t.canDeactivateChecks.push(new ca(null,i)):t.canDeactivateChecks.push(new ca(null,i))}function Vc(n){return typeof n=="function"}function dB(n){return typeof n=="boolean"}function hB(n){return n&&Vc(n.canLoad)}function fB(n){return n&&Vc(n.canActivate)}function pB(n){return n&&Vc(n.canActivateChild)}function gB(n){return n&&Vc(n.canDeactivate)}function mB(n){return n&&Vc(n.canMatch)}function lM(n){return n instanceof Gr||n?.name==="EmptyError"}var df=Symbol("INITIAL_VALUE");function fa(){return Ye(n=>qu(n.map(e=>e.pipe(Kr(1),Ti(df)))).pipe(X(e=>{for(let t of e)if(t!==!0){if(t===df)return df;if(t===!1||t instanceof ji)return t}return!0}),pt(e=>e!==df),Kr(1)))}function yB(n,e){return ft(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?te(Me(W({},t),{guardsResult:!0})):vB(s,r,i,n).pipe(ft(a=>a&&dB(a)?_B(r,o,n,e):te(a)),X(a=>Me(W({},t),{guardsResult:a})))})}function vB(n,e,t,r){return _e(n).pipe(ft(i=>CB(i.component,i.route,t,e,r)),Pn(i=>i!==!0,!0))}function _B(n,e,t,r){return _e(e).pipe(Wr(i=>ks(IB(i.route.parent,r),wB(i.route,r),DB(n,i.path,t),EB(n,i.route,t))),Pn(i=>i!==!0,!0))}function wB(n,e){return n!==null&&e&&e(new A_(n)),te(!0)}function IB(n,e){return n!==null&&e&&e(new b_(n)),te(!0)}function EB(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return te(!0);let i=r.map(o=>Od(()=>{let s=Fc(e)??t,a=pa(o,s),u=fB(a)?a.canActivate(e,n):nr(s,()=>a(e,n));return qi(u).pipe(Pn())}));return te(i).pipe(fa())}function DB(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>uB(s)).filter(s=>s!==null).map(s=>Od(()=>{let a=s.guards.map(u=>{let l=Fc(s.node)??t,d=pa(u,l),f=pB(d)?d.canActivateChild(r,n):nr(l,()=>d(r,n));return qi(f).pipe(Pn())});return te(a).pipe(fa())}));return te(o).pipe(fa())}function CB(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return te(!0);let s=o.map(a=>{let u=Fc(e)??i,l=pa(a,u),d=gB(l)?l.canDeactivate(n,e,t,r):nr(u,()=>l(n,e,t,r));return qi(d).pipe(Pn())});return te(s).pipe(fa())}function bB(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return te(!0);let o=i.map(s=>{let a=pa(s,n),u=hB(a)?a.canLoad(e,t):nr(n,()=>a(e,t));return qi(u)});return te(o).pipe(fa(),dM(r))}function dM(n){return pd(gt(e=>{if(da(e))throw aM(n,e)}),X(e=>e===!0))}function TB(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return te(!0);let o=i.map(s=>{let a=pa(s,n),u=mB(a)?a.canMatch(e,t):nr(n,()=>a(e,t));return qi(u)});return te(o).pipe(fa(),dM(r))}var Rc=class{constructor(e){this.segmentGroup=e||null}},Cf=class extends Error{constructor(e){super(),this.urlTree=e}};function sa(n){return Os(new Rc(n))}function AB(n){return Os(new ne(4e3,!1))}function SB(n){return Os(uM(!1,Sn.GuardRejected))}var k_=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return te(r);if(i.numberOfChildren>1||!i.children[he])return AB(e.redirectTo);i=i.children[he]}}applyRedirectCommands(e,t,r){let i=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t.startsWith("/"))throw new Cf(i);return i}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new ji(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Pe(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new ne(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},F_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function MB(n,e,t,r,i){let o=H_(n,e,t);return o.matched?(r=iB(e,r),TB(r,e,t,i).pipe(X(s=>s===!0?o:W({},F_)))):te(o)}function H_(n,e,t){if(e.path==="**")return xB(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?W({},F_):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||TU)(t,n,e);if(!i)return W({},F_);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?W(W({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function xB(n){return{matched:!0,parameters:n.length>0?HS(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function US(n,e,t,r){return t.length>0&&PB(n,t,r)?{segmentGroup:new Pe(e,NB(r,new Pe(t,n.children))),slicedSegments:[]}:t.length===0&&OB(n,t,r)?{segmentGroup:new Pe(n.segments,RB(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Pe(n.segments,n.children),slicedSegments:t}}function RB(n,e,t,r){let i={};for(let o of t)if(Af(n,e,o)&&!r[Sr(o)]){let s=new Pe([],{});i[Sr(o)]=s}return W(W({},r),i)}function NB(n,e){let t={};t[he]=e;for(let r of n)if(r.path===""&&Sr(r)!==he){let i=new Pe([],{});t[Sr(r)]=i}return t}function PB(n,e,t){return t.some(r=>Af(n,e,r)&&Sr(r)!==he)}function OB(n,e,t){return t.some(r=>Af(n,e,r))}function Af(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function kB(n,e,t,r){return Sr(n)!==r&&(r===he||!Af(e,t,n))?!1:H_(e,n,t).matched}function FB(n,e,t){return e.length===0&&!n.children[t]}var V_=class{};function VB(n,e,t,r,i,o,s="emptyOnly"){return new L_(n,e,t,r,i,s,o).recognize()}var LB=31,L_=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new k_(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ne(4002,`'${e.segmentGroup}'`)}recognize(){let e=US(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(X(t=>{let r=new Mc([],Object.freeze({}),Object.freeze(W({},this.urlTree.queryParams)),this.urlTree.fragment,{},he,this.rootComponentType,null,{}),i=new An(r,t),o=new Ef("",i),s=zU(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,he).pipe(Ei(r=>{if(r instanceof Cf)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Rc?this.noMatchError(r):r}))}inheritParamsAndData(e,t){let r=e.value,i=U_(r,t,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,t,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0).pipe(X(o=>o instanceof An?[o]:[]))}processChildren(e,t,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return _e(i).pipe(Wr(o=>{let s=r.children[o],a=oB(t,o);return this.processSegmentGroup(e,a,s,o)}),bi((o,s)=>(o.push(...s),o)),Di(null),Dm(),ft(o=>{if(o===null)return sa(r);let s=hM(o);return jB(s),te(s)}))}processSegment(e,t,r,i,o,s){return _e(t).pipe(Wr(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,o,s).pipe(Ei(u=>{if(u instanceof Rc)return te(null);throw u}))),Pn(a=>!!a),Ei(a=>{if(lM(a))return FB(r,i,o)?te(new V_):sa(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,o,s,a){return kB(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s):sa(i):sa(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s){let{matched:a,consumedSegments:u,positionalParamSegments:l,remainingSegments:d}=H_(t,i,o);if(!a)return sa(t);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>LB&&(this.allowRedirects=!1));let f=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,f).pipe(ft(g=>this.processSegment(e,r,t,g.concat(d),s,!1)))}matchSegmentAgainstRoute(e,t,r,i,o){let s=MB(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),s.pipe(Ye(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ye(({routes:u})=>{let l=r._loadedInjector??e,{consumedSegments:d,remainingSegments:f,parameters:g}=a,y=new Mc(d,g,Object.freeze(W({},this.urlTree.queryParams)),this.urlTree.fragment,BB(r),Sr(r),r.component??r._loadedComponent??null,r,$B(r)),{segmentGroup:D,slicedSegments:C}=US(t,d,f,u);if(C.length===0&&D.hasChildren())return this.processChildren(l,u,D).pipe(X(V=>V===null?null:new An(y,V)));if(u.length===0&&C.length===0)return te(new An(y,[]));let A=Sr(r)===o;return this.processSegment(l,u,D,C,A?he:o,!0).pipe(X(V=>new An(y,V instanceof An?[V]:[])))}))):sa(t)))}getChildConfig(e,t,r){return t.children?te({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?te({routes:t._loadedRoutes,injector:t._loadedInjector}):bB(e,t,r,this.urlSerializer).pipe(ft(i=>i?this.configLoader.loadChildren(e,t).pipe(gt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):SB(t))):te({routes:[],injector:e})}};function jB(n){n.sort((e,t)=>e.value.outlet===he?-1:t.value.outlet===he?1:e.value.outlet.localeCompare(t.value.outlet))}function UB(n){let e=n.value.routeConfig;return e&&e.path===""}function hM(n){let e=[],t=new Set;for(let r of n){if(!UB(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=hM(r.children);e.push(new An(r.value,i))}return e.filter(r=>!t.has(r))}function BB(n){return n.data||{}}function $B(n){return n.resolve||{}}function qB(n,e,t,r,i,o){return ft(s=>VB(n,e,t,r,s.extractedUrl,i,o).pipe(X(({state:a,tree:u})=>Me(W({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function HB(n,e){return ft(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return te(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of fM(u))s.add(l);let a=0;return _e(s).pipe(Wr(u=>o.has(u)?zB(u,r,n,e):(u.data=U_(u,u.parent,n).resolve,te(void 0))),gt(()=>a++),Fs(1),ft(u=>a===s.size?te(t):en))})}function fM(n){let e=n.children.map(t=>fM(t)).flat();return[n,...e]}function zB(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!oM(i)&&(o[Pc]=i.title),GB(o,n,e,r).pipe(X(s=>(n._resolvedData=s,n.data=U_(n,n.parent,t).resolve,null)))}function GB(n,e,t,r){let i=g_(n);if(i.length===0)return te({});let o={};return _e(i).pipe(ft(s=>WB(n[s],e,t,r).pipe(Pn(),gt(a=>{o[s]=a}))),Fs(1),Em(o),Ei(s=>lM(s)?en:Os(s)))}function WB(n,e,t,r){let i=Fc(e)??r,o=pa(n,i),s=o.resolve?o.resolve(e,t):nr(i,()=>o(e,t));return qi(s)}function f_(n){return Ye(e=>{let t=n(e);return t?_e(t).pipe(X(()=>e)):te(e)})}var pM=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===he);return r}getResolvedTitleForRoute(t){return t.data[Pc]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:()=>B(KB),providedIn:"root"})}}return n})(),KB=(()=>{class n extends pM{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(j(OS))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Lc=new q("",{providedIn:"root",factory:()=>({})}),Nc=new q(""),z_=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=B(Uh)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return te(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=qi(t.loadComponent()).pipe(X(gM),gt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Ci(()=>{this.componentLoaders.delete(t)})),i=new xs(r,()=>new ot).pipe(Ms());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return te({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=QB(r,this.compiler,t,this.onLoadEndListener).pipe(Ci(()=>{this.childrenLoaders.delete(r)})),s=new xs(o,()=>new ot).pipe(Ms());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function QB(n,e,t,r){return qi(n.loadChildren()).pipe(X(gM),ft(i=>i instanceof Xu||Array.isArray(i)?te(i):_e(e.compileModuleAsync(i))),X(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Nc,[],{optional:!0,self:!0}).flat()),{routes:s.map(q_),injector:o}}))}function YB(n){return n&&typeof n=="object"&&"default"in n}function gM(n){return YB(n)?n.default:n}var G_=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:()=>B(ZB),providedIn:"root"})}}return n})(),ZB=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),mM=new q(""),yM=new q("");function JB(n,e,t){let r=n.get(yM),i=n.get(Vt);return n.get(Ee).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),XB(n))),{onViewTransitionCreated:u}=r;return u&&nr(n,()=>u({transition:a,from:e,to:t})),s})}function XB(n){return new Promise(e=>{Rh(e,{injector:n})})}var W_=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ot,this.transitionAbortSubject=new ot,this.configLoader=B(z_),this.environmentInjector=B(Ht),this.urlSerializer=B(Oc),this.rootContexts=B(kc),this.location=B(ia),this.inputBindingEnabled=B(Tf,{optional:!0})!==null,this.titleStrategy=B(pM),this.options=B(Lc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=B(G_),this.createViewTransition=B(mM,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>te(void 0),this.rootComponentType=null;let t=i=>this.events.next(new D_(i)),r=i=>this.events.next(new C_(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(Me(W(W({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new Dt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ec,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(pt(o=>o.id!==0),X(o=>Me(W({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Ye(o=>{let s=!1,a=!1;return te(o).pipe(Ye(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Sn.SupersededByNewNavigation),en;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?Me(W({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&d!=="reload"){let f="";return this.events.next(new Bi(u.id,this.urlSerializer.serialize(u.rawUrl),f,yf.IgnoredSameUrlNavigation)),u.resolve(null),en}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return te(u).pipe(Ye(f=>{let g=this.transitions?.getValue();return this.events.next(new ha(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),g!==this.transitions?.getValue()?en:Promise.resolve(f)}),qB(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),gt(f=>{o.targetSnapshot=f.targetSnapshot,o.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=Me(W({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let g=new vf(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:f,extractedUrl:g,source:y,restoredState:D,extras:C}=u,A=new ha(f,this.urlSerializer.serialize(g),y,D);this.events.next(A);let V=rM(this.rootComponentType).snapshot;return this.currentTransition=o=Me(W({},u),{targetSnapshot:V,urlAfterRedirects:g,extras:Me(W({},C),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,te(o)}else{let f="";return this.events.next(new Bi(u.id,this.urlSerializer.serialize(u.extractedUrl),f,yf.IgnoredByUrlHandlingStrategy)),u.resolve(null),en}}),gt(u=>{let l=new __(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),X(u=>(this.currentTransition=o=Me(W({},u),{guards:aB(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),yB(this.environmentInjector,u=>this.events.next(u)),gt(u=>{if(o.guardsResult=u.guardsResult,da(u.guardsResult))throw aM(this.urlSerializer,u.guardsResult);let l=new w_(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),pt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Sn.GuardRejected),!1)),f_(u=>{if(u.guards.canActivateChecks.length)return te(u).pipe(gt(l=>{let d=new I_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),Ye(l=>{let d=!1;return te(l).pipe(HB(this.paramsInheritanceStrategy,this.environmentInjector),gt({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",Sn.NoDataFromResolver)}}))}),gt(l=>{let d=new E_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),f_(u=>{let l=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(gt(g=>{d.component=g}),X(()=>{})));for(let g of d.children)f.push(...l(g));return f};return qu(l(u.targetSnapshot.root)).pipe(Di(null),Kr(1))}),f_(()=>this.afterPreactivation()),Ye(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,d=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return d?_e(d).pipe(X(()=>o)):te(o)}),X(u=>{let l=XU(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=Me(W({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),gt(()=>{this.events.next(new Ac)}),sB(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Kr(1),gt({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Mn(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),bm(this.transitionAbortSubject.pipe(gt(u=>{throw u}))),Ci(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Sn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ei(u=>{if(a=!0,cM(u))this.events.next(new Ui(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),nB(u)?this.events.next(new Sc(u.url)):o.resolve(!1);else{this.events.next(new Tc(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0));try{o.resolve(t.errorHandler(u))}catch(l){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(l)}}return en}))}))}cancelNavigationTransition(t,r,i){let o=new Ui(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function e$(n){return n!==Ec}var t$=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:()=>B(n$),providedIn:"root"})}}return n})(),j_=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},n$=(()=>{class n extends j_{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Er(n)))(i||n)}})()}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),vM=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:()=>B(r$),providedIn:"root"})}}return n})(),r$=(()=>{class n extends vM{constructor(){super(...arguments),this.location=B(ia),this.urlSerializer=B(Oc),this.options=B(Lc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=B(G_),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ji,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=rM(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof ha)this.stateMemento=this.createStateMemento();else if(t instanceof Bi)this.rawUrlTree=r.initialUrl;else if(t instanceof vf){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(i,r)}}else t instanceof Ac?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):t instanceof Ui&&(t.code===Sn.GuardRejected||t.code===Sn.NoDataFromResolver)?this.restoreHistory(r):t instanceof Tc?this.restoreHistory(r,!0):t instanceof Mn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=W(W({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=W(W({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Er(n)))(i||n)}})()}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),wc=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(wc||{});function _M(n,e){n.events.pipe(pt(t=>t instanceof Mn||t instanceof Ui||t instanceof Tc||t instanceof Bi),X(t=>t instanceof Mn||t instanceof Bi?wc.COMPLETE:(t instanceof Ui?t.code===Sn.Redirect||t.code===Sn.SupersededByNewNavigation:!1)?wc.REDIRECTING:wc.FAILED),pt(t=>t!==wc.REDIRECTING),Kr(1)).subscribe(()=>{e()})}function i$(n){throw n}var o$={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},s$={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},He=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=B(Lh),this.stateManager=B(vM),this.options=B(Lc,{optional:!0})||{},this.pendingTasks=B(Uo),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=B(W_),this.urlSerializer=B(Oc),this.location=B(ia),this.urlHandlingStrategy=B(G_),this._events=new ot,this.errorHandler=this.options.errorHandler||i$,this.navigated=!1,this.routeReuseStrategy=B(t$),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=B(Nc,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!B(Tf,{optional:!0}),this.eventsSubscription=new ut,this.isNgZoneEnabled=B(Ee)instanceof Ee&&Ee.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Ui&&r.code!==Sn.Redirect&&r.code!==Sn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Mn)this.navigated=!0;else if(r instanceof Sc){let s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),a={info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||e$(i.source)};this.scheduleNavigation(s,Ec,null,a,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}u$(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ec,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=W({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(q_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,d=null;switch(a){case"merge":d=W(W({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let g=i?i.snapshot:this.routerState.snapshot.root;f=XS(g)}catch{(typeof t[0]!="string"||!t[0].startsWith("/"))&&(t=[]),f=this.currentUrlTree.root}return eM(f,t,d,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=da(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Ec,null,r)}navigate(t,r={skipLocationChange:!1}){return a$(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=W({},o$):r===!1?i=W({},s$):i=r,da(t))return kS(this.currentUrlTree,t,i);let o=this.parseUrl(t);return kS(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((f,g)=>{a=f,u=g});let d=this.pendingTasks.add();return _M(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function a$(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ne(4008,!1)}function u$(n){return!(n instanceof Ac)&&!(n instanceof Sc)}var $i=(()=>{class n{constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new ot,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Mn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t!=null?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:jT(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(U(He),U(qn),rv("tabindex"),U(gn),U(Rt),U(ii))}}static{this.\u0275dir=Ne({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&we("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&ta("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[ke.HasDecoratorInputTransform,"preserveFragment","preserveFragment",Un],skipLocationChange:[ke.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",Un],replaceUrl:[ke.HasDecoratorInputTransform,"replaceUrl","replaceUrl",Un],routerLink:"routerLink"},standalone:!0,features:[Nh,Fn]})}}return n})(),wM=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Ze,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof Mn&&this.update()})}ngAfterContentInit(){te(this.links.changes,te(null)).pipe(pr()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=_e(t).pipe(pr()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=c$(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static{this.\u0275fac=function(r){return new(r||n)(U(He),U(Rt),U(gn),U(jn),U($i,8))}}static{this.\u0275dir=Ne({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&MA(o,$i,5),r&2){let s;xA(s=RA())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Fn]})}}return n})();function c$(n){return!!n.paths}var bf=class{};var l$=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(pt(t=>t instanceof Mn),Wr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Ph(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return _e(i).pipe(pr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=te(null);let o=i.pipe(ft(s=>s===null?te(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return _e([o,s]).pipe(pr())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(j(He),j(Uh),j(Ht),j(bf),j(z_))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),IM=new q(""),d$=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=B(Ht),s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ha?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Mn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Bi&&t.code===yf.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof _f&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>x(this,null,function*(){yield new Promise(i=>{setTimeout(()=>{i()}),Rh(()=>{i()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new _f(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){ZT()}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})();function EM(n,...e){return Pi([{provide:Nc,multi:!0,useValue:n},[],{provide:qn,useFactory:DM,deps:[He]},{provide:cc,multi:!0,useFactory:CM},e.map(t=>t.\u0275providers)])}function DM(n){return n.routerState.root}function jc(n,e){return{\u0275kind:n,\u0275providers:e}}function CM(){let n=B(Cn);return e=>{let t=n.get(na);if(e!==t.components[0])return;let r=n.get(He),i=n.get(bM);n.get(K_)===1&&r.initialNavigation(),n.get(TM,null,ve.Optional)?.setUpPreloading(),n.get(IM,null,ve.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var bM=new q("",{factory:()=>new ot}),K_=new q("",{providedIn:"root",factory:()=>1});function h$(){return jc(2,[{provide:K_,useValue:0},{provide:jh,multi:!0,deps:[Cn],useFactory:e=>{let t=e.get(eS,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(He),o=e.get(bM);_M(i,()=>{r(!0)}),e.get(W_).afterPreactivation=()=>(r(!0),o.closed?te(void 0):o),i.initialNavigation()}))}}])}function f$(){return jc(3,[{provide:jh,multi:!0,useFactory:()=>{let e=B(He);return()=>{e.setUpLocationChangeListener()}}},{provide:K_,useValue:2}])}var TM=new q("");function p$(n){return jc(0,[{provide:TM,useExisting:l$},{provide:bf,useExisting:n}])}function g$(){return jc(8,[jS,{provide:Tf,useExisting:jS}])}function m$(n){let e=[{provide:mM,useValue:JB},{provide:yM,useValue:W({skipNextTransition:!!n?.skipInitialTransition},n)}];return jc(9,e)}var BS=new q("ROUTER_FORROOT_GUARD"),y$=[ia,{provide:Oc,useClass:Cc},He,kc,{provide:qn,useFactory:DM,deps:[He]},z_,[]],AM=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[y$,[],{provide:Nc,multi:!0,useValue:t},{provide:BS,useFactory:I$,deps:[[He,new Dn,new _h]]},{provide:Lc,useValue:r||{}},r?.useHash?_$():w$(),v$(),r?.preloadingStrategy?p$(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?E$(r):[],r?.bindToComponentInputs?g$().\u0275providers:[],r?.enableViewTransitions?m$().\u0275providers:[],D$()]}}static forChild(t){return{ngModule:n,providers:[{provide:Nc,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(j(BS,8))}}static{this.\u0275mod=yt({type:n})}static{this.\u0275inj=mt({})}}return n})();function v$(){return{provide:IM,useFactory:()=>{let n=B(dS),e=B(Ee),t=B(Lc),r=B(W_),i=B(Oc);return t.scrollOffset&&n.setOffset(t.scrollOffset),new d$(i,r,n,e,t)}}}function _$(){return{provide:ii,useClass:nS}}function w$(){return{provide:ii,useClass:Wv}}function I$(n){return"guarded"}function E$(n){return[n.initialNavigation==="disabled"?f$().\u0275providers:[],n.initialNavigation==="enabledBlocking"?h$().\u0275providers:[]]}var $S=new q("");function D$(){return[{provide:$S,useFactory:CM},{provide:cc,multi:!0,useExisting:$S}]}var VM=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(U(gn),U(Rt))}}static{this.\u0275dir=Ne({type:n})}}return n})(),Hc=(()=>{class n extends VM{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Er(n)))(i||n)}})()}static{this.\u0275dir=Ne({type:n,features:[Gt]})}}return n})(),Ho=new q("");var C$={provide:Ho,useExisting:pn(()=>Hn),multi:!0};function b$(){let n=ri()?ri().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var T$=new q(""),Hn=(()=>{class n extends VM{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!b$())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(U(gn),U(Rt),U(T$,8))}}static{this.\u0275dir=Ne({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&we("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Ln([C$]),Gt]})}}return n})();function Hi(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function LM(n){return n!=null&&typeof n.length=="number"}var _a=new q(""),Ff=new q(""),A$=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,ma=class{static min(e){return jM(e)}static max(e){return S$(e)}static required(e){return UM(e)}static requiredTrue(e){return M$(e)}static email(e){return x$(e)}static minLength(e){return R$(e)}static maxLength(e){return N$(e)}static pattern(e){return P$(e)}static nullValidator(e){return Mf(e)}static compose(e){return GM(e)}static composeAsync(e){return WM(e)}};function jM(n){return e=>{if(Hi(e.value)||Hi(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function S$(n){return e=>{if(Hi(e.value)||Hi(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function UM(n){return Hi(n.value)?{required:!0}:null}function M$(n){return n.value===!0?null:{required:!0}}function x$(n){return Hi(n.value)||A$.test(n.value)?null:{email:!0}}function R$(n){return e=>Hi(e.value)||!LM(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function N$(n){return e=>LM(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function P$(n){if(!n)return Mf;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Hi(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function Mf(n){return null}function BM(n){return n!=null}function $M(n){return Vi(n)?_e(n):n}function qM(n){let e={};return n.forEach(t=>{e=t!=null?W(W({},e),t):e}),Object.keys(e).length===0?null:e}function HM(n,e){return e.map(t=>t(n))}function O$(n){return!n.validate}function zM(n){return n.map(e=>O$(e)?e:t=>e.validate(t))}function GM(n){if(!n)return null;let e=n.filter(BM);return e.length==0?null:function(t){return qM(HM(t,e))}}function J_(n){return n!=null?GM(zM(n)):null}function WM(n){if(!n)return null;let e=n.filter(BM);return e.length==0?null:function(t){let r=HM(t,e).map($M);return wm(r).pipe(X(qM))}}function X_(n){return n!=null?WM(zM(n)):null}function SM(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function KM(n){return n._rawValidators}function QM(n){return n._rawAsyncValidators}function Q_(n){return n?Array.isArray(n)?n:[n]:[]}function xf(n,e){return Array.isArray(n)?n.includes(e):n===e}function MM(n,e){let t=Q_(e);return Q_(n).forEach(i=>{xf(t,i)||t.push(i)}),t}function xM(n,e){return Q_(e).filter(t=>!xf(n,t))}var Rf=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=J_(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=X_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},si=class extends Rf{get formDirective(){return null}get path(){return null}},zi=class extends Rf{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Nf=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},k$={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},cK=Me(W({},k$),{"[class.ng-submitted]":"isSubmitted"}),xr=(()=>{class n extends Nf{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(U(zi,2))}}static{this.\u0275dir=Ne({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Oh("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Gt]})}}return n})(),wa=(()=>{class n extends Nf{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(U(si,10))}}static{this.\u0275dir=Ne({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Oh("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Gt]})}}return n})();var Uc="VALID",Sf="INVALID",ga="PENDING",Bc="DISABLED";function ew(n){return(Vf(n)?n.validators:n)||null}function F$(n){return Array.isArray(n)?J_(n):n||null}function tw(n,e){return(Vf(e)?e.asyncValidators:n)||null}function V$(n){return Array.isArray(n)?X_(n):n||null}function Vf(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function YM(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new ne(1e3,"");if(!r[t])throw new ne(1001,"")}function ZM(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new ne(1002,"")})}var ya=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Uc}get invalid(){return this.status===Sf}get pending(){return this.status==ga}get disabled(){return this.status===Bc}get enabled(){return this.status!==Bc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(MM(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(MM(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(xM(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(xM(e,this._rawAsyncValidators))}hasValidator(e){return xf(this._rawValidators,e)}hasAsyncValidator(e){return xf(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ga,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Bc,this.errors=null,this._forEachChild(r=>{r.disable(Me(W({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Me(W({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Uc,this._forEachChild(r=>{r.enable(Me(W({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Me(W({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Uc||this.status===ga)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Bc:Uc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ga,this._hasOwnPendingAsyncValidator=!0;let t=$M(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Ze,this.statusChanges=new Ze}_calculateStatus(){return this._allControlsDisabled()?Bc:this.errors?Sf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ga)?ga:this._anyControlsHaveStatus(Sf)?Sf:Uc}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Vf(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=F$(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=V$(this._rawAsyncValidators)}},va=class extends ya{constructor(e,t,r){super(ew(t),tw(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){ZM(this,!0,e),Object.keys(e).forEach(r=>{YM(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Y_=class extends va{};var Ia=new q("CallSetDisabledState",{providedIn:"root",factory:()=>zc}),zc="always";function JM(n,e){return[...e.path,n]}function Pf(n,e,t=zc){nw(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),j$(n,e),B$(n,e),U$(n,e),L$(n,e)}function RM(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),kf(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Of(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function L$(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function nw(n,e){let t=KM(n);e.validator!==null?n.setValidators(SM(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=QM(n);e.asyncValidator!==null?n.setAsyncValidators(SM(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Of(e._rawValidators,i),Of(e._rawAsyncValidators,i)}function kf(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=KM(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=QM(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return Of(e._rawValidators,r),Of(e._rawAsyncValidators,r),t}function j$(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&XM(n,e)})}function U$(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&XM(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function XM(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function B$(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function ex(n,e){n==null,nw(n,e)}function $$(n,e){return kf(n,e)}function tx(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function q$(n){return Object.getPrototypeOf(n.constructor)===Hc}function nx(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function rx(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Hn?t=o:q$(o)?r=o:i=o}),i||r||t||null}function H$(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var z$={provide:si,useExisting:pn(()=>Gc)},$c=Promise.resolve(),Gc=(()=>{class n extends si{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Ze,this.form=new va({},J_(t),X_(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){$c.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Pf(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){$c.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){$c.then(()=>{let r=this._findContainer(t.path),i=new va({});ex(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){$c.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){$c.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,nx(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(U(_a,10),U(Ff,10),U(Ia,8))}}static{this.\u0275dir=Ne({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&we("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[ke.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ln([z$]),Gt]})}}return n})();function NM(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function PM(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var qc=class extends ya{constructor(e=null,t,r){super(ew(t),tw(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Vf(t)&&(t.nonNullable||t.initialValueIsDefault)&&(PM(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){NM(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){NM(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){PM(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var G$=n=>n instanceof qc;var W$={provide:zi,useExisting:pn(()=>ai)},OM=Promise.resolve(),ai=(()=>{class n extends zi{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new qc,this._registered=!1,this.name="",this.update=new Ze,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=rx(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),tx(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Pf(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){OM.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Un(r);OM.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?JM(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(U(si,9),U(_a,10),U(Ff,10),U(Ho,10),U(jn,8),U(Ia,8))}}static{this.\u0275dir=Ne({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[ke.None,"disabled","isDisabled"],model:[ke.None,"ngModel","model"],options:[ke.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ln([W$]),Gt,Fn]})}}return n})(),Ea=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ne({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),K$={provide:Ho,useExisting:pn(()=>Wc),multi:!0},Wc=(()=>{class n extends Hc{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Er(n)))(i||n)}})()}static{this.\u0275dir=Ne({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&we("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[Ln([K$]),Gt]})}}return n})(),Q$={provide:Ho,useExisting:pn(()=>rw),multi:!0};var Y$=(()=>{class n{constructor(){this._accessors=[]}add(t,r){this._accessors.push([t,r])}remove(t){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===t){this._accessors.splice(r,1);return}}select(t){this._accessors.forEach(r=>{this._isSameGroup(r,t)&&r[1]!==t&&r[1].fireUncheck(t.value)})}_isSameGroup(t,r){return t[0].control?t[0]._parent===r._control._parent&&t[1].name===r.name:!1}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),rw=(()=>{class n extends Hc{constructor(t,r,i,o){super(t,r),this._registry=i,this._injector=o,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=B(Ia,{optional:!0})??zc}ngOnInit(){this._control=this._injector.get(zi),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}setDisabledState(t){(this.setDisabledStateFired||t||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",t),this.setDisabledStateFired=!0}fireUncheck(t){this.writeValue(t)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}static{this.\u0275fac=function(r){return new(r||n)(U(gn),U(Rt),U(Y$),U(Cn))}}static{this.\u0275dir=Ne({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(r,i){r&1&&we("change",function(){return i.onChange()})("blur",function(){return i.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[Ln([Q$]),Gt]})}}return n})();var ix=new q("");var Z$={provide:si,useExisting:pn(()=>iw)},iw=(()=>{class n extends si{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Ze,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(kf(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return Pf(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){RM(t.control||null,t,!1),H$(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,nx(this.form,this.directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(RM(r||null,t),G$(i)&&(Pf(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);ex(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&$$(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){nw(this.form,this),this._oldForm&&kf(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(r){return new(r||n)(U(_a,10),U(Ff,10),U(Ia,8))}}static{this.\u0275dir=Ne({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&we("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[ke.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ln([Z$]),Gt,Fn]})}}return n})();var J$={provide:zi,useExisting:pn(()=>ow)},ow=(()=>{class n extends zi{set isDisabled(t){}static{this._ngModelWarningSentOnce=!1}constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.name=null,this.update=new Ze,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=rx(this,o)}ngOnChanges(t){this._added||this._setUpControl(),tx(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return JM(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(r){return new(r||n)(U(si,13),U(_a,10),U(Ff,10),U(Ho,10),U(ix,8))}}static{this.\u0275dir=Ne({type:n,selectors:[["","formControlName",""]],inputs:{name:[ke.None,"formControlName","name"],isDisabled:[ke.None,"disabled","isDisabled"],model:[ke.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Ln([J$]),Gt,Fn]})}}return n})(),X$={provide:Ho,useExisting:pn(()=>Lf),multi:!0};function ox(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function e4(n){return n.split(":")[0]}var Lf=(()=>{class n extends Hc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),i=ox(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=e4(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Er(n)))(i||n)}})()}static{this.\u0275dir=Ne({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&we("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ln([X$]),Gt]})}}return n})(),sx=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(ox(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(U(Rt),U(gn),U(Lf,9))}}static{this.\u0275dir=Ne({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),t4={provide:Ho,useExisting:pn(()=>ax),multi:!0};function kM(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function n4(n){return n.split(":")[0]}var ax=(()=>{class n extends Hc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let u=s[a],l=this._getOptionValue(u.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let u=s[a];if(u.selected){let l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=n4(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Er(n)))(i||n)}})()}static{this.\u0275dir=Ne({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&we("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ln([t4]),Gt]})}}return n})(),ux=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(kM(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(kM(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(U(Rt),U(gn),U(ax,9))}}static{this.\u0275dir=Ne({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();function r4(n){return typeof n=="number"?n:parseFloat(n)}var cx=(()=>{class n{constructor(){this._validator=Mf}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Mf,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ne({type:n,features:[Fn]})}}return n})();var i4={provide:_a,useExisting:pn(()=>sw),multi:!0},sw=(()=>{class n extends cx{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>r4(t),this.createValidator=t=>jM(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Er(n)))(i||n)}})()}static{this.\u0275dir=Ne({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&ta("min",i._enabled?i.min:null)},inputs:{min:"min"},features:[Ln([i4]),Gt]})}}return n})(),o4={provide:_a,useExisting:pn(()=>Kc),multi:!0};var Kc=(()=>{class n extends cx{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Un,this.createValidator=t=>UM}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Er(n)))(i||n)}})()}static{this.\u0275dir=Ne({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&ta("required",i._enabled?"":null)},inputs:{required:"required"},features:[Ln([o4]),Gt]})}}return n})();var lx=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=yt({type:n})}static{this.\u0275inj=mt({})}}return n})(),Z_=class extends ya{constructor(e,t,r){super(ew(t),tw(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){ZM(this,!1,e),e.forEach((r,i)=>{YM(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function FM(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var dx=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return FM(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new va(i,o)}record(t,r=null){let i=this._reduceControls(t);return new Y_(i,r)}control(t,r,i){let o={};return this.useNonNullable?(FM(r)?o=r:(o.validators=r,o.asyncValidators=i),new qc(t,Me(W({},o),{nonNullable:!0}))):new qc(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new Z_(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof qc)return t;if(t instanceof ya)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var yn=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Ia,useValue:t.callSetDisabledState??zc}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=yt({type:n})}static{this.\u0275inj=mt({imports:[lx]})}}return n})(),hx=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:ix,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Ia,useValue:t.callSetDisabledState??zc}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=yt({type:n})}static{this.\u0275inj=mt({imports:[lx]})}}return n})();var s4="firebase",a4="10.14.1";dn(s4,a4,"app");var zn=new Yr("ANGULARFIRE2_VERSION");function fx(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var uw=(n,e)=>{let t=e?[e]:ud(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Gi=class{constructor(){return uw(u4)}},u4="app-check";function Da(){}var jf=class{zone;delegate;constructor(e,t=ym){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},aw=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Da,{},Da,Da)),t.pipe(gt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Ca=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new jf(Zone.current)),this.insideAngular=t.run(()=>new jf(Zone.current,$u)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(j(Ee))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Uf(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function c4(n){return Uf().ngZone.runOutsideAngular(()=>n())}function zo(n){return Uf().ngZone.run(()=>n())}function an(n){return l4(Uf())(n)}function l4(n){return function(t){return t=t.lift(new aw(n.ngZone)),t.pipe(Nn(n.outsideAngular),In(n.insideAngular))}}var d4=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),zo(()=>n.apply(void 0,r))},ui=(n,e)=>function(){let t,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(t||=zo(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Da,{},Da,Da))),r[o]=d4(r[o],t));let i=c4(()=>n.apply(this,r));if(!e)if(i instanceof ce){let o=Uf();return i.pipe(Nn(o.outsideAngular),In(o.insideAngular))}else return zo(()=>i);return i instanceof ce?i.pipe(an):i instanceof Promise?zo(()=>new Promise((o,s)=>i.then(a=>zo(()=>o(a)),a=>zo(()=>s(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:zo(()=>i)};var ba=class{constructor(e){return e}},Ta=class{constructor(){return ud()}};function h4(n){return n&&n.length===1?n[0]:new ba(ad())}var gx=new q("angularfire2._apps"),f4={provide:ba,useFactory:h4,deps:[[new Dn,gx]]},p4={provide:Ta,deps:[[new Dn,gx]]};var mx=(()=>{class n{constructor(t){dn("angularfire",zn.full,"core"),dn("angularfire",zn.full,"app"),dn("angular",Vh.full,t.toString())}static \u0275fac=function(r){return new(r||n)(j(bt))};static \u0275mod=yt({type:n});static \u0275inj=mt({providers:[f4,p4]})}return n})();var m4=new Map,y4={activated:!1,tokenObservers:[]},v4={initialized:!1,enabled:!1};function sr(n){return m4.get(n)||Object.assign({},y4)}function Ix(){return v4}var _4="https://content-firebaseappcheck.googleapis.com/v1";var w4="exchangeDebugToken",yx={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},jK=24*60*60*1e3;var lw=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return x(this,null,function*(){this.stop();try{this.pending=new em,this.pending.promise.catch(t=>{}),yield I4(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new em,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function I4(n){return new Promise(e=>{setTimeout(e,n)})}var E4={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Wi=new cC("appCheck","AppCheck",E4);function Ex(n){if(!sr(n).activated)throw Wi.create("use-before-activation",{appName:n.name})}function Dx(r,i){return x(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(y){throw Wi.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw Wi.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw Wi.create("fetch-parse-error",{originalErrorMessage:y?.message})}let d=l.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw Wi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let f=Number(d[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+f,issuedAtTimeMillis:g}})}function Cx(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${_4}/projects/${t}/apps/${r}:${w4}?key=${i}`,body:{debug_token:e}}}var D4="firebase-app-check-database",C4=1,dw="firebase-app-check-store";var Bf=null;function b4(){return Bf||(Bf=new Promise((n,e)=>{try{let t=indexedDB.open(D4,C4);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Wi.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(dw,{keyPath:"compositeKey"})}}}catch(t){e(Wi.create("storage-open",{originalErrorMessage:t?.message}))}}),Bf)}function T4(n,e){return A4(S4(n),e)}function A4(n,e){return x(this,null,function*(){let r=(yield b4()).transaction(dw,"readwrite"),o=r.objectStore(dw).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(Wi.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function S4(n){return`${n.options.appId}-${n.name}`}var hw=new sd("@firebase/app-check");function cw(n,e){return od()?T4(n,e).catch(t=>{hw.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function bx(){return Ix().enabled}function Tx(){return x(this,null,function*(){let n=Ix();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var M4={error:"UNKNOWN_ERROR"};function x4(n){return sC.encodeString(JSON.stringify(n),!1)}function fw(n,e=!1){return x(this,null,function*(){let t=n.app;Ex(t);let r=sr(t),i=r.token,o;if(i&&!Yc(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&(Yc(u)?i=u:yield cw(t,void 0))}if(!e&&i&&Yc(i))return{token:i.token};let s=!1;if(bx()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Dx(Cx(t,yield Tx()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let u=yield r.exchangeTokenPromise;return yield cw(t,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield sr(t).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?hw.warn(u.message):hw.error(u),o=u}let a;return i?o?Yc(i)?a={token:i.token,internalError:o}:a=_x(o):(a={token:i.token},r.token=i,yield cw(t,i)):a=_x(o),s&&O4(t,a),a})}function R4(n){return x(this,null,function*(){let e=n.app;Ex(e);let{provider:t}=sr(e);if(bx()){let r=yield Tx(),{token:i}=yield Dx(Cx(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function N4(n,e,t,r){let{app:i}=n,o=sr(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Yc(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),vx(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>vx(n))}function Ax(n,e){let t=sr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function vx(n){let{app:e}=n,t=sr(e),r=t.tokenRefresher;r||(r=P4(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function P4(n){let{app:e}=n;return new lw(()=>x(this,null,function*(){let t=sr(e),r;if(t.token?r=yield fw(n,!0):r=yield fw(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=sr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},yx.RETRIAL_MIN_WAIT,yx.RETRIAL_MAX_WAIT)}function O4(n,e){let t=sr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Yc(n){return n.expireTimeMillis-Date.now()>0}function _x(n){return{token:x4(M4),error:n}}var pw=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=sr(this.app);for(let t of e)Ax(this.app,t.next);return Promise.resolve()}};function k4(n,e){return new pw(n,e)}function F4(n){return{getToken:e=>fw(n,e),getLimitedUseToken:()=>R4(n),addTokenListener:e=>N4(n,"INTERNAL",e),removeTokenListener:e=>Ax(n.app,e)}}var V4="@firebase/app-check",L4="0.8.8";var j4="app-check",wx="app-check-internal";function U4(){Lu(new Io(j4,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return k4(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(wx).initialize()})),Lu(new Io(wx,n=>{let e=n.getProvider("app-check").getImmediate();return F4(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),dn(V4,L4)}U4();var B4=["localhost","0.0.0.0","127.0.0.1"],ZK=typeof window<"u"&&B4.includes(window.location.hostname);var $4="firebase",q4="10.14.1";Jt.registerVersion($4,q4,"app-compat");var H4=["ngOnDestroy"],xx=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(H4.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let u=a?.[o];return typeof u=="function"?u.bind(a):u?.then?u.then(l=>t.run(()=>l)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,l)=>s.then(d=>{let f=d?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,f),f})})})});var $f=class{constructor(e){return e}},Aa=new q("angularfire2.app.options"),Sa=new q("angularfire2.app.name");function Zc(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=Jt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Jt.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;z4("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new $f(s)}var z4=(n,...e)=>{Sv()&&typeof console<"u"&&console[n](...e)},G4={provide:$f,useFactory:Zc,deps:[Aa,Ee,[new Dn,Sa]]},Rx=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:Aa,useValue:t},{provide:Sa,useValue:r}]}}constructor(t){Jt.registerVersion("angularfire",zn.full,"core"),Jt.registerVersion("angularfire",zn.full,"app-compat"),Jt.registerVersion("angular",Vh.full,t.toString())}static \u0275fac=function(r){return new(r||n)(j(bt))};static \u0275mod=yt({type:n});static \u0275inj=mt({providers:[G4]})}return n})();function qf(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return W4(i,s)||(Mx("error",`${e} was already initialized on the ${t} Firebase App with different settings.${K4?" You may need to reload as Firebase is not HMR aware.":""}`),Mx("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function W4(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var K4=typeof module<"u"&&!!module.hot,Mx=(n,...e)=>{Sv()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var gw=new q("angularfire2.auth.use-emulator"),mw=new q("angularfire2.auth.settings"),yw=new q("angularfire2.auth.tenant-id"),vw=new q("angularfire2.auth.langugage-code"),_w=new q("angularfire2.auth.use-device-language"),ww=new q("angularfire.auth.persistence"),Iw=(n,e,t,r,i,o,s,a)=>qf(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(let[l,d]of Object.entries(s))u.settings[l]=d;return a&&u.setPersistence(a),u},[t,r,i,o,s,a]),Go=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,u,l,d,f,g,y){let D=new ot,C=te(void 0).pipe(In(s.outsideAngular),Ye(()=>o.runOutsideAngular(()=>import("./chunk-YAEFFBZE.js"))),X(()=>Zc(t,o,r)),X(A=>Iw(A,o,a,l,d,f,u,g)),Vd({bufferSize:1,refCount:!1}));if(oi(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=te(null);else{C.pipe(Pn()).subscribe();let A=C.pipe(Ye(k=>k.getRedirectResult().then(J=>J,()=>null)),an,Vd({bufferSize:1,refCount:!1})),V=C.pipe(Ye(k=>new ce(J=>({unsubscribe:o.runOutsideAngular(()=>k.onAuthStateChanged(oe=>J.next(oe),oe=>J.error(oe),()=>J.complete()))})))),G=C.pipe(Ye(k=>new ce(J=>({unsubscribe:o.runOutsideAngular(()=>k.onIdTokenChanged(oe=>J.next(oe),oe=>J.error(oe),()=>J.complete()))}))));this.authState=A.pipe(Ld(V),Nn(s.outsideAngular),In(s.insideAngular)),this.user=A.pipe(Ld(G),Nn(s.outsideAngular),In(s.insideAngular)),this.idToken=this.user.pipe(Ye(k=>k?_e(k.getIdToken()):te(null))),this.idTokenResult=this.user.pipe(Ye(k=>k?_e(k.getIdTokenResult()):te(null))),this.credential=Im(A,D,this.authState.pipe(pt(k=>!k))).pipe(X(k=>k?.user?k:null),Nn(s.outsideAngular),In(s.insideAngular))}return xx(this,C,o,{spy:{apply:(A,V,G)=>{(A.startsWith("signIn")||A.startsWith("createUser"))&&G.then(k=>D.next(k))}}})}static \u0275fac=function(r){return new(r||n)(j(Aa),j(Sa,8),j(bt),j(Ee),j(Ca),j(gw,8),j(mw,8),j(yw,8),j(vw,8),j(_w,8),j(ww,8),j(Gi,8))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Nx=(()=>{class n{constructor(){Jt.registerVersion("angularfire",zn.full,"auth-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=yt({type:n});static \u0275inj=mt({providers:[Go]})}return n})();var Ox=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},kx={};var Ki,Ew;(function(){var n;function e(I,v){function w(){}w.prototype=v.prototype,I.D=v.prototype,I.prototype=new w,I.prototype.constructor=I,I.C=function(E,b,S){for(var _=Array(arguments.length-2),$r=2;$r<arguments.length;$r++)_[$r-2]=arguments[$r];return v.prototype[b].apply(E,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,v,w){w||(w=0);var E=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)E[b]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(b=0;16>b;++b)E[b]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=I.g[0],w=I.g[1],b=I.g[2];var S=I.g[3],_=v+(S^w&(b^S))+E[0]+3614090360&4294967295;v=w+(_<<7&4294967295|_>>>25),_=S+(b^v&(w^b))+E[1]+3905402710&4294967295,S=v+(_<<12&4294967295|_>>>20),_=b+(w^S&(v^w))+E[2]+606105819&4294967295,b=S+(_<<17&4294967295|_>>>15),_=w+(v^b&(S^v))+E[3]+3250441966&4294967295,w=b+(_<<22&4294967295|_>>>10),_=v+(S^w&(b^S))+E[4]+4118548399&4294967295,v=w+(_<<7&4294967295|_>>>25),_=S+(b^v&(w^b))+E[5]+1200080426&4294967295,S=v+(_<<12&4294967295|_>>>20),_=b+(w^S&(v^w))+E[6]+2821735955&4294967295,b=S+(_<<17&4294967295|_>>>15),_=w+(v^b&(S^v))+E[7]+4249261313&4294967295,w=b+(_<<22&4294967295|_>>>10),_=v+(S^w&(b^S))+E[8]+1770035416&4294967295,v=w+(_<<7&4294967295|_>>>25),_=S+(b^v&(w^b))+E[9]+2336552879&4294967295,S=v+(_<<12&4294967295|_>>>20),_=b+(w^S&(v^w))+E[10]+4294925233&4294967295,b=S+(_<<17&4294967295|_>>>15),_=w+(v^b&(S^v))+E[11]+2304563134&4294967295,w=b+(_<<22&4294967295|_>>>10),_=v+(S^w&(b^S))+E[12]+1804603682&4294967295,v=w+(_<<7&4294967295|_>>>25),_=S+(b^v&(w^b))+E[13]+4254626195&4294967295,S=v+(_<<12&4294967295|_>>>20),_=b+(w^S&(v^w))+E[14]+2792965006&4294967295,b=S+(_<<17&4294967295|_>>>15),_=w+(v^b&(S^v))+E[15]+1236535329&4294967295,w=b+(_<<22&4294967295|_>>>10),_=v+(b^S&(w^b))+E[1]+4129170786&4294967295,v=w+(_<<5&4294967295|_>>>27),_=S+(w^b&(v^w))+E[6]+3225465664&4294967295,S=v+(_<<9&4294967295|_>>>23),_=b+(v^w&(S^v))+E[11]+643717713&4294967295,b=S+(_<<14&4294967295|_>>>18),_=w+(S^v&(b^S))+E[0]+3921069994&4294967295,w=b+(_<<20&4294967295|_>>>12),_=v+(b^S&(w^b))+E[5]+3593408605&4294967295,v=w+(_<<5&4294967295|_>>>27),_=S+(w^b&(v^w))+E[10]+38016083&4294967295,S=v+(_<<9&4294967295|_>>>23),_=b+(v^w&(S^v))+E[15]+3634488961&4294967295,b=S+(_<<14&4294967295|_>>>18),_=w+(S^v&(b^S))+E[4]+3889429448&4294967295,w=b+(_<<20&4294967295|_>>>12),_=v+(b^S&(w^b))+E[9]+568446438&4294967295,v=w+(_<<5&4294967295|_>>>27),_=S+(w^b&(v^w))+E[14]+3275163606&4294967295,S=v+(_<<9&4294967295|_>>>23),_=b+(v^w&(S^v))+E[3]+4107603335&4294967295,b=S+(_<<14&4294967295|_>>>18),_=w+(S^v&(b^S))+E[8]+1163531501&4294967295,w=b+(_<<20&4294967295|_>>>12),_=v+(b^S&(w^b))+E[13]+2850285829&4294967295,v=w+(_<<5&4294967295|_>>>27),_=S+(w^b&(v^w))+E[2]+4243563512&4294967295,S=v+(_<<9&4294967295|_>>>23),_=b+(v^w&(S^v))+E[7]+1735328473&4294967295,b=S+(_<<14&4294967295|_>>>18),_=w+(S^v&(b^S))+E[12]+2368359562&4294967295,w=b+(_<<20&4294967295|_>>>12),_=v+(w^b^S)+E[5]+4294588738&4294967295,v=w+(_<<4&4294967295|_>>>28),_=S+(v^w^b)+E[8]+2272392833&4294967295,S=v+(_<<11&4294967295|_>>>21),_=b+(S^v^w)+E[11]+1839030562&4294967295,b=S+(_<<16&4294967295|_>>>16),_=w+(b^S^v)+E[14]+4259657740&4294967295,w=b+(_<<23&4294967295|_>>>9),_=v+(w^b^S)+E[1]+2763975236&4294967295,v=w+(_<<4&4294967295|_>>>28),_=S+(v^w^b)+E[4]+1272893353&4294967295,S=v+(_<<11&4294967295|_>>>21),_=b+(S^v^w)+E[7]+4139469664&4294967295,b=S+(_<<16&4294967295|_>>>16),_=w+(b^S^v)+E[10]+3200236656&4294967295,w=b+(_<<23&4294967295|_>>>9),_=v+(w^b^S)+E[13]+681279174&4294967295,v=w+(_<<4&4294967295|_>>>28),_=S+(v^w^b)+E[0]+3936430074&4294967295,S=v+(_<<11&4294967295|_>>>21),_=b+(S^v^w)+E[3]+3572445317&4294967295,b=S+(_<<16&4294967295|_>>>16),_=w+(b^S^v)+E[6]+76029189&4294967295,w=b+(_<<23&4294967295|_>>>9),_=v+(w^b^S)+E[9]+3654602809&4294967295,v=w+(_<<4&4294967295|_>>>28),_=S+(v^w^b)+E[12]+3873151461&4294967295,S=v+(_<<11&4294967295|_>>>21),_=b+(S^v^w)+E[15]+530742520&4294967295,b=S+(_<<16&4294967295|_>>>16),_=w+(b^S^v)+E[2]+3299628645&4294967295,w=b+(_<<23&4294967295|_>>>9),_=v+(b^(w|~S))+E[0]+4096336452&4294967295,v=w+(_<<6&4294967295|_>>>26),_=S+(w^(v|~b))+E[7]+1126891415&4294967295,S=v+(_<<10&4294967295|_>>>22),_=b+(v^(S|~w))+E[14]+2878612391&4294967295,b=S+(_<<15&4294967295|_>>>17),_=w+(S^(b|~v))+E[5]+4237533241&4294967295,w=b+(_<<21&4294967295|_>>>11),_=v+(b^(w|~S))+E[12]+1700485571&4294967295,v=w+(_<<6&4294967295|_>>>26),_=S+(w^(v|~b))+E[3]+2399980690&4294967295,S=v+(_<<10&4294967295|_>>>22),_=b+(v^(S|~w))+E[10]+4293915773&4294967295,b=S+(_<<15&4294967295|_>>>17),_=w+(S^(b|~v))+E[1]+2240044497&4294967295,w=b+(_<<21&4294967295|_>>>11),_=v+(b^(w|~S))+E[8]+1873313359&4294967295,v=w+(_<<6&4294967295|_>>>26),_=S+(w^(v|~b))+E[15]+4264355552&4294967295,S=v+(_<<10&4294967295|_>>>22),_=b+(v^(S|~w))+E[6]+2734768916&4294967295,b=S+(_<<15&4294967295|_>>>17),_=w+(S^(b|~v))+E[13]+1309151649&4294967295,w=b+(_<<21&4294967295|_>>>11),_=v+(b^(w|~S))+E[4]+4149444226&4294967295,v=w+(_<<6&4294967295|_>>>26),_=S+(w^(v|~b))+E[11]+3174756917&4294967295,S=v+(_<<10&4294967295|_>>>22),_=b+(v^(S|~w))+E[2]+718787259&4294967295,b=S+(_<<15&4294967295|_>>>17),_=w+(S^(b|~v))+E[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(b+(_<<21&4294967295|_>>>11))&4294967295,I.g[2]=I.g[2]+b&4294967295,I.g[3]=I.g[3]+S&4294967295}r.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var w=v-this.blockSize,E=this.B,b=this.h,S=0;S<v;){if(b==0)for(;S<=w;)i(this,I,S),S+=this.blockSize;if(typeof I=="string"){for(;S<v;)if(E[b++]=I.charCodeAt(S++),b==this.blockSize){i(this,E),b=0;break}}else for(;S<v;)if(E[b++]=I[S++],b==this.blockSize){i(this,E),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var w=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=w&255,w/=256;for(this.u(I),I=Array(16),v=w=0;4>v;++v)for(var E=0;32>E;E+=8)I[w++]=this.g[v]>>>E&255;return I};function o(I,v){var w=a;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=v(I)}function s(I,v){this.h=v;for(var w=[],E=!0,b=I.length-1;0<=b;b--){var S=I[b]|0;E&&S==v||(w[b]=S,E=!1)}this.g=w}var a={};function u(I){return-128<=I&&128>I?o(I,function(v){return new s([v|0],0>v?-1:0)}):new s([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return f;if(0>I)return A(l(-I));for(var v=[],w=1,E=0;I>=w;E++)v[E]=I/w|0,w*=4294967296;return new s(v,0)}function d(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return A(d(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(v,8)),E=f,b=0;b<I.length;b+=8){var S=Math.min(8,I.length-b),_=parseInt(I.substring(b,b+S),v);8>S?(S=l(Math.pow(v,S)),E=E.j(S).add(l(_))):(E=E.j(w),E=E.add(l(_)))}return E}var f=u(0),g=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(C(this))return-A(this).m();for(var I=0,v=1,w=0;w<this.g.length;w++){var E=this.i(w);I+=(0<=E?E:4294967296+E)*v,v*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(D(this))return"0";if(C(this))return"-"+A(this).toString(I);for(var v=l(Math.pow(I,6)),w=this,E="";;){var b=J(w,v).g;w=V(w,b.j(v));var S=((0<w.g.length?w.g[0]:w.h)>>>0).toString(I);if(w=b,D(w))return S+E;for(;6>S.length;)S="0"+S;E=S+E}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function D(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function C(I){return I.h==-1}n.l=function(I){return I=V(this,I),C(I)?-1:D(I)?0:1};function A(I){for(var v=I.g.length,w=[],E=0;E<v;E++)w[E]=~I.g[E];return new s(w,~I.h).add(g)}n.abs=function(){return C(this)?A(this):this},n.add=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],E=0,b=0;b<=v;b++){var S=E+(this.i(b)&65535)+(I.i(b)&65535),_=(S>>>16)+(this.i(b)>>>16)+(I.i(b)>>>16);E=_>>>16,S&=65535,_&=65535,w[b]=_<<16|S}return new s(w,w[w.length-1]&-2147483648?-1:0)};function V(I,v){return I.add(A(v))}n.j=function(I){if(D(this)||D(I))return f;if(C(this))return C(I)?A(this).j(A(I)):A(A(this).j(I));if(C(I))return A(this.j(A(I)));if(0>this.l(y)&&0>I.l(y))return l(this.m()*I.m());for(var v=this.g.length+I.g.length,w=[],E=0;E<2*v;E++)w[E]=0;for(E=0;E<this.g.length;E++)for(var b=0;b<I.g.length;b++){var S=this.i(E)>>>16,_=this.i(E)&65535,$r=I.i(b)>>>16,vu=I.i(b)&65535;w[2*E+2*b]+=_*vu,G(w,2*E+2*b),w[2*E+2*b+1]+=S*vu,G(w,2*E+2*b+1),w[2*E+2*b+1]+=_*$r,G(w,2*E+2*b+1),w[2*E+2*b+2]+=S*$r,G(w,2*E+2*b+2)}for(E=0;E<v;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=v;E<2*v;E++)w[E]=0;return new s(w,0)};function G(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function k(I,v){this.g=I,this.h=v}function J(I,v){if(D(v))throw Error("division by zero");if(D(I))return new k(f,f);if(C(I))return v=J(A(I),v),new k(A(v.g),A(v.h));if(C(v))return v=J(I,A(v)),new k(A(v.g),v.h);if(30<I.g.length){if(C(I)||C(v))throw Error("slowDivide_ only works with positive integers.");for(var w=g,E=v;0>=E.l(I);)w=oe(w),E=oe(E);var b=re(w,1),S=re(E,1);for(E=re(E,2),w=re(w,2);!D(E);){var _=S.add(E);0>=_.l(I)&&(b=b.add(w),S=_),E=re(E,1),w=re(w,1)}return v=V(I,b.j(v)),new k(b,v)}for(b=f;0<=I.l(v);){for(w=Math.max(1,Math.floor(I.m()/v.m())),E=Math.ceil(Math.log(w)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),S=l(w),_=S.j(v);C(_)||0<_.l(I);)w-=E,S=l(w),_=S.j(v);D(S)&&(S=g),b=b.add(S),I=V(I,_)}return new k(b,I)}n.A=function(I){return J(this,I).h},n.and=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],E=0;E<v;E++)w[E]=this.i(E)&I.i(E);return new s(w,this.h&I.h)},n.or=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],E=0;E<v;E++)w[E]=this.i(E)|I.i(E);return new s(w,this.h|I.h)},n.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],E=0;E<v;E++)w[E]=this.i(E)^I.i(E);return new s(w,this.h^I.h)};function oe(I){for(var v=I.g.length+1,w=[],E=0;E<v;E++)w[E]=I.i(E)<<1|I.i(E-1)>>>31;return new s(w,I.h)}function re(I,v){var w=v>>5;v%=32;for(var E=I.g.length-w,b=[],S=0;S<E;S++)b[S]=0<v?I.i(S+w)>>>v|I.i(S+w+1)<<32-v:I.i(S+w);return new s(b,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Ew=kx.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=d,Ki=kx.Integer=s}).apply(typeof Ox<"u"?Ox:typeof self<"u"?self:typeof window<"u"?window:{});var Hf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ci={};var Dw,Q4,Ma,Cw,Jc,zf,bw,Tw,Aw;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,h,p){return c==Array.prototype||c==Object.prototype||(c[h]=p.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hf=="object"&&Hf];for(var h=0;h<c.length;++h){var p=c[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(c,h){if(h)e:{var p=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var T=c[m];if(!(T in p))break e;p=p[T]}c=c[c.length-1],m=p[c],h=h(m),h!=m&&h!=null&&e(p,c,{configurable:!0,writable:!0,value:h})}}function o(c,h){c instanceof String&&(c+="");var p=0,m=!1,T={next:function(){if(!m&&p<c.length){var R=p++;return{value:h(R,c[R]),done:!1}}return m=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(c){return c||function(){return o(this,function(h,p){return p})}});var s=s||{},a=this||self;function u(c){var h=typeof c;return h=h!="object"?h:c?Array.isArray(c)?"array":h:"null",h=="array"||h=="object"&&typeof c.length=="number"}function l(c){var h=typeof c;return h=="object"&&c!=null||h=="function"}function d(c,h,p){return c.call.apply(c.bind,arguments)}function f(c,h,p){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,m),c.apply(h,T)}}return function(){return c.apply(h,arguments)}}function g(c,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function y(c,h){var p=Array.prototype.slice.call(arguments,1);return function(){var m=p.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function D(c,h){function p(){}p.prototype=h.prototype,c.aa=h.prototype,c.prototype=new p,c.prototype.constructor=c,c.Qb=function(m,T,R){for(var $=Array(arguments.length-2),je=2;je<arguments.length;je++)$[je-2]=arguments[je];return h.prototype[T].apply(m,$)}}function C(c){let h=c.length;if(0<h){let p=Array(h);for(let m=0;m<h;m++)p[m]=c[m];return p}return[]}function A(c,h){for(let p=1;p<arguments.length;p++){let m=arguments[p];if(u(m)){let T=c.length||0,R=m.length||0;c.length=T+R;for(let $=0;$<R;$++)c[T+$]=m[$]}else c.push(m)}}class V{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function G(c){return/^[\s\xa0]*$/.test(c)}function k(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function J(c){return J[" "](c),c}J[" "]=function(){};var oe=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function re(c,h,p){for(let m in c)h.call(p,c[m],m,c)}function I(c,h){for(let p in c)h.call(void 0,c[p],p,c)}function v(c){let h={};for(let p in c)h[p]=c[p];return h}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,h){let p,m;for(let T=1;T<arguments.length;T++){m=arguments[T];for(p in m)c[p]=m[p];for(let R=0;R<w.length;R++)p=w[R],Object.prototype.hasOwnProperty.call(m,p)&&(c[p]=m[p])}}function b(c){var h=1;c=c.split(":");let p=[];for(;0<h&&c.length;)p.push(c.shift()),h--;return c.length&&p.push(c.join(":")),p}function S(c){a.setTimeout(()=>{throw c},0)}function _(){var c=Sg;let h=null;return c.g&&(h=c.g,c.g=c.g.next,c.g||(c.h=null),h.next=null),h}class $r{constructor(){this.h=this.g=null}add(h,p){let m=vu.get();m.set(h,p),this.h?this.h.next=m:this.g=m,this.h=m}}var vu=new V(()=>new l1,c=>c.reset());class l1{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let _u,wu=!1,Sg=new $r,nD=()=>{let c=a.Promise.resolve(void 0);_u=()=>{c.then(d1)}};var d1=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(p){S(p)}var h=vu;h.j(c),100>h.h&&(h.h++,c.next=h.g,h.g=c)}wu=!1};function vi(){this.s=this.s,this.C=this.C}vi.prototype.s=!1,vi.prototype.ma=function(){this.s||(this.s=!0,this.N())},vi.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ut(c,h){this.type=c,this.g=this.target=h,this.defaultPrevented=!1}Ut.prototype.h=function(){this.defaultPrevented=!0};var h1=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,h=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return c}();function Iu(c,h){if(Ut.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var p=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=h,h=c.relatedTarget){if(oe){e:{try{J(h.nodeName);var T=!0;break e}catch{}T=!1}T||(h=null)}}else p=="mouseover"?h=c.fromElement:p=="mouseout"&&(h=c.toElement);this.relatedTarget=h,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:f1[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Iu.aa.h.call(this)}}D(Iu,Ut);var f1={2:"touch",3:"pen",4:"mouse"};Iu.prototype.h=function(){Iu.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Eu="closure_listenable_"+(1e6*Math.random()|0),p1=0;function g1(c,h,p,m,T){this.listener=c,this.proxy=null,this.src=h,this.type=p,this.capture=!!m,this.ha=T,this.key=++p1,this.da=this.fa=!1}function Bl(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function $l(c){this.src=c,this.g={},this.h=0}$l.prototype.add=function(c,h,p,m,T){var R=c.toString();c=this.g[R],c||(c=this.g[R]=[],this.h++);var $=xg(c,h,m,T);return-1<$?(h=c[$],p||(h.fa=!1)):(h=new g1(h,this.src,R,!!m,T),h.fa=p,c.push(h)),h};function Mg(c,h){var p=h.type;if(p in c.g){var m=c.g[p],T=Array.prototype.indexOf.call(m,h,void 0),R;(R=0<=T)&&Array.prototype.splice.call(m,T,1),R&&(Bl(h),c.g[p].length==0&&(delete c.g[p],c.h--))}}function xg(c,h,p,m){for(var T=0;T<c.length;++T){var R=c[T];if(!R.da&&R.listener==h&&R.capture==!!p&&R.ha==m)return T}return-1}var Rg="closure_lm_"+(1e6*Math.random()|0),Ng={};function rD(c,h,p,m,T){if(m&&m.once)return oD(c,h,p,m,T);if(Array.isArray(h)){for(var R=0;R<h.length;R++)rD(c,h[R],p,m,T);return null}return p=Fg(p),c&&c[Eu]?c.K(h,p,l(m)?!!m.capture:!!m,T):iD(c,h,p,!1,m,T)}function iD(c,h,p,m,T,R){if(!h)throw Error("Invalid event type");var $=l(T)?!!T.capture:!!T,je=Og(c);if(je||(c[Rg]=je=new $l(c)),p=je.add(h,p,m,$,R),p.proxy)return p;if(m=m1(),p.proxy=m,m.src=c,m.listener=p,c.addEventListener)h1||(T=$),T===void 0&&(T=!1),c.addEventListener(h.toString(),m,T);else if(c.attachEvent)c.attachEvent(aD(h.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return p}function m1(){function c(p){return h.call(c.src,c.listener,p)}let h=y1;return c}function oD(c,h,p,m,T){if(Array.isArray(h)){for(var R=0;R<h.length;R++)oD(c,h[R],p,m,T);return null}return p=Fg(p),c&&c[Eu]?c.L(h,p,l(m)?!!m.capture:!!m,T):iD(c,h,p,!0,m,T)}function sD(c,h,p,m,T){if(Array.isArray(h))for(var R=0;R<h.length;R++)sD(c,h[R],p,m,T);else m=l(m)?!!m.capture:!!m,p=Fg(p),c&&c[Eu]?(c=c.i,h=String(h).toString(),h in c.g&&(R=c.g[h],p=xg(R,p,m,T),-1<p&&(Bl(R[p]),Array.prototype.splice.call(R,p,1),R.length==0&&(delete c.g[h],c.h--)))):c&&(c=Og(c))&&(h=c.g[h.toString()],c=-1,h&&(c=xg(h,p,m,T)),(p=-1<c?h[c]:null)&&Pg(p))}function Pg(c){if(typeof c!="number"&&c&&!c.da){var h=c.src;if(h&&h[Eu])Mg(h.i,c);else{var p=c.type,m=c.proxy;h.removeEventListener?h.removeEventListener(p,m,c.capture):h.detachEvent?h.detachEvent(aD(p),m):h.addListener&&h.removeListener&&h.removeListener(m),(p=Og(h))?(Mg(p,c),p.h==0&&(p.src=null,h[Rg]=null)):Bl(c)}}}function aD(c){return c in Ng?Ng[c]:Ng[c]="on"+c}function y1(c,h){if(c.da)c=!0;else{h=new Iu(h,this);var p=c.listener,m=c.ha||c.src;c.fa&&Pg(c),c=p.call(m,h)}return c}function Og(c){return c=c[Rg],c instanceof $l?c:null}var kg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fg(c){return typeof c=="function"?c:(c[kg]||(c[kg]=function(h){return c.handleEvent(h)}),c[kg])}function Bt(){vi.call(this),this.i=new $l(this),this.M=this,this.F=null}D(Bt,vi),Bt.prototype[Eu]=!0,Bt.prototype.removeEventListener=function(c,h,p,m){sD(this,c,h,p,m)};function Yt(c,h){var p,m=c.F;if(m)for(p=[];m;m=m.F)p.push(m);if(c=c.M,m=h.type||h,typeof h=="string")h=new Ut(h,c);else if(h instanceof Ut)h.target=h.target||c;else{var T=h;h=new Ut(m,c),E(h,T)}if(T=!0,p)for(var R=p.length-1;0<=R;R--){var $=h.g=p[R];T=ql($,m,!0,h)&&T}if($=h.g=c,T=ql($,m,!0,h)&&T,T=ql($,m,!1,h)&&T,p)for(R=0;R<p.length;R++)$=h.g=p[R],T=ql($,m,!1,h)&&T}Bt.prototype.N=function(){if(Bt.aa.N.call(this),this.i){var c=this.i,h;for(h in c.g){for(var p=c.g[h],m=0;m<p.length;m++)Bl(p[m]);delete c.g[h],c.h--}}this.F=null},Bt.prototype.K=function(c,h,p,m){return this.i.add(String(c),h,!1,p,m)},Bt.prototype.L=function(c,h,p,m){return this.i.add(String(c),h,!0,p,m)};function ql(c,h,p,m){if(h=c.i.g[String(h)],!h)return!0;h=h.concat();for(var T=!0,R=0;R<h.length;++R){var $=h[R];if($&&!$.da&&$.capture==p){var je=$.listener,kt=$.ha||$.src;$.fa&&Mg(c.i,$),T=je.call(kt,m)!==!1&&T}}return T&&!m.defaultPrevented}function uD(c,h,p){if(typeof c=="function")p&&(c=g(c,p));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(c,h||0)}function cD(c){c.g=uD(()=>{c.g=null,c.i&&(c.i=!1,cD(c))},c.l);let h=c.h;c.h=null,c.m.apply(null,h)}class v1 extends vi{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:cD(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Du(c){vi.call(this),this.h=c,this.g={}}D(Du,vi);var lD=[];function dD(c){re(c.g,function(h,p){this.g.hasOwnProperty(p)&&Pg(h)},c),c.g={}}Du.prototype.N=function(){Du.aa.N.call(this),dD(this)},Du.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vg=a.JSON.stringify,_1=a.JSON.parse,w1=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Lg(){}Lg.prototype.h=null;function hD(c){return c.h||(c.h=c.i())}function fD(){}var Cu={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function jg(){Ut.call(this,"d")}D(jg,Ut);function Ug(){Ut.call(this,"c")}D(Ug,Ut);var yo={},pD=null;function Hl(){return pD=pD||new Bt}yo.La="serverreachability";function gD(c){Ut.call(this,yo.La,c)}D(gD,Ut);function bu(c){let h=Hl();Yt(h,new gD(h))}yo.STAT_EVENT="statevent";function mD(c,h){Ut.call(this,yo.STAT_EVENT,c),this.stat=h}D(mD,Ut);function Zt(c){let h=Hl();Yt(h,new mD(h,c))}yo.Ma="timingevent";function yD(c,h){Ut.call(this,yo.Ma,c),this.size=h}D(yD,Ut);function Tu(c,h){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},h)}function Au(){this.g=!0}Au.prototype.xa=function(){this.g=!1};function I1(c,h,p,m,T,R){c.info(function(){if(c.g)if(R)for(var $="",je=R.split("&"),kt=0;kt<je.length;kt++){var Se=je[kt].split("=");if(1<Se.length){var $t=Se[0];Se=Se[1];var qt=$t.split("_");$=2<=qt.length&&qt[1]=="type"?$+($t+"="+Se+"&"):$+($t+"=redacted&")}}else $=null;else $=R;return"XMLHTTP REQ ("+m+") [attempt "+T+"]: "+h+`
`+p+`
`+$})}function E1(c,h,p,m,T,R,$){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+T+"]: "+h+`
`+p+`
`+R+" "+$})}function Is(c,h,p,m){c.info(function(){return"XMLHTTP TEXT ("+h+"): "+C1(c,p)+(m?" "+m:"")})}function D1(c,h){c.info(function(){return"TIMEOUT: "+h})}Au.prototype.info=function(){};function C1(c,h){if(!c.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(c=0;c<p.length;c++)if(Array.isArray(p[c])){var m=p[c];if(!(2>m.length)){var T=m[1];if(Array.isArray(T)&&!(1>T.length)){var R=T[0];if(R!="noop"&&R!="stop"&&R!="close")for(var $=1;$<T.length;$++)T[$]=""}}}}return Vg(p)}catch{return h}}var zl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},vD={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Bg;function Gl(){}D(Gl,Lg),Gl.prototype.g=function(){return new XMLHttpRequest},Gl.prototype.i=function(){return{}},Bg=new Gl;function _i(c,h,p,m){this.j=c,this.i=h,this.l=p,this.R=m||1,this.U=new Du(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _D}function _D(){this.i=null,this.g="",this.h=!1}var wD={},$g={};function qg(c,h,p){c.L=1,c.v=Yl(qr(h)),c.m=p,c.P=!0,ID(c,null)}function ID(c,h){c.F=Date.now(),Wl(c),c.A=qr(c.v);var p=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),kD(p.i,"t",m),c.C=0,p=c.j.J,c.h=new _D,c.g=XD(c.j,p?h:null,!c.m),0<c.O&&(c.M=new v1(g(c.Y,c,c.g),c.O)),h=c.U,p=c.g,m=c.ca;var T="readystatechange";Array.isArray(T)||(T&&(lD[0]=T.toString()),T=lD);for(var R=0;R<T.length;R++){var $=rD(p,T[R],m||h.handleEvent,!1,h.h||h);if(!$)break;h.g[$.key]=$}h=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,h)):(c.u="GET",c.g.ea(c.A,c.u,null,h)),bu(),I1(c.i,c.u,c.A,c.l,c.R,c.m)}_i.prototype.ca=function(c){c=c.target;let h=this.M;h&&Hr(c)==3?h.j():this.Y(c)},_i.prototype.Y=function(c){try{if(c==this.g)e:{let qt=Hr(this.g);var h=this.g.Ba();let Cs=this.g.Z();if(!(3>qt)&&(qt!=3||this.g&&(this.h.h||this.g.oa()||$D(this.g)))){this.J||qt!=4||h==7||(h==8||0>=Cs?bu(3):bu(2)),Hg(this);var p=this.g.Z();this.X=p;t:if(ED(this)){var m=$D(this.g);c="";var T=m.length,R=Hr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vo(this),Su(this);var $="";break t}this.h.i=new a.TextDecoder}for(h=0;h<T;h++)this.h.h=!0,c+=this.h.i.decode(m[h],{stream:!(R&&h==T-1)});m.length=0,this.h.g+=c,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=p==200,E1(this.i,this.u,this.A,this.l,this.R,qt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var je,kt=this.g;if((je=kt.g?kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(je)){var Se=je;break t}}Se=null}if(p=Se)Is(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zg(this,p);else{this.o=!1,this.s=3,Zt(12),vo(this),Su(this);break e}}if(this.P){p=!0;let Qn;for(;!this.J&&this.C<$.length;)if(Qn=b1(this,$),Qn==$g){qt==4&&(this.s=4,Zt(14),p=!1),Is(this.i,this.l,null,"[Incomplete Response]");break}else if(Qn==wD){this.s=4,Zt(15),Is(this.i,this.l,$,"[Invalid Chunk]"),p=!1;break}else Is(this.i,this.l,Qn,null),zg(this,Qn);if(ED(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qt!=4||$.length!=0||this.h.h||(this.s=1,Zt(16),p=!1),this.o=this.o&&p,!p)Is(this.i,this.l,$,"[Invalid Chunked Response]"),vo(this),Su(this);else if(0<$.length&&!this.W){this.W=!0;var $t=this.j;$t.g==this&&$t.ba&&!$t.M&&($t.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),Zg($t),$t.M=!0,Zt(11))}}else Is(this.i,this.l,$,null),zg(this,$);qt==4&&vo(this),this.o&&!this.J&&(qt==4?QD(this.j,this):(this.o=!1,Wl(this)))}else $1(this.g),p==400&&0<$.indexOf("Unknown SID")?(this.s=3,Zt(12)):(this.s=0,Zt(13)),vo(this),Su(this)}}}catch{}finally{}};function ED(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function b1(c,h){var p=c.C,m=h.indexOf(`
`,p);return m==-1?$g:(p=Number(h.substring(p,m)),isNaN(p)?wD:(m+=1,m+p>h.length?$g:(h=h.slice(m,m+p),c.C=m+p,h)))}_i.prototype.cancel=function(){this.J=!0,vo(this)};function Wl(c){c.S=Date.now()+c.I,DD(c,c.I)}function DD(c,h){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Tu(g(c.ba,c),h)}function Hg(c){c.B&&(a.clearTimeout(c.B),c.B=null)}_i.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(D1(this.i,this.A),this.L!=2&&(bu(),Zt(17)),vo(this),this.s=2,Su(this)):DD(this,this.S-c)};function Su(c){c.j.G==0||c.J||QD(c.j,c)}function vo(c){Hg(c);var h=c.M;h&&typeof h.ma=="function"&&h.ma(),c.M=null,dD(c.U),c.g&&(h=c.g,c.g=null,h.abort(),h.ma())}function zg(c,h){try{var p=c.j;if(p.G!=0&&(p.g==c||Gg(p.h,c))){if(!c.K&&Gg(p.h,c)&&p.G==3){try{var m=p.Da.g.parse(h)}catch{m=null}if(Array.isArray(m)&&m.length==3){var T=m;if(T[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<c.F)td(p),Xl(p);else break e;Yg(p),Zt(18)}}else p.za=T[1],0<p.za-p.T&&37500>T[2]&&p.F&&p.v==0&&!p.C&&(p.C=Tu(g(p.Za,p),6e3));if(1>=TD(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else wo(p,11)}else if((c.K||p.g==c)&&td(p),!G(h))for(T=p.Da.g.parse(h),h=0;h<T.length;h++){let Se=T[h];if(p.T=Se[0],Se=Se[1],p.G==2)if(Se[0]=="c"){p.K=Se[1],p.ia=Se[2];let $t=Se[3];$t!=null&&(p.la=$t,p.j.info("VER="+p.la));let qt=Se[4];qt!=null&&(p.Aa=qt,p.j.info("SVER="+p.Aa));let Cs=Se[5];Cs!=null&&typeof Cs=="number"&&0<Cs&&(m=1.5*Cs,p.L=m,p.j.info("backChannelRequestTimeoutMs_="+m)),m=p;let Qn=c.g;if(Qn){let rd=Qn.g?Qn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(rd){var R=m.h;R.g||rd.indexOf("spdy")==-1&&rd.indexOf("quic")==-1&&rd.indexOf("h2")==-1||(R.j=R.l,R.g=new Set,R.h&&(Wg(R,R.h),R.h=null))}if(m.D){let Jg=Qn.g?Qn.g.getResponseHeader("X-HTTP-Session-Id"):null;Jg&&(m.ya=Jg,Ge(m.I,m.D,Jg))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-c.F,p.j.info("Handshake RTT: "+p.R+"ms")),m=p;var $=c;if(m.qa=JD(m,m.J?m.ia:null,m.W),$.K){AD(m.h,$);var je=$,kt=m.L;kt&&(je.I=kt),je.B&&(Hg(je),Wl(je)),m.g=$}else WD(m);0<p.i.length&&ed(p)}else Se[0]!="stop"&&Se[0]!="close"||wo(p,7);else p.G==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?wo(p,7):Qg(p):Se[0]!="noop"&&p.l&&p.l.ta(Se),p.v=0)}}bu(4)}catch{}}var T1=class{constructor(c,h){this.g=c,this.map=h}};function CD(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function bD(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function TD(c){return c.h?1:c.g?c.g.size:0}function Gg(c,h){return c.h?c.h==h:c.g?c.g.has(h):!1}function Wg(c,h){c.g?c.g.add(h):c.h=h}function AD(c,h){c.h&&c.h==h?c.h=null:c.g&&c.g.has(h)&&c.g.delete(h)}CD.prototype.cancel=function(){if(this.i=SD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function SD(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let h=c.i;for(let p of c.g.values())h=h.concat(p.D);return h}return C(c.i)}function A1(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var h=[],p=c.length,m=0;m<p;m++)h.push(c[m]);return h}h=[],p=0;for(m in c)h[p++]=c[m];return h}function S1(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var h=[];c=c.length;for(var p=0;p<c;p++)h.push(p);return h}h=[],p=0;for(let m in c)h[p++]=m;return h}}}function MD(c,h){if(c.forEach&&typeof c.forEach=="function")c.forEach(h,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,h,void 0);else for(var p=S1(c),m=A1(c),T=m.length,R=0;R<T;R++)h.call(void 0,m[R],p&&p[R],c)}var xD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function M1(c,h){if(c){c=c.split("&");for(var p=0;p<c.length;p++){var m=c[p].indexOf("="),T=null;if(0<=m){var R=c[p].substring(0,m);T=c[p].substring(m+1)}else R=c[p];h(R,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function _o(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof _o){this.h=c.h,Kl(this,c.j),this.o=c.o,this.g=c.g,Ql(this,c.s),this.l=c.l;var h=c.i,p=new Ru;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),RD(this,p),this.m=c.m}else c&&(h=String(c).match(xD))?(this.h=!1,Kl(this,h[1]||"",!0),this.o=Mu(h[2]||""),this.g=Mu(h[3]||"",!0),Ql(this,h[4]),this.l=Mu(h[5]||"",!0),RD(this,h[6]||"",!0),this.m=Mu(h[7]||"")):(this.h=!1,this.i=new Ru(null,this.h))}_o.prototype.toString=function(){var c=[],h=this.j;h&&c.push(xu(h,ND,!0),":");var p=this.g;return(p||h=="file")&&(c.push("//"),(h=this.o)&&c.push(xu(h,ND,!0),"@"),c.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&c.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&c.push("/"),c.push(xu(p,p.charAt(0)=="/"?N1:R1,!0))),(p=this.i.toString())&&c.push("?",p),(p=this.m)&&c.push("#",xu(p,O1)),c.join("")};function qr(c){return new _o(c)}function Kl(c,h,p){c.j=p?Mu(h,!0):h,c.j&&(c.j=c.j.replace(/:$/,""))}function Ql(c,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);c.s=h}else c.s=null}function RD(c,h,p){h instanceof Ru?(c.i=h,k1(c.i,c.h)):(p||(h=xu(h,P1)),c.i=new Ru(h,c.h))}function Ge(c,h,p){c.i.set(h,p)}function Yl(c){return Ge(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Mu(c,h){return c?h?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function xu(c,h,p){return typeof c=="string"?(c=encodeURI(c).replace(h,x1),p&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function x1(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ND=/[#\/\?@]/g,R1=/[#\?:]/g,N1=/[#\?]/g,P1=/[#\?@]/g,O1=/#/g;function Ru(c,h){this.h=this.g=null,this.i=c||null,this.j=!!h}function wi(c){c.g||(c.g=new Map,c.h=0,c.i&&M1(c.i,function(h,p){c.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}n=Ru.prototype,n.add=function(c,h){wi(this),this.i=null,c=Es(this,c);var p=this.g.get(c);return p||this.g.set(c,p=[]),p.push(h),this.h+=1,this};function PD(c,h){wi(c),h=Es(c,h),c.g.has(h)&&(c.i=null,c.h-=c.g.get(h).length,c.g.delete(h))}function OD(c,h){return wi(c),h=Es(c,h),c.g.has(h)}n.forEach=function(c,h){wi(this),this.g.forEach(function(p,m){p.forEach(function(T){c.call(h,T,m,this)},this)},this)},n.na=function(){wi(this);let c=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let m=0;m<h.length;m++){let T=c[m];for(let R=0;R<T.length;R++)p.push(h[m])}return p},n.V=function(c){wi(this);let h=[];if(typeof c=="string")OD(this,c)&&(h=h.concat(this.g.get(Es(this,c))));else{c=Array.from(this.g.values());for(let p=0;p<c.length;p++)h=h.concat(c[p])}return h},n.set=function(c,h){return wi(this),this.i=null,c=Es(this,c),OD(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[h]),this.h+=1,this},n.get=function(c,h){return c?(c=this.V(c),0<c.length?String(c[0]):h):h};function kD(c,h,p){PD(c,h),0<p.length&&(c.i=null,c.g.set(Es(c,h),C(p)),c.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var m=h[p];let R=encodeURIComponent(String(m)),$=this.V(m);for(m=0;m<$.length;m++){var T=R;$[m]!==""&&(T+="="+encodeURIComponent(String($[m]))),c.push(T)}}return this.i=c.join("&")};function Es(c,h){return h=String(h),c.j&&(h=h.toLowerCase()),h}function k1(c,h){h&&!c.j&&(wi(c),c.i=null,c.g.forEach(function(p,m){var T=m.toLowerCase();m!=T&&(PD(this,m),kD(this,T,p))},c)),c.j=h}function F1(c,h){let p=new Au;if(a.Image){let m=new Image;m.onload=y(Ii,p,"TestLoadImage: loaded",!0,h,m),m.onerror=y(Ii,p,"TestLoadImage: error",!1,h,m),m.onabort=y(Ii,p,"TestLoadImage: abort",!1,h,m),m.ontimeout=y(Ii,p,"TestLoadImage: timeout",!1,h,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else h(!1)}function V1(c,h){let p=new Au,m=new AbortController,T=setTimeout(()=>{m.abort(),Ii(p,"TestPingServer: timeout",!1,h)},1e4);fetch(c,{signal:m.signal}).then(R=>{clearTimeout(T),R.ok?Ii(p,"TestPingServer: ok",!0,h):Ii(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(T),Ii(p,"TestPingServer: error",!1,h)})}function Ii(c,h,p,m,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),m(p)}catch{}}function L1(){this.g=new w1}function j1(c,h,p){let m=p||"";try{MD(c,function(T,R){let $=T;l(T)&&($=Vg(T)),h.push(m+R+"="+encodeURIComponent($))})}catch(T){throw h.push(m+"type="+encodeURIComponent("_badmap")),T}}function Nu(c){this.l=c.Ub||null,this.j=c.eb||!1}D(Nu,Lg),Nu.prototype.g=function(){return new Zl(this.l,this.j)},Nu.prototype.i=function(c){return function(){return c}}({});function Zl(c,h){Bt.call(this),this.D=c,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Zl,Bt),n=Zl.prototype,n.open=function(c,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=h,this.readyState=1,Ou(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(h.body=c),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Pu(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ou(this)),this.g&&(this.readyState=3,Ou(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;FD(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function FD(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var h=c.value?c.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!c.done}))&&(this.response=this.responseText+=h)}c.done?Pu(this):Ou(this),this.readyState==3&&FD(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Pu(this))},n.Qa=function(c){this.g&&(this.response=c,Pu(this))},n.ga=function(){this.g&&Pu(this)};function Pu(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ou(c)}n.setRequestHeader=function(c,h){this.u.append(c,h)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,c.push(p[0]+": "+p[1]),p=h.next();return c.join(`\r
`)};function Ou(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Zl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function VD(c){let h="";return re(c,function(p,m){h+=m,h+=":",h+=p,h+=`\r
`}),h}function Kg(c,h,p){e:{for(m in p){var m=!1;break e}m=!0}m||(p=VD(p),typeof c=="string"?p!=null&&encodeURIComponent(String(p)):Ge(c,h,p))}function it(c){Bt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(it,Bt);var U1=/^https?$/i,B1=["POST","PUT"];n=it.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,h,p,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);h=h?h.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Bg.g(),this.v=this.o?hD(this.o):hD(Bg),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(c),!0),this.B=!1}catch(R){LD(this,R);return}if(c=p||"",p=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var T in m)p.set(T,m[T]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let R of m.keys())p.set(R,m.get(R));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(p.keys()).find(R=>R.toLowerCase()=="content-type"),T=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(B1,h,void 0))||m||T||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[R,$]of p)this.g.setRequestHeader(R,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{BD(this),this.u=!0,this.g.send(c),this.u=!1}catch(R){LD(this,R)}};function LD(c,h){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=h,c.m=5,jD(c),Jl(c)}function jD(c){c.A||(c.A=!0,Yt(c,"complete"),Yt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Yt(this,"complete"),Yt(this,"abort"),Jl(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Jl(this,!0)),it.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?UD(this):this.bb())},n.bb=function(){UD(this)};function UD(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Hr(c)!=4||c.Z()!=2)){if(c.u&&Hr(c)==4)uD(c.Ea,0,c);else if(Yt(c,"readystatechange"),Hr(c)==4){c.h=!1;try{let $=c.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var m;if(m=$===0){var T=String(c.D).match(xD)[1]||null;!T&&a.self&&a.self.location&&(T=a.self.location.protocol.slice(0,-1)),m=!U1.test(T?T.toLowerCase():"")}p=m}if(p)Yt(c,"complete"),Yt(c,"success");else{c.m=6;try{var R=2<Hr(c)?c.g.statusText:""}catch{R=""}c.l=R+" ["+c.Z()+"]",jD(c)}}finally{Jl(c)}}}}function Jl(c,h){if(c.g){BD(c);let p=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,h||Yt(c,"ready");try{p.onreadystatechange=m}catch{}}}function BD(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Hr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Hr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var h=this.g.responseText;return c&&h.indexOf(c)==0&&(h=h.substring(c.length)),_1(h)}};function $D(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function $1(c){let h={};c=(c.g&&2<=Hr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(G(c[m]))continue;var p=b(c[m]);let T=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let R=h[T]||[];h[T]=R,R.push(p)}I(h,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ku(c,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[c]||h}function qD(c){this.Aa=0,this.i=[],this.j=new Au,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ku("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ku("baseRetryDelayMs",5e3,c),this.cb=ku("retryDelaySeedMs",1e4,c),this.Wa=ku("forwardChannelMaxRetries",2,c),this.wa=ku("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new CD(c&&c.concurrentRequestLimit),this.Da=new L1,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=qD.prototype,n.la=8,n.G=1,n.connect=function(c,h,p,m){Zt(0),this.W=c,this.H=h||{},p&&m!==void 0&&(this.H.OSID=p,this.H.OAID=m),this.F=this.X,this.I=JD(this,null,this.W),ed(this)};function Qg(c){if(HD(c),c.G==3){var h=c.U++,p=qr(c.I);if(Ge(p,"SID",c.K),Ge(p,"RID",h),Ge(p,"TYPE","terminate"),Fu(c,p),h=new _i(c,c.j,h),h.L=2,h.v=Yl(qr(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=XD(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Wl(h)}ZD(c)}function Xl(c){c.g&&(Zg(c),c.g.cancel(),c.g=null)}function HD(c){Xl(c),c.u&&(a.clearTimeout(c.u),c.u=null),td(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function ed(c){if(!bD(c.h)&&!c.s){c.s=!0;var h=c.Ga;_u||nD(),wu||(_u(),wu=!0),Sg.add(h,c),c.B=0}}function q1(c,h){return TD(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=h.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Tu(g(c.Ga,c,h),YD(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let T=new _i(this,this.j,c),R=this.o;if(this.S&&(R?(R=v(R),E(R,this.S)):R=this.S),this.m!==null||this.O||(T.H=R,R=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var m=this.i[p];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(h+=m,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=GD(this,T,h),p=qr(this.I),Ge(p,"RID",c),Ge(p,"CVER",22),this.D&&Ge(p,"X-HTTP-Session-Id",this.D),Fu(this,p),R&&(this.O?h="headers="+encodeURIComponent(String(VD(R)))+"&"+h:this.m&&Kg(p,this.m,R)),Wg(this.h,T),this.Ua&&Ge(p,"TYPE","init"),this.P?(Ge(p,"$req",h),Ge(p,"SID","null"),T.T=!0,qg(T,p,null)):qg(T,p,h),this.G=2}}else this.G==3&&(c?zD(this,c):this.i.length==0||bD(this.h)||zD(this))};function zD(c,h){var p;h?p=h.l:p=c.U++;let m=qr(c.I);Ge(m,"SID",c.K),Ge(m,"RID",p),Ge(m,"AID",c.T),Fu(c,m),c.m&&c.o&&Kg(m,c.m,c.o),p=new _i(c,c.j,p,c.B+1),c.m===null&&(p.H=c.o),h&&(c.i=h.D.concat(c.i)),h=GD(c,p,1e3),p.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Wg(c.h,p),qg(p,m,h)}function Fu(c,h){c.H&&re(c.H,function(p,m){Ge(h,m,p)}),c.l&&MD({},function(p,m){Ge(h,m,p)})}function GD(c,h,p){p=Math.min(c.i.length,p);var m=c.l?g(c.l.Na,c.l,c):null;e:{var T=c.i;let R=-1;for(;;){let $=["count="+p];R==-1?0<p?(R=T[0].g,$.push("ofs="+R)):R=0:$.push("ofs="+R);let je=!0;for(let kt=0;kt<p;kt++){let Se=T[kt].g,$t=T[kt].map;if(Se-=R,0>Se)R=Math.max(0,T[kt].g-100),je=!1;else try{j1($t,$,"req"+Se+"_")}catch{m&&m($t)}}if(je){m=$.join("&");break e}}}return c=c.i.splice(0,p),h.D=c,m}function WD(c){if(!c.g&&!c.u){c.Y=1;var h=c.Fa;_u||nD(),wu||(_u(),wu=!0),Sg.add(h,c),c.v=0}}function Yg(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Tu(g(c.Fa,c),YD(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,KD(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Tu(g(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Zt(10),Xl(this),KD(this))};function Zg(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function KD(c){c.g=new _i(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var h=qr(c.qa);Ge(h,"RID","rpc"),Ge(h,"SID",c.K),Ge(h,"AID",c.T),Ge(h,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ge(h,"TO",c.ja),Ge(h,"TYPE","xmlhttp"),Fu(c,h),c.m&&c.o&&Kg(h,c.m,c.o),c.L&&(c.g.I=c.L);var p=c.g;c=c.ia,p.L=1,p.v=Yl(qr(h)),p.m=null,p.P=!0,ID(p,c)}n.Za=function(){this.C!=null&&(this.C=null,Xl(this),Yg(this),Zt(19))};function td(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function QD(c,h){var p=null;if(c.g==h){td(c),Zg(c),c.g=null;var m=2}else if(Gg(c.h,h))p=h.D,AD(c.h,h),m=1;else return;if(c.G!=0){if(h.o)if(m==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var T=c.B;m=Hl(),Yt(m,new yD(m,p)),ed(c)}else WD(c);else if(T=h.s,T==3||T==0&&0<h.X||!(m==1&&q1(c,h)||m==2&&Yg(c)))switch(p&&0<p.length&&(h=c.h,h.i=h.i.concat(p)),T){case 1:wo(c,5);break;case 4:wo(c,10);break;case 3:wo(c,6);break;default:wo(c,2)}}}function YD(c,h){let p=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(p*=2),p*h}function wo(c,h){if(c.j.info("Error code "+h),h==2){var p=g(c.fb,c),m=c.Xa;let T=!m;m=new _o(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Kl(m,"https"),Yl(m),T?F1(m.toString(),p):V1(m.toString(),p)}else Zt(2);c.G=0,c.l&&c.l.sa(h),ZD(c),HD(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Zt(2)):(this.j.info("Failed to ping google.com"),Zt(1))};function ZD(c){if(c.G=0,c.ka=[],c.l){let h=SD(c.h);(h.length!=0||c.i.length!=0)&&(A(c.ka,h),A(c.ka,c.i),c.h.i.length=0,C(c.i),c.i.length=0),c.l.ra()}}function JD(c,h,p){var m=p instanceof _o?qr(p):new _o(p);if(m.g!="")h&&(m.g=h+"."+m.g),Ql(m,m.s);else{var T=a.location;m=T.protocol,h=h?h+"."+T.hostname:T.hostname,T=+T.port;var R=new _o(null);m&&Kl(R,m),h&&(R.g=h),T&&Ql(R,T),p&&(R.l=p),m=R}return p=c.D,h=c.ya,p&&h&&Ge(m,p,h),Ge(m,"VER",c.la),Fu(c,m),m}function XD(c,h,p){if(h&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=c.Ca&&!c.pa?new it(new Nu({eb:p})):new it(c.pa),h.Ha(c.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function eC(){}n=eC.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function nd(){}nd.prototype.g=function(c,h){return new wn(c,h)};function wn(c,h){Bt.call(this),this.g=new qD(h),this.l=c,this.h=h&&h.messageUrlParams||null,c=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(c?c["X-WebChannel-Content-Type"]=h.messageContentType:c={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(c?c["X-WebChannel-Client-Profile"]=h.va:c={"X-WebChannel-Client-Profile":h.va}),this.g.S=c,(c=h&&h.Sb)&&!G(c)&&(this.g.m=c),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!G(h)&&(this.g.D=h,c=this.h,c!==null&&h in c&&(c=this.h,h in c&&delete c[h])),this.j=new Ds(this)}D(wn,Bt),wn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},wn.prototype.close=function(){Qg(this.g)},wn.prototype.o=function(c){var h=this.g;if(typeof c=="string"){var p={};p.__data__=c,c=p}else this.u&&(p={},p.__data__=Vg(c),c=p);h.i.push(new T1(h.Ya++,c)),h.G==3&&ed(h)},wn.prototype.N=function(){this.g.l=null,delete this.j,Qg(this.g),delete this.g,wn.aa.N.call(this)};function tC(c){jg.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var h=c.__sm__;if(h){e:{for(let p in h){c=p;break e}c=void 0}(this.i=c)&&(c=this.i,h=h!==null&&c in h?h[c]:void 0),this.data=h}else this.data=c}D(tC,jg);function nC(){Ug.call(this),this.status=1}D(nC,Ug);function Ds(c){this.g=c}D(Ds,eC),Ds.prototype.ua=function(){Yt(this.g,"a")},Ds.prototype.ta=function(c){Yt(this.g,new tC(c))},Ds.prototype.sa=function(c){Yt(this.g,new nC)},Ds.prototype.ra=function(){Yt(this.g,"b")},nd.prototype.createWebChannel=nd.prototype.g,wn.prototype.send=wn.prototype.o,wn.prototype.open=wn.prototype.m,wn.prototype.close=wn.prototype.close,Aw=ci.createWebChannelTransport=function(){return new nd},Tw=ci.getStatEventTarget=function(){return Hl()},bw=ci.Event=yo,zf=ci.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zl.NO_ERROR=0,zl.TIMEOUT=8,zl.HTTP_ERROR=6,Jc=ci.ErrorCode=zl,vD.COMPLETE="complete",Cw=ci.EventType=vD,fD.EventType=Cu,Cu.OPEN="a",Cu.CLOSE="b",Cu.ERROR="c",Cu.MESSAGE="d",Bt.prototype.listen=Bt.prototype.K,Ma=ci.WebChannel=fD,Q4=ci.FetchXmlHttpFactory=Nu,it.prototype.listenOnce=it.prototype.L,it.prototype.getLastError=it.prototype.Ka,it.prototype.getLastErrorCode=it.prototype.Ba,it.prototype.getStatus=it.prototype.Z,it.prototype.getResponseJson=it.prototype.Oa,it.prototype.getResponseText=it.prototype.oa,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Ha,Dw=ci.XhrIo=it}).apply(typeof Hf<"u"?Hf:typeof self<"u"?self:typeof window<"u"?window:{});var Fx="@firebase/firestore";var It=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};It.UNAUTHENTICATED=new It(null),It.GOOGLE_CREDENTIALS=new It("google-credentials-uid"),It.FIRST_PARTY=new It("first-party-uid"),It.MOCK_USER=new It("mock-user");var su="10.14.0";var to=new sd("@firebase/firestore");function Oa(){return to.logLevel}function NI(n){to.setLogLevel(n)}function L(n,...e){if(to.logLevel<=hr.DEBUG){let t=e.map(PI);to.debug(`Firestore (${su}): ${n}`,...t)}}function ct(n,...e){if(to.logLevel<=hr.ERROR){let t=e.map(PI);to.error(`Firestore (${su}): ${n}`,...t)}}function ar(n,...e){if(to.logLevel<=hr.WARN){let t=e.map(PI);to.warn(`Firestore (${su}): ${n}`,...t)}}function PI(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function Z(n="Unexpected state"){let e=`FIRESTORE (${su}) INTERNAL ASSERTION FAILED: `+n;throw ct(e),new Error(e)}function ee(n,e){n||Z()}function jR(n,e){n||Z()}function H(n,e){return n}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},F=class extends uC{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Mt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var tp=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Pw=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(It.UNAUTHENTICATED))}shutdown(){}},Ow=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},kw=class{constructor(e){this.t=e,this.currentUser=It.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ee(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new Mt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Mt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>x(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{L("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(L("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Mt)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(L("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ee(typeof r.accessToken=="string"),new tp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ee(e===null||typeof e=="string"),new It(e)}},Fw=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=It.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Vw=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Fw(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(It.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Lw=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},jw=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ee(this.o===void 0);let r=o=>{o.error!=null&&L("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,L("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{L("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):L("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ee(typeof t.token=="string"),this.R=t.token,new Lw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Y4(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var np=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Y4(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function ue(n,e){return n<e?-1:n>e?1:0}function qa(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function UR(n){return n+"\0"}var Ke=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new F(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new F(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new F(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ie=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Ke(0,0))}static max(){return new n(new Ke(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var rp=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Z(),r===void 0?r=e.length-t:r>e.length-t&&Z(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},be=class n extends rp{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new F(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Z4=/^[_a-zA-Z][_a-zA-Z0-9]*$/,lt=class n extends rp{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Z4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new F(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new F(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new F(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new F(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var z=class n{constructor(e){this.path=e}static fromPath(e){return new n(be.fromString(e))}static fromName(e){return new n(be.fromString(e).popFirst(5))}static empty(){return new n(be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return be.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new be(e.slice()))}};var Ha=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function Uw(n){return n.fields.find(e=>e.kind===2)}function Ko(n){return n.fields.filter(e=>e.kind!==2)}Ha.UNKNOWN_ID=-1;var Ua=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var ll=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,Wn.min())}};function BR(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ie.fromTimestamp(r===1e9?new Ke(t+1,0):new Ke(t,r));return new Wn(i,z.empty(),e)}function $R(n){return new Wn(n.readTime,n.key,-1)}var Wn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ie.min(),z.empty(),-1)}static max(){return new n(ie.max(),z.empty(),-1)}};function OI(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=z.comparator(n.documentKey,e.documentKey),t!==0?t:ue(n.largestBatchId,e.largestBatchId))}var qR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ip=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ho(n){return x(this,null,function*(){if(n.code!==N.FAILED_PRECONDITION||n.message!==qR)throw n;L("LocalStore","Unexpectedly lost primary lease")})}var M=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(d=>{s[l]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var op=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Mt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new es(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=kI(r.target.error);this.V.reject(new es(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new es(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(L("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new $w(t)}},no=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(Vu())===12.2&&ct("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return L("SimpleDb","Removing database:",e),Qo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!od())return!1;if(n.v())return!0;let e=Vu(),t=n.S(e),r=0<t&&t<10,i=HR(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return x(this,null,function*(){return this.db||(L("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new es(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new F(N.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new F(N.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new es(e,s))},i.onupgradeneeded=o=>{L("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{L("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return x(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=op.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),M.reject(l))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,l=u.name!=="FirebaseError"&&s<3;if(L("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function HR(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var Bw=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Qo(this.B.delete())}},es=class extends F{constructor(e,t){super(N.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function fo(n){return n.name==="IndexedDbTransactionError"}var $w=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(L("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(L("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Qo(r)}add(e){return L("SimpleDb","ADD",this.store.name,e,e),Qo(this.store.add(e))}get(e){return Qo(this.store.get(e)).next(t=>(t===void 0&&(t=null),L("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return L("SimpleDb","DELETE",this.store.name,e),Qo(this.store.delete(e))}count(){return L("SimpleDb","COUNT",this.store.name),Qo(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new M((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,u)=>{s.push(u)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new M((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){L("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new M((r,i)=>{t.onerror=o=>{let s=kI(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new M((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new Bw(a),l=t(a.primaryKey,a.value,u);if(l instanceof M){let d=l.catch(f=>(u.done(),M.reject(f)));r.push(d)}u.isDone?i():u.K===null?a.continue():a.continue(u.K)}}).next(()=>M.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function Qo(n){return new M((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=kI(r.target.error);t(i)}})}var Vx=!1;function kI(n){let e=no.S(Vu());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new F("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Vx||(Vx=!0,setTimeout(()=>{throw r},0)),r}}return n}var qw=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){L("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>x(this,null,function*(){this.task=null;try{L("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){fo(t)?L("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield ho(t)}yield this.X(6e4)}))}},Hw=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return x(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return M.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return L("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(L("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=$R(o);OI(s,r)>0&&(r=s)}),new Wn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var xn=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Rl(n){return n==null}function dl(n){return n===0&&1/n==-1/0}function zR(n){return typeof n=="number"&&Number.isInteger(n)&&!dl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function un(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Lx(e)),e=J4(n.get(t),e);return Lx(e)}function J4(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function Lx(n){return n+""}function Rr(n){let e=n.length;if(ee(e>=2),e===2)return ee(n.charAt(0)===""&&n.charAt(1)===""),be.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&Z(),n.charAt(s+1)){case"":let a=n.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:Z()}o=s+2}return new be(r)}var jx=["userId","batchId"];function Yf(n,e){return[n,un(e)]}function GR(n,e,t){return[n,un(e),t]}var X4={},eq=["prefixPath","collectionGroup","readTime","documentId"],tq=["prefixPath","collectionGroup","documentId"],nq=["collectionGroup","readTime","prefixPath","documentId"],rq=["canonicalId","targetId"],iq=["targetId","path"],oq=["path","targetId"],sq=["collectionId","parent"],aq=["indexId","uid"],uq=["uid","sequenceNumber"],cq=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],lq=["indexId","uid","orderedDocumentKey"],dq=["userId","collectionPath","documentId"],hq=["userId","collectionPath","largestBatchId"],fq=["userId","collectionGroup","largestBatchId"],WR=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],pq=[...WR,"documentOverlays"],KR=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],QR=KR,FI=[...QR,"indexConfiguration","indexState","indexEntries"],gq=FI,mq=[...FI,"globals"];var hl=class extends ip{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function xt(n,e){let t=H(n);return no.F(t._e,e)}function Ux(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function hs(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function YR(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Qe=class n{constructor(e,t){this.comparator=e,this.root=t||Pr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Pr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ja(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ja(this.root,e,this.comparator,!1)}getReverseIterator(){return new ja(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ja(this.root,e,this.comparator,!0)}},ja=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Pr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Z();let e=this.left.check();if(e!==this.right.check())throw Z();return e+(this.isRed()?0:1)}};Pr.EMPTY=null,Pr.RED=!0,Pr.BLACK=!1;Pr.EMPTY=new class{constructor(){this.size=0}get key(){throw Z()}get value(){throw Z()}get color(){throw Z()}get left(){throw Z()}get right(){throw Z()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Pr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var $e=class n{constructor(e){this.comparator=e,this.data=new Qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new sp(this.data.getIterator())}getIteratorFrom(e){return new sp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},sp=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function xa(n){return n.hasNext()?n.getNext():void 0}var Rn=class n{constructor(e){this.fields=e,e.sort(lt.comparator)}static empty(){return new n([])}unionWith(e){let t=new $e(lt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return qa(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var ap=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function ZR(){return typeof atob<"u"}var ht=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new ap("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ht.EMPTY_BYTE_STRING=new ht("");var yq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hi(n){if(ee(!!n),typeof n=="string"){let e=0,t=yq.exec(n);if(ee(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:et(n.seconds),nanos:et(n.nanos)}}function et(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ro(n){return typeof n=="string"?ht.fromBase64String(n):ht.fromUint8Array(n)}function Jp(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function VI(n){let e=n.mapValue.fields.__previous_value__;return Jp(e)?VI(e):e}function fl(n){let e=hi(n.mapValue.fields.__local_write_time__.timestampValue);return new Ke(e.seconds,e.nanos)}var zw=class{constructor(e,t,r,i,o,s,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},io=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Xi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Zf={nullValue:"NULL_VALUE"};function ts(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Jp(n)?4:JR(n)?9007199254740991:Xp(n)?10:11:Z()}function Fr(n,e){if(n===e)return!0;let t=ts(n);if(t!==ts(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return fl(n).isEqual(fl(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=hi(i.timestampValue),a=hi(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return ro(i.bytesValue).isEqual(ro(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return et(i.geoPointValue.latitude)===et(o.geoPointValue.latitude)&&et(i.geoPointValue.longitude)===et(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return et(i.integerValue)===et(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=et(i.doubleValue),a=et(o.doubleValue);return s===a?dl(s)===dl(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return qa(n.arrayValue.values||[],e.arrayValue.values||[],Fr);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(Ux(s)!==Ux(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Fr(s[u],a[u])))return!1;return!0}(n,e);default:return Z()}}function pl(n,e){return(n.values||[]).find(t=>Fr(t,e))!==void 0}function oo(n,e){if(n===e)return 0;let t=ts(n),r=ts(e);if(t!==r)return ue(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ue(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=et(o.integerValue||o.doubleValue),u=et(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return Bx(n.timestampValue,e.timestampValue);case 4:return Bx(fl(n),fl(e));case 5:return ue(n.stringValue,e.stringValue);case 6:return function(o,s){let a=ro(o),u=ro(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let d=ue(a[l],u[l]);if(d!==0)return d}return ue(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ue(et(o.latitude),et(s.latitude));return a!==0?a:ue(et(o.longitude),et(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return $x(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,d;let f=o.fields||{},g=s.fields||{},y=(a=f.value)===null||a===void 0?void 0:a.arrayValue,D=(u=g.value)===null||u===void 0?void 0:u.arrayValue,C=ue(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((d=D?.values)===null||d===void 0?void 0:d.length)||0);return C!==0?C:$x(y,D)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Xi.mapValue&&s===Xi.mapValue)return 0;if(o===Xi.mapValue)return 1;if(s===Xi.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},d=Object.keys(l);u.sort(),d.sort();for(let f=0;f<u.length&&f<d.length;++f){let g=ue(u[f],d[f]);if(g!==0)return g;let y=oo(a[u[f]],l[d[f]]);if(y!==0)return y}return ue(u.length,d.length)}(n.mapValue,e.mapValue);default:throw Z()}}function Bx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ue(n,e);let t=hi(n),r=hi(e),i=ue(t.seconds,r.seconds);return i!==0?i:ue(t.nanos,r.nanos)}function $x(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=oo(t[i],r[i]);if(o)return o}return ue(t.length,r.length)}function za(n){return Gw(n)}function Gw(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=hi(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ro(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return z.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Gw(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Gw(t.fields[s])}`;return i+"}"}(n.mapValue):Z()}function ns(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ww(n){return!!n&&"integerValue"in n}function gl(n){return!!n&&"arrayValue"in n}function qx(n){return!!n&&"nullValue"in n}function Hx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Jf(n){return!!n&&"mapValue"in n}function Xp(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function ol(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return hs(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ol(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ol(n.arrayValue.values[t]);return e}return Object.assign({},n)}function JR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var XR={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function vq(n){return"nullValue"in n?Zf:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ns(io.empty(),z.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Xp(n)?XR:{mapValue:{}}:Z()}function _q(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ns(io.empty(),z.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?XR:"mapValue"in n?Xp(n)?{mapValue:{}}:Xi:Z()}function zx(n,e){let t=oo(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Gx(n,e){let t=oo(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var Qt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Jf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ol(t)}setAll(e){let t=lt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=ol(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Jf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Fr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Jf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){hs(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(ol(this.value))}};function eN(n){let e=[];return hs(n.fields,(t,r)=>{let i=new lt([t]);if(Jf(r)){let o=eN(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Rn(e)}var Et=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ie.min(),ie.min(),ie.min(),Qt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ie.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ie.min(),ie.min(),Qt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ie.min(),ie.min(),Qt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Vr=class{constructor(e,t){this.position=e,this.inclusive=t}};function Wx(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=z.comparator(z.fromName(s.referenceValue),t.key):r=oo(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Kx(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Fr(n.position[t],e.position[t]))return!1;return!0}var rs=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function wq(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var up=class{},Ie=class n extends up{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Yw(e,t,r):t==="array-contains"?new Xw(e,r):t==="in"?new cp(e,r):t==="not-in"?new e0(e,r):t==="array-contains-any"?new t0(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Zw(e,r):new Jw(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(oo(t,this.value)):t!==null&&ts(this.value)===ts(t)&&this.matchesComparison(oo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Oe=class n extends up{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return Ga(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Ga(n){return n.op==="and"}function Kw(n){return n.op==="or"}function LI(n){return tN(n)&&Ga(n)}function tN(n){for(let e of n.filters)if(e instanceof Oe)return!1;return!0}function Qw(n){if(n instanceof Ie)return n.field.canonicalString()+n.op.toString()+za(n.value);if(LI(n))return n.filters.map(e=>Qw(e)).join(",");{let e=n.filters.map(t=>Qw(t)).join(",");return`${n.op}(${e})`}}function nN(n,e){return n instanceof Ie?function(r,i){return i instanceof Ie&&r.op===i.op&&r.field.isEqual(i.field)&&Fr(r.value,i.value)}(n,e):n instanceof Oe?function(r,i){return i instanceof Oe&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&nN(s,i.filters[a]),!0):!1}(n,e):void Z()}function rN(n,e){let t=n.filters.concat(e);return Oe.create(t,n.op)}function iN(n){return n instanceof Ie?function(t){return`${t.field.canonicalString()} ${t.op} ${za(t.value)}`}(n):n instanceof Oe?function(t){return t.op.toString()+" {"+t.getFilters().map(iN).join(" ,")+"}"}(n):"Filter"}var Yw=class extends Ie{constructor(e,t,r){super(e,t,r),this.key=z.fromName(r.referenceValue)}matches(e){let t=z.comparator(e.key,this.key);return this.matchesComparison(t)}},Zw=class extends Ie{constructor(e,t){super(e,"in",t),this.keys=oN("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Jw=class extends Ie{constructor(e,t){super(e,"not-in",t),this.keys=oN("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function oN(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>z.fromName(r.referenceValue))}var Xw=class extends Ie{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return gl(t)&&pl(t.arrayValue,this.value)}},cp=class extends Ie{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&pl(this.value.arrayValue,t)}},e0=class extends Ie{constructor(e,t){super(e,"not-in",t)}matches(e){if(pl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!pl(this.value.arrayValue,t)}},t0=class extends Ie{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!gl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>pl(this.value.arrayValue,r))}};var n0=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function r0(n,e=null,t=[],r=[],i=null,o=null,s=null){return new n0(n,e,t,r,i,o,s)}function is(n){let e=H(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Qw(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Rl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>za(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>za(r)).join(",")),e.ue=t}return e.ue}function Nl(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!wq(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!nN(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Kx(n.startAt,e.startAt)&&Kx(n.endAt,e.endAt)}function lp(n){return z.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function dp(n,e){return n.filters.filter(t=>t instanceof Ie&&t.field.isEqual(e))}function Qx(n,e,t){let r=Zf,i=!0;for(let o of dp(n,e)){let s=Zf,a=!0;switch(o.op){case"<":case"<=":s=vq(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Zf}zx({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];zx({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function Yx(n,e,t){let r=Xi,i=!0;for(let o of dp(n,e)){let s=Xi,a=!0;switch(o.op){case">=":case">":s=_q(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Xi}Gx({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];Gx({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var ur=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function sN(n,e,t,r,i,o,s,a){return new ur(n,e,t,r,i,o,s,a)}function au(n){return new ur(n)}function Zx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function jI(n){return n.collectionGroup!==null}function Ba(n){let e=H(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new $e(lt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new rs(o,r))}),t.has(lt.keyField().canonicalString())||e.ce.push(new rs(lt.keyField(),r))}return e.ce}function cn(n){let e=H(n);return e.le||(e.le=Iq(e,Ba(n))),e.le}function Iq(n,e){if(n.limitType==="F")return r0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new rs(i.field,o)});let t=n.endAt?new Vr(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Vr(n.startAt.position,n.startAt.inclusive):null;return r0(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function i0(n,e){let t=n.filters.concat([e]);return new ur(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function hp(n,e,t){return new ur(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Pl(n,e){return Nl(cn(n),cn(e))&&n.limitType===e.limitType}function aN(n){return`${is(cn(n))}|lt:${n.limitType}`}function ka(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>iN(i)).join(", ")}]`),Rl(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>za(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>za(i)).join(",")),`Target(${r})`}(cn(n))}; limitType=${n.limitType})`}function Ol(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):z.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Ba(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=Wx(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Ba(r),i)||r.endAt&&!function(s,a,u){let l=Wx(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Ba(r),i))}(n,e)}function uN(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function cN(n){return(e,t)=>{let r=!1;for(let i of Ba(n)){let o=Eq(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Eq(n,e,t){let r=n.field.isKeyField()?z.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?oo(u,l):Z()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Z()}}var Lr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){hs(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return YR(this.inner)}size(){return this.innerSize}};var Dq=new Qe(z.comparator);function vn(){return Dq}var lN=new Qe(z.comparator);function rl(...n){let e=lN;for(let t of n)e=e.insert(t.key,t);return e}function dN(n){let e=lN;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Nr(){return sl()}function hN(){return sl()}function sl(){return new Lr(n=>n.toString(),(n,e)=>n.isEqual(e))}var Cq=new Qe(z.comparator),bq=new $e(z.comparator);function de(...n){let e=bq;for(let t of n)e=e.add(t);return e}var Tq=new $e(ue);function UI(){return Tq}function BI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dl(e)?"-0":e}}function fN(n){return{integerValue:""+n}}function pN(n,e){return zR(e)?fN(e):BI(n,e)}var Wa=class{constructor(){this._=void 0}};function Aq(n,e,t){return n instanceof so?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Jp(o)&&(o=VI(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof fi?mN(n,e):n instanceof pi?yN(n,e):function(i,o){let s=gN(i,o),a=Jx(s)+Jx(i.Pe);return Ww(s)&&Ww(i.Pe)?fN(a):BI(i.serializer,a)}(n,e)}function Sq(n,e,t){return n instanceof fi?mN(n,e):n instanceof pi?yN(n,e):t}function gN(n,e){return n instanceof ao?function(r){return Ww(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var so=class extends Wa{},fi=class extends Wa{constructor(e){super(),this.elements=e}};function mN(n,e){let t=vN(e);for(let r of n.elements)t.some(i=>Fr(i,r))||t.push(r);return{arrayValue:{values:t}}}var pi=class extends Wa{constructor(e){super(),this.elements=e}};function yN(n,e){let t=vN(e);for(let r of n.elements)t=t.filter(i=>!Fr(i,r));return{arrayValue:{values:t}}}var ao=class extends Wa{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function Jx(n){return et(n.integerValue||n.doubleValue)}function vN(n){return gl(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var os=class{constructor(e,t){this.field=e,this.transform=t}};function Mq(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof fi&&i instanceof fi||r instanceof pi&&i instanceof pi?qa(r.elements,i.elements,Fr):r instanceof ao&&i instanceof ao?Fr(r.Pe,i.Pe):r instanceof so&&i instanceof so}(n.transform,e.transform)}var o0=class{constructor(e,t){this.version=e,this.transformResults=t}},at=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Xf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Ka=class{};function _N(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new co(n.key,at.none()):new uo(n.key,n.data,at.none());{let t=n.data,r=Qt.empty(),i=new $e(lt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new cr(n.key,r,new Rn(i.toArray()),at.none())}}function xq(n,e,t){n instanceof uo?function(i,o,s){let a=i.value.clone(),u=eR(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof cr?function(i,o,s){if(!Xf(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=eR(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(wN(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function al(n,e,t,r){return n instanceof uo?function(o,s,a,u){if(!Xf(o.precondition,s))return a;let l=o.value.clone(),d=tR(o.fieldTransforms,u,s);return l.setAll(d),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof cr?function(o,s,a,u){if(!Xf(o.precondition,s))return a;let l=tR(o.fieldTransforms,u,s),d=s.data;return d.setAll(wN(o)),d.setAll(l),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(o,s,a){return Xf(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function Rq(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=gN(r.transform,i||null);o!=null&&(t===null&&(t=Qt.empty()),t.set(r.field,o))}return t||null}function Xx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&qa(r,i,(o,s)=>Mq(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var uo=class extends Ka{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},cr=class extends Ka{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function wN(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function eR(n,e,t){let r=new Map;ee(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Sq(s,a,t[i]))}return r}function tR(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,Aq(o,s,e))}return r}var co=class extends Ka{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},ml=class extends Ka{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var yl=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&xq(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=al(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=al(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=hN();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=_N(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ie.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),de())}isEqual(e){return this.batchId===e.batchId&&qa(this.mutations,e.mutations,(t,r)=>Xx(t,r))&&qa(this.baseMutations,e.baseMutations,(t,r)=>Xx(t,r))}},s0=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ee(e.mutations.length===r.length);let i=function(){return Cq}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var vl=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var a0=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var _t,Ce;function IN(n){switch(n){default:return Z();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function EN(n){if(n===void 0)return ct("GRPC error has no .code"),N.UNKNOWN;switch(n){case _t.OK:return N.OK;case _t.CANCELLED:return N.CANCELLED;case _t.UNKNOWN:return N.UNKNOWN;case _t.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case _t.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case _t.INTERNAL:return N.INTERNAL;case _t.UNAVAILABLE:return N.UNAVAILABLE;case _t.UNAUTHENTICATED:return N.UNAUTHENTICATED;case _t.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case _t.NOT_FOUND:return N.NOT_FOUND;case _t.ALREADY_EXISTS:return N.ALREADY_EXISTS;case _t.PERMISSION_DENIED:return N.PERMISSION_DENIED;case _t.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case _t.ABORTED:return N.ABORTED;case _t.OUT_OF_RANGE:return N.OUT_OF_RANGE;case _t.UNIMPLEMENTED:return N.UNIMPLEMENTED;case _t.DATA_LOSS:return N.DATA_LOSS;default:return Z()}}(Ce=_t||(_t={}))[Ce.OK=0]="OK",Ce[Ce.CANCELLED=1]="CANCELLED",Ce[Ce.UNKNOWN=2]="UNKNOWN",Ce[Ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ce[Ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ce[Ce.NOT_FOUND=5]="NOT_FOUND",Ce[Ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ce[Ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ce[Ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ce[Ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ce[Ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ce[Ce.ABORTED=10]="ABORTED",Ce[Ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ce[Ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ce[Ce.INTERNAL=13]="INTERNAL",Ce[Ce.UNAVAILABLE=14]="UNAVAILABLE",Ce[Ce.DATA_LOSS=15]="DATA_LOSS";var nR=null;function DN(){return new TextEncoder}var Nq=new Ki([4294967295,4294967295],0);function rR(n){let e=DN().encode(n),t=new Ew;return t.update(e),new Uint8Array(t.digest())}function iR(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ki([t,r],0),new Ki([i,o],0)]}var u0=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Xo(`Invalid padding: ${t}`);if(r<0)throw new Xo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Xo(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Xo(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Ki.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Ki.fromNumber(r)));return i.compare(Nq)===1&&(i=new Ki([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=rR(e),[r,i]=iR(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=rR(e),[r,i]=iR(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Xo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var _l=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,wl.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ie.min(),i,new Qe(ue),vn(),de())}},wl=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,de(),de(),de())}};var $a=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},fp=class{constructor(e,t){this.targetId=e,this.me=t}},pp=class{constructor(e,t,r=ht.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},gp=class{constructor(){this.fe=0,this.ge=sR(),this.pe=ht.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=de(),t=de(),r=de();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Z()}}),new wl(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=sR()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ee(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},c0=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=vn(),this.qe=oR(),this.Qe=new Qe(ue)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Z()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(lp(o))if(r===0){let s=new z(o.path);this.Ue(t,s,Et.newNoDocument(s,ie.min()))}else ee(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),u=a?this.Xe(a,e,s):1;if(u!==0){this.je(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}nR?.et(function(d,f,g,y,D){var C,A,V,G,k,J;let oe={localCacheCount:d,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},re=f.unchangedNames;return re&&(oe.bloomFilter={applied:D===0,hashCount:(C=re?.hashCount)!==null&&C!==void 0?C:0,bitmapLength:(G=(V=(A=re?.bits)===null||A===void 0?void 0:A.bitmap)===null||V===void 0?void 0:V.length)!==null&&G!==void 0?G:0,padding:(J=(k=re?.bits)===null||k===void 0?void 0:k.padding)!==null&&J!==void 0?J:0,mightContain:I=>{var v;return(v=y?.mightContain(I))!==null&&v!==void 0&&v}}),oe}(s,e.me,this.Le.tt(),a,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=ro(r).toUint8Array()}catch(u){if(u instanceof ap)return ar("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new u0(s,i,o)}catch(u){return ar(u instanceof Xo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&lp(a.target)){let u=new z(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,Et.newNoDocument(u,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=de();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new _l(e,t,this.Qe,this.ke,r);return this.ke=vn(),this.qe=oR(),this.Qe=new Qe(ue),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new gp,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new $e(ue),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||L("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new gp),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function oR(){return new Qe(z.comparator)}function sR(){return new Qe(z.comparator)}var Pq={asc:"ASCENDING",desc:"DESCENDING"},Oq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kq={and:"AND",or:"OR"},l0=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function d0(n,e){return n.useProto3Json||Rl(e)?e:{value:e}}function Qa(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function CN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Fq(n,e){return Qa(n,e.toTimestamp())}function dt(n){return ee(!!n),ie.fromTimestamp(function(t){let r=hi(t);return new Ke(r.seconds,r.nanos)}(n))}function $I(n,e){return h0(n,e).canonicalString()}function h0(n,e){let t=function(i){return new be(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function bN(n){let e=be.fromString(n);return ee(kN(e)),e}function Il(n,e){return $I(n.databaseId,e.path)}function Or(n,e){let t=bN(e);if(t.get(1)!==n.databaseId.projectId)throw new F(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new F(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new z(SN(t))}function TN(n,e){return $I(n.databaseId,e)}function AN(n){let e=bN(n);return e.length===4?be.emptyPath():SN(e)}function f0(n){return new be(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function SN(n){return ee(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function aR(n,e,t){return{name:Il(n,e),fields:t.value.mapValue.fields}}function MN(n,e,t){let r=Or(n,e.name),i=dt(e.updateTime),o=e.createTime?dt(e.createTime):ie.min(),s=new Qt({mapValue:{fields:e.fields}}),a=Et.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function Vq(n,e){return"found"in e?function(r,i){ee(!!i.found),i.found.name,i.found.updateTime;let o=Or(r,i.found.name),s=dt(i.found.updateTime),a=i.found.createTime?dt(i.found.createTime):ie.min(),u=new Qt({mapValue:{fields:i.found.fields}});return Et.newFoundDocument(o,s,a,u)}(n,e):"missing"in e?function(r,i){ee(!!i.missing),ee(!!i.readTime);let o=Or(r,i.missing),s=dt(i.readTime);return Et.newNoDocument(o,s)}(n,e):Z()}function Lq(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,d){return l.useProto3Json?(ee(d===void 0||typeof d=="string"),ht.fromBase64String(d||"")):(ee(d===void 0||d instanceof Buffer||d instanceof Uint8Array),ht.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let d=l.code===void 0?N.UNKNOWN:EN(l.code);return new F(d,l.message||"")}(s);t=new pp(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Or(n,r.document.name),o=dt(r.document.updateTime),s=r.document.createTime?dt(r.document.createTime):ie.min(),a=new Qt({mapValue:{fields:r.document.fields}}),u=Et.newFoundDocument(i,o,s,a),l=r.targetIds||[],d=r.removedTargetIds||[];t=new $a(l,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Or(n,r.document),o=r.readTime?dt(r.readTime):ie.min(),s=Et.newNoDocument(i,o),a=r.removedTargetIds||[];t=new $a([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Or(n,r.document),o=r.removedTargetIds||[];t=new $a([],o,i,null)}else{if(!("filter"in e))return Z();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new a0(i,o),a=r.targetId;t=new fp(a,s)}}return t}function El(n,e){let t;if(e instanceof uo)t={update:aR(n,e.key,e.value)};else if(e instanceof co)t={delete:Il(n,e.key)};else if(e instanceof cr)t={update:aR(n,e.key,e.data),updateMask:Hq(e.fieldMask)};else{if(!(e instanceof ml))return Z();t={verify:Il(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof so)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof fi)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof pi)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ao)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw Z()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:Fq(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Z()}(n,e.precondition)),t}function p0(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?at.updateTime(dt(o.updateTime)):o.exists!==void 0?at.exists(o.exists):at.none()}(e.currentDocument):at.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)ee(a.setToServerValue==="REQUEST_TIME"),u=new so;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];u=new fi(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];u=new pi(d)}else"increment"in a?u=new ao(s,a.increment):Z();let l=lt.fromServerFormat(a.fieldPath);return new os(l,u)}(n,i)):[];if(e.update){e.update.name;let i=Or(n,e.update.name),o=new Qt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let l=u.fieldPaths||[];return new Rn(l.map(d=>lt.fromServerFormat(d)))}(e.updateMask);return new cr(i,o,s,t,r)}return new uo(i,o,t,r)}if(e.delete){let i=Or(n,e.delete);return new co(i,t)}if(e.verify){let i=Or(n,e.verify);return new ml(i,t)}return Z()}function jq(n,e){return n&&n.length>0?(ee(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?dt(i.updateTime):dt(o);return s.isEqual(ie.min())&&(s=dt(o)),new o0(s,i.transformResults||[])}(t,e))):[]}function xN(n,e){return{documents:[TN(n,e.path)]}}function RN(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=TN(n,i);let o=function(l){if(l.length!==0)return ON(Oe.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(d=>function(g){return{field:Fa(g.field),direction:Bq(g.dir)}}(d))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=d0(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function NN(n){let e=AN(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ee(r===1);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];t.where&&(o=function(f){let g=PN(f);return g instanceof Oe&&LI(g)?g.getFilters():[g]}(t.where));let s=[];t.orderBy&&(s=function(f){return f.map(g=>function(D){return new rs(Va(D.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,Rl(g)?null:g}(t.limit));let u=null;t.startAt&&(u=function(f){let g=!!f.before,y=f.values||[];return new Vr(y,g)}(t.startAt));let l=null;return t.endAt&&(l=function(f){let g=!f.before,y=f.values||[];return new Vr(y,g)}(t.endAt)),sN(e,i,s,o,a,"F",u,l)}function Uq(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function PN(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Va(t.unaryFilter.field);return Ie.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Va(t.unaryFilter.field);return Ie.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Va(t.unaryFilter.field);return Ie.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Va(t.unaryFilter.field);return Ie.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Z()}}(n):n.fieldFilter!==void 0?function(t){return Ie.create(Va(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Z()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Oe.create(t.compositeFilter.filters.map(r=>PN(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Z()}}(t.compositeFilter.op))}(n):Z()}function Bq(n){return Pq[n]}function $q(n){return Oq[n]}function qq(n){return kq[n]}function Fa(n){return{fieldPath:n.canonicalString()}}function Va(n){return lt.fromServerFormat(n.fieldPath)}function ON(n){return n instanceof Ie?function(t){if(t.op==="=="){if(Hx(t.value))return{unaryFilter:{field:Fa(t.field),op:"IS_NAN"}};if(qx(t.value))return{unaryFilter:{field:Fa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Hx(t.value))return{unaryFilter:{field:Fa(t.field),op:"IS_NOT_NAN"}};if(qx(t.value))return{unaryFilter:{field:Fa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fa(t.field),op:$q(t.op),value:t.value}}}(n):n instanceof Oe?function(t){let r=t.getFilters().map(i=>ON(i));return r.length===1?r[0]:{compositeFilter:{op:qq(t.op),filters:r}}}(n):Z()}function Hq(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function kN(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Ya=class n{constructor(e,t,r,i,o=ie.min(),s=ie.min(),a=ht.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var mp=class{constructor(e){this.ct=e}};function zq(n,e){let t;if(e.document)t=MN(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=z.fromSegments(e.noDocument.path),i=as(e.noDocument.readTime);t=Et.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Z();{let r=z.fromSegments(e.unknownDocument.path),i=as(e.unknownDocument.version);t=Et.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new Ke(i[0],i[1]);return ie.fromTimestamp(o)}(e.readTime)),t}function uR(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:yp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Il(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Qa(o,s.version.toTimestamp()),createTime:Qa(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ss(e.version)};else{if(!e.isUnknownDocument())return Z();r.unknownDocument={path:t.path.toArray(),version:ss(e.version)}}return r}function yp(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ss(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function as(n){let e=new Ke(n.seconds,n.nanoseconds);return ie.fromTimestamp(e)}function Yo(n,e){let t=(e.baseMutations||[]).map(o=>p0(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>p0(n.ct,o)),i=Ke.fromMillis(e.localWriteTimeMs);return new yl(e.batchId,i,t,r)}function il(n){let e=as(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?as(n.lastLimboFreeSnapshotVersion):ie.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return ee(o.documents.length===1),cn(au(AN(o.documents[0])))}(n.query):function(o){return cn(NN(o))}(n.query),new Ya(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,ht.fromBase64String(n.resumeToken))}function FN(n,e){let t=ss(e.snapshotVersion),r=ss(e.lastLimboFreeSnapshotVersion),i;i=lp(e.target)?xN(n.ct,e.target):RN(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:is(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function qI(n){let e=NN({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?hp(e,e.limit,"L"):e}function Sw(n,e){return new vl(e.largestBatchId,p0(n.ct,e.overlayMutation))}function cR(n,e){let t=e.path.lastSegment();return[n,un(e.path.popLast()),t]}function lR(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:ss(r.readTime),documentKey:un(r.documentKey.path),largestBatchId:r.largestBatchId}}var g0=class{getBundleMetadata(e,t){return dR(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:as(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return dR(e).put(function(i){return{bundleId:i.id,createTime:ss(dt(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return hR(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:qI(o.bundledQuery),readTime:as(o.readTime)}}(r)})}saveNamedQuery(e,t){return hR(e).put(function(i){return{name:i.name,readTime:ss(dt(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function dR(n){return xt(n,"bundles")}function hR(n){return xt(n,"namedQueries")}var vp=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return Xc(e).get(cR(this.userId,t)).next(r=>r?Sw(this.serializer,r):null)}getOverlays(e,t){let r=Nr();return M.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new vl(t,s);i.push(this.ht(e,a))}),M.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(un(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Xc(e).j("collectionPathOverlayIndex",a))}),M.waitFor(o)}getOverlaysForCollection(e,t,r){let i=Nr(),o=un(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Xc(e).U("collectionPathOverlayIndex",s).next(a=>{for(let u of a){let l=Sw(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=Nr(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Xc(e).J({index:"collectionGroupOverlayIndex",range:a},(u,l,d)=>{let f=Sw(this.serializer,l);o.size()<i||f.largestBatchId===s?(o.set(f.getKey(),f),s=f.largestBatchId):d.done()}).next(()=>o)}ht(e,t){return Xc(e).put(function(i,o,s){let[a,u,l]=cR(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:El(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function Xc(n){return xt(n,"documentOverlays")}var m0=class{Pt(e){return xt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?ht.fromUint8Array(r):ht.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var li=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(et(e.integerValue));else if("doubleValue"in e){let r=et(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),dl(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=hi(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(ro(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?JR(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Xp(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Z()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(et(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),z.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};li.vt=new li;function Gq(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function fR(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=Gq(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var y0=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=fR(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=fR(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},v0=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},_0=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},Zo=class{constructor(){this.jt=new y0,this.Ht=new v0(this.jt),this.Jt=new _0(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var Jo=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function Qi(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=pR(n.arrayValue,e.arrayValue),t!==0?t:(t=pR(n.directionalValue,e.directionalValue),t!==0?t:z.comparator(n.documentKey,e.documentKey)))}function pR(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var _p=class{constructor(e){this.Xt=new $e((t,r)=>lt.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(ee(e.collectionGroup===this.collectionId),this.nn)return!1;let t=Uw(e);if(t!==void 0&&!this.sn(t))return!1;let r=Ko(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.on(a,u)||!this._n(this.en[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new $e(lt.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Ua(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Ua(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Ua(r.field,r.dir==="asc"?0:1)));return new Ha(Ha.UNKNOWN_ID,this.collectionId,t,ll.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function VN(n){var e,t;if(ee(n instanceof Ie||n instanceof Oe),n instanceof Ie){if(n instanceof cp){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>Ie.create(n.field,"==",o)))||[];return Oe.create(i,"or")}return n}let r=n.filters.map(i=>VN(i));return Oe.create(r,n.op)}function Wq(n){if(n.getFilters().length===0)return[];let e=E0(VN(n));return ee(LN(e)),w0(e)||I0(e)?[e]:e.getFilters()}function w0(n){return n instanceof Ie}function I0(n){return n instanceof Oe&&LI(n)}function LN(n){return w0(n)||I0(n)||function(t){if(t instanceof Oe&&Kw(t)){for(let r of t.getFilters())if(!w0(r)&&!I0(r))return!1;return!0}return!1}(n)}function E0(n){if(ee(n instanceof Ie||n instanceof Oe),n instanceof Ie)return n;if(n.filters.length===1)return E0(n.filters[0]);let e=n.filters.map(r=>E0(r)),t=Oe.create(e,n.op);return t=wp(t),LN(t)?t:(ee(t instanceof Oe),ee(Ga(t)),ee(t.filters.length>1),t.filters.reduce((r,i)=>HI(r,i)))}function HI(n,e){let t;return ee(n instanceof Ie||n instanceof Oe),ee(e instanceof Ie||e instanceof Oe),t=n instanceof Ie?e instanceof Ie?function(i,o){return Oe.create([i,o],"and")}(n,e):gR(n,e):e instanceof Ie?gR(e,n):function(i,o){if(ee(i.filters.length>0&&o.filters.length>0),Ga(i)&&Ga(o))return rN(i,o.getFilters());let s=Kw(i)?i:o,a=Kw(i)?o:i,u=s.filters.map(l=>HI(l,a));return Oe.create(u,"or")}(n,e),wp(t)}function gR(n,e){if(Ga(e))return rN(e,n.getFilters());{let t=e.filters.map(r=>HI(n,r));return Oe.create(t,"or")}}function wp(n){if(ee(n instanceof Ie||n instanceof Oe),n instanceof Ie)return n;let e=n.getFilters();if(e.length===1)return wp(e[0]);if(tN(n))return n;let t=e.map(i=>wp(i)),r=[];return t.forEach(i=>{i instanceof Ie?r.push(i):i instanceof Oe&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Oe.create(r,n.op)}var D0=class{constructor(){this.un=new Dl}addToCollectionParentIndex(e,t){return this.un.add(t),M.resolve()}getCollectionParents(e,t){return M.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return M.resolve()}deleteFieldIndex(e,t){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,t){return M.resolve()}getDocumentsMatchingTarget(e,t){return M.resolve(null)}getIndexType(e,t){return M.resolve(0)}getFieldIndexes(e,t){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,t){return M.resolve(Wn.min())}getMinOffsetFromCollectionGroup(e,t){return M.resolve(Wn.min())}updateCollectionGroup(e,t,r){return M.resolve()}updateIndexEntries(e,t){return M.resolve()}},Dl=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new $e(be.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new $e(be.comparator)).toArray()}};var Gf=new Uint8Array(0),C0=class{constructor(e,t){this.databaseId=t,this.cn=new Dl,this.ln=new Lr(r=>is(r),(r,i)=>Nl(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:un(i)};return mR(e).put(o)}return M.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[UR(t),""],!1,!0);return mR(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(Rr(s.parent))}return r})}addFieldIndex(e,t){let r=el(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=Na(e);return o.next(a=>{s.put(lR(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=el(e),i=Na(e),o=Ra(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=el(e),r=Ra(e),i=Na(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return M.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new _p(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=Ra(e),i=!0,o=new Map;return M.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=de(),a=[];return M.forEach(o,(u,l)=>{L("IndexedDbIndexManager",`Using index ${function(k){return`id=${k.indexId}|cg=${k.collectionGroup}|f=${k.fields.map(J=>`${J.fieldPath}:${J.kind}`).join(",")}`}(u)} to execute ${is(t)}`);let d=function(k,J){let oe=Uw(J);if(oe===void 0)return null;for(let re of dp(k,oe.fieldPath))switch(re.op){case"array-contains-any":return re.value.arrayValue.values||[];case"array-contains":return[re.value]}return null}(l,u),f=function(k,J){let oe=new Map;for(let re of Ko(J))for(let I of dp(k,re.fieldPath))switch(I.op){case"==":case"in":oe.set(re.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return oe.set(re.fieldPath.canonicalString(),I.value),Array.from(oe.values())}return null}(l,u),g=function(k,J){let oe=[],re=!0;for(let I of Ko(J)){let v=I.kind===0?Qx(k,I.fieldPath,k.startAt):Yx(k,I.fieldPath,k.startAt);oe.push(v.value),re&&(re=v.inclusive)}return new Vr(oe,re)}(l,u),y=function(k,J){let oe=[],re=!0;for(let I of Ko(J)){let v=I.kind===0?Yx(k,I.fieldPath,k.endAt):Qx(k,I.fieldPath,k.endAt);oe.push(v.value),re&&(re=v.inclusive)}return new Vr(oe,re)}(l,u),D=this.In(u,l,g),C=this.In(u,l,y),A=this.Tn(u,l,f),V=this.En(u.indexId,d,D,g.inclusive,C,y.inclusive,A);return M.forEach(V,G=>r.G(G,t.limit).next(k=>{k.forEach(J=>{let oe=z.fromSegments(J.documentKey);s.has(oe)||(s=s.add(oe),a.push(oe))})}))}).next(()=>a)}return M.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=Wq(Oe.create(e.filters,"and")).map(r=>r0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let u=(t!=null?t.length:1)*Math.max(r.length,o.length),l=u/(t!=null?t.length:1),d=[];for(let f=0;f<u;++f){let g=t?this.dn(t[f/l]):Gf,y=this.An(e,g,r[f%l],i),D=this.Rn(e,g,o[f%l],s),C=a.map(A=>this.An(e,g,A,!0));d.push(...this.createRange(y,D,C))}return d}An(e,t,r,i){let o=new Jo(e,z.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new Jo(e,z.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new _p(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return M.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let l=new $e(lt.comparator),d=!1;for(let f of u.filters)for(let g of f.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?d=!0:l=l.add(g.field));for(let f of u.orderBy)f.field.isKeyField()||(l=l.add(f.field));return l.size+(d?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new Zo;for(let i of Ko(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);li.vt.It(o,s)}return r.zt()}dn(e){let t=new Zo;return li.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new Zo;return li.vt.It(ns(this.databaseId,t),r.Yt(function(o){let s=Ko(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new Zo);let o=0;for(let s of Ko(e)){let a=r[o++];for(let u of i)if(this.fn(t,s.fieldPath)&&gl(a))i=this.gn(i,s,a);else{let l=u.Yt(s.kind);li.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new Zo;u.seed(a.zt()),li.vt.It(s,u.Yt(t.kind)),o.push(u)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof Ie&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=el(e),i=Na(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return M.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(d,f){let g=f?new ll(f.sequenceNumber,new Wn(as(f.readTime),new z(Rr(f.documentKey)),f.largestBatchId)):ll.empty(),y=d.fields.map(([D,C])=>new Ua(lt.fromServerFormat(D),C));return new Ha(d.indexId,d.collectionGroup,y,g)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:ue(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=el(e),o=Na(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>M.forEach(a,u=>o.put(lR(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return M.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?M.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),M.forEach(a,u=>this.wn(e,i,u).next(l=>{let d=this.Sn(o,u);return l.isEqual(d)?M.resolve():this.bn(e,o,u,l,d)}))))})}Dn(e,t,r,i){return Ra(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Ra(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=Ra(e),o=new $e(Qi);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new Jo(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new $e(Qi),i=this.Vn(t,e);if(i==null)return r;let o=Uw(t);if(o!=null){let s=e.data.field(o.fieldPath);if(gl(s))for(let a of s.arrayValue.values||[])r=r.add(new Jo(t.indexId,e.key,this.dn(a),i))}else r=r.add(new Jo(t.indexId,e.key,Gf,i));return r}bn(e,t,r,i,o){L("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(u,l,d,f,g){let y=u.getIterator(),D=l.getIterator(),C=xa(y),A=xa(D);for(;C||A;){let V=!1,G=!1;if(C&&A){let k=d(C,A);k<0?G=!0:k>0&&(V=!0)}else C!=null?G=!0:V=!0;V?(f(A),A=xa(D)):G?(g(C),C=xa(y)):(C=xa(y),A=xa(D))}}(i,o,Qi,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),M.waitFor(s)}yn(e){let t=1;return Na(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>Qi(s,a)).filter((s,a,u)=>!a||Qi(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Qi(s,e),u=Qi(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&u<0)i.push(s),i.push(s.Zt());else if(u>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Gf,[]],u=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Gf,[]];o.push(IDBKeyRange.bound(a,u))}return o}Cn(e,t){return Qi(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(yR)}getMinOffset(e,t){return M.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||Z())).next(yR)}};function mR(n){return xt(n,"collectionParents")}function Ra(n){return xt(n,"indexEntries")}function el(n){return xt(n,"indexConfiguration")}function Na(n){return xt(n,"indexState")}function yR(n){ee(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;OI(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Wn(e.readTime,e.documentKey,t)}var vR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Gn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function jN(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,u=r.J({range:s},(d,f,g)=>(a++,g.delete()));o.push(u.next(()=>{ee(a===1)}));let l=[];for(let d of t.mutations){let f=GR(e,d.key.path,t.batchId);o.push(i.delete(f)),l.push(d.key)}return M.waitFor(o).next(()=>l)}function Ip(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Z();e=n.noDocument}return JSON.stringify(e).length}Gn.DEFAULT_COLLECTION_PERCENTILE=10,Gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gn.DEFAULT=new Gn(41943040,Gn.DEFAULT_COLLECTION_PERCENTILE,Gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gn.DISABLED=new Gn(-1,0,0);var Ep=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){ee(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Yi(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=La(e),s=Yi(e);return s.add({}).next(a=>{ee(typeof a=="number");let u=new yl(a,t,r,i),l=function(y,D,C){let A=C.baseMutations.map(G=>El(y.ct,G)),V=C.mutations.map(G=>El(y.ct,G));return{userId:D,batchId:C.batchId,localWriteTimeMs:C.localWriteTime.toMillis(),baseMutations:A,mutations:V}}(this.serializer,this.userId,u),d=[],f=new $e((g,y)=>ue(g.canonicalString(),y.canonicalString()));for(let g of i){let y=GR(this.userId,g.key.path,a);f=f.add(g.key.path.popLast()),d.push(s.put(l)),d.push(o.put(y,X4))}return f.forEach(g=>{d.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),M.waitFor(d).next(()=>u)})}lookupMutationBatch(e,t){return Yi(e).get(t).next(r=>r?(ee(r.userId===this.userId),Yo(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?M.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Yi(e).J({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(ee(a.batchId>=r),o=Yo(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Yi(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Yi(e).U("userMutationsIndex",t).next(r=>r.map(i=>Yo(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=Yf(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return La(e).J({range:i},(s,a,u)=>{let[l,d,f]=s,g=Rr(d);if(l===this.userId&&t.path.isEqual(g))return Yi(e).get(f).next(y=>{if(!y)throw Z();ee(y.userId===this.userId),o.push(Yo(this.serializer,y))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new $e(ue),i=[];return t.forEach(o=>{let s=Yf(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=La(e).J({range:a},(l,d,f)=>{let[g,y,D]=l,C=Rr(y);g===this.userId&&o.path.isEqual(C)?r=r.add(D):f.done()});i.push(u)}),M.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=Yf(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new $e(ue);return La(e).J({range:s},(u,l,d)=>{let[f,g,y]=u,D=Rr(g);f===this.userId&&r.isPrefixOf(D)?D.length===i&&(a=a.add(y)):d.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(Yi(e).get(o).next(s=>{if(s===null)throw Z();ee(s.userId===this.userId),r.push(Yo(this.serializer,s))}))}),M.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return jN(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),M.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return M.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return La(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=Rr(o[1]);i.push(u)}else a.done()}).next(()=>{ee(i.length===0)})})}containsKey(e,t){return UN(e,this.userId,t)}Nn(e){return BN(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function UN(n,e,t){let r=Yf(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return La(n).J({range:o,H:!0},(a,u,l)=>{let[d,f,g]=a;d===e&&f===i&&(s=!0),l.done()}).next(()=>s)}function Yi(n){return xt(n,"mutations")}function La(n){return xt(n,"documentMutations")}function BN(n){return xt(n,"mutationQueues")}var Za=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var b0=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new Za(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>ie.fromTimestamp(new Ke(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Pa(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(ee(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return Pa(e).J((s,a)=>{let u=il(a);u.sequenceNumber<=t&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>M.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Pa(e).J((r,i)=>{let o=il(i);t(o)})}qn(e){return _R(e).get("targetGlobalKey").next(t=>(ee(t!==null),t))}Qn(e,t){return _R(e).put("targetGlobalKey",t)}Kn(e,t){return Pa(e).put(FN(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=is(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Pa(e).J({range:i,index:"queryTargetsIndex"},(s,a,u)=>{let l=il(a);Nl(t,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=Zi(e);return t.forEach(s=>{let a=un(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),M.waitFor(i)}removeMatchingKeys(e,t,r){let i=Zi(e);return M.forEach(t,o=>{let s=un(o.path);return M.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=Zi(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Zi(e),o=de();return i.J({range:r,H:!0},(s,a,u)=>{let l=Rr(s[1]),d=new z(l);o=o.add(d)}).next(()=>o)}containsKey(e,t){let r=un(t.path),i=IDBKeyRange.bound([r],[UR(r)],!1,!0),o=0;return Zi(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],u,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return Pa(e).get(t).next(r=>r?il(r):null)}};function Pa(n){return xt(n,"targets")}function _R(n){return xt(n,"targetGlobal")}function Zi(n){return xt(n,"targetDocuments")}function wR([n,e],[t,r]){let i=ue(n,t);return i===0?ue(e,r):i}var T0=class{constructor(e){this.Un=e,this.buffer=new $e(wR),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();wR(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},A0=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){L("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>x(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){fo(t)?L("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield ho(t)}yield this.Hn(3e5)}))}},S0=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return M.resolve(xn.oe);let r=new T0(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(L("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(vR)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(L("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vR):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,u,l,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(L("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(o=f,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(l=Date.now(),Oa()<=hr.DEBUG&&L("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${f} documents in `+(l-u)+`ms
Total Duration: ${l-d}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}};function Kq(n,e){return new S0(n,e)}var M0=class{constructor(e,t){this.db=e,this.garbageCollector=Kq(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return Wf(e,r)}removeReference(e,t,r){return Wf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Wf(e,t)}nr(e,t){return function(i,o){let s=!1;return BN(i).Y(a=>UN(i,a,o).next(u=>(u&&(s=!0),M.resolve(!u)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let u=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,ie.min()),Zi(e).delete(function(f){return[0,un(f.path)]}(s))))});i.push(u)}}).next(()=>M.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Wf(e,t)}tr(e,t){let r=Zi(e),i,o=xn.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:l})=>{s===0?(o!==xn.oe&&t(new z(Rr(i)),o),o=l,i=u):o=xn.oe}).next(()=>{o!==xn.oe&&t(new z(Rr(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Wf(n,e){return Zi(n).put(function(r,i){return{targetId:0,path:un(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var Dp=class{constructor(){this.changes=new Lr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Et.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?M.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var x0=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Wo(e).put(r)}removeEntry(e,t,r){return Wo(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],yp(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=Et.newInvalidDocument(t);return Wo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(tl(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:Et.newInvalidDocument(t)};return Wo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(tl(t))},(i,o)=>{r={document:this.ir(t,o),size:Ip(o)}}).next(()=>r)}getEntries(e,t){let r=vn();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=vn(),i=new Qe(z.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,Ip(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return M.resolve();let i=new $e(DR);t.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(tl(i.first()),tl(i.last())),s=i.getIterator(),a=s.getNext();return Wo(e).J({index:"documentKeyIndex",range:o},(u,l,d)=>{let f=z.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&DR(a,f)<0;)r(a,null),a=s.getNext();a&&a.isEqual(f)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?d.$(tl(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),yp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wo(e).U(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let d=vn();for(let f of l){let g=this.ir(z.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);g.isFoundDocument()&&(Ol(t,g)||i.has(g.key))&&(d=d.insert(g.key,g))}return d})}getAllFromCollectionGroup(e,t,r,i){let o=vn(),s=ER(t,r),a=ER(t,Wn.max());return Wo(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,l,d)=>{let f=this.ir(z.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(f.key,f),o.size===i&&d.done()}).next(()=>o)}newChangeBuffer(e){return new R0(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return IR(e).get("remoteDocumentGlobalKey").next(t=>(ee(!!t),t))}rr(e,t){return IR(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=zq(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(ie.min())))return r}return Et.newInvalidDocument(e)}};function $N(n){return new x0(n)}var R0=class extends Dp{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Lr(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new $e((o,s)=>ue(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=uR(this.cr.serializer,s);i=i.add(o.path.popLast());let l=Ip(u);r+=l-a.size,t.push(this.cr.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=uR(this.cr.serializer,s.convertToNoDocument(ie.min()));t.push(this.cr.addEntry(e,o,u))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),M.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function IR(n){return xt(n,"remoteDocumentGlobal")}function Wo(n){return xt(n,"remoteDocumentsV14")}function tl(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ER(n,e){let t=e.documentKey.path.toArray();return[n,yp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function DR(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=ue(t[o],r[o]),i)return i;return i=ue(t.length,r.length),i||(i=ue(t[t.length-2],r[r.length-2]),i||ue(t[t.length-1],r[r.length-1]))}var N0=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Cp=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&al(r.mutation,i,Rn.empty(),Ke.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,de()).next(()=>r))}getLocalViewOfDocuments(e,t,r=de()){let i=Nr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=rl();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Nr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,de()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=vn(),s=sl(),a=function(){return sl()}();return t.forEach((u,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof cr)?o=o.insert(l.key,l):d!==void 0?(s.set(l.key,d.mutation.getFieldMask()),al(d.mutation,l,d.mutation.getFieldMask(),Ke.now())):s.set(l.key,Rn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,d)=>s.set(l,d)),t.forEach((l,d)=>{var f;return a.set(l,new N0(d,(f=s.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=sl(),i=new Qe((s,a)=>s-a),o=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let d=r.get(u)||Rn.empty();d=a.applyToLocalView(l,d),r.set(u,d);let f=(i.get(a.batchId)||de()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,d=u.value,f=hN();d.forEach(g=>{if(!o.has(g)){let y=_N(t.get(g),r.get(g));y!==null&&f.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,f))}return M.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return z.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):jI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):M.resolve(Nr()),a=-1,u=o;return s.next(l=>M.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?M.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{u=u.insert(d,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,de())).next(d=>({batchId:a,changes:dN(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new z(t)).next(r=>{let i=rl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=rl();return this.indexManager.getCollectionParents(e,o).next(a=>M.forEach(a,u=>{let l=function(f,g){return new ur(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((f,g)=>{s=s.insert(f,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let d=l.getKey();s.get(d)===null&&(s=s.insert(d,Et.newInvalidDocument(d)))});let a=rl();return s.forEach((u,l)=>{let d=o.get(u);d!==void 0&&al(d.mutation,l,Rn.empty(),Ke.now()),Ol(t,l)&&(a=a.insert(u,l))}),a})}};var P0=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return M.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:dt(i.createTime)}}(t)),M.resolve()}getNamedQuery(e,t){return M.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:qI(i.bundledQuery),readTime:dt(i.readTime)}}(t)),M.resolve()}};var O0=class{constructor(){this.overlays=new Qe(z.comparator),this.Ir=new Map}getOverlay(e,t){return M.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Nr();return M.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),M.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),M.resolve()}getOverlaysForCollection(e,t,r){let i=Nr(),o=t.length+1,s=new z(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return M.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Qe((l,d)=>l-d),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let d=o.get(l.largestBatchId);d===null&&(d=Nr(),o=o.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=Nr(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return M.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new vl(t,r));let o=this.Ir.get(t);o===void 0&&(o=de(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var k0=class{constructor(){this.sessionToken=ht.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,M.resolve()}};var Cl=class{constructor(){this.Tr=new $e(wt.Er),this.dr=new $e(wt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new wt(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new wt(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new z(new be([])),r=new wt(t,e),i=new wt(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new z(new be([])),r=new wt(t,e),i=new wt(t,e+1),o=de();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new wt(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},wt=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return z.comparator(e.key,t.key)||ue(e.wr,t.wr)}static Ar(e,t){return ue(e.wr,t.wr)||z.comparator(e.key,t.key)}};var F0=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new $e(wt.Er)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new yl(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new wt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(s)}lookupMutationBatch(e,t){return M.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return M.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new wt(t,0),i=new wt(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),M.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new $e(ue);return t.forEach(i=>{let o=new wt(i,0),s=new wt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),M.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;z.isDocumentKey(o)||(o=o.child(""));let s=new wt(new z(o),0),a=new $e(ue);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},s),M.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ee(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return M.forEach(t.mutations,i=>{let o=new wt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new wt(t,0),i=this.br.firstAfterOrEqual(r);return M.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var V0=class{constructor(e){this.Mr=e,this.docs=function(){return new Qe(z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return M.resolve(r?r.document.mutableCopy():Et.newInvalidDocument(t))}getEntries(e,t){let r=vn();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Et.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=vn(),s=t.path,a=new z(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:d}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||OI($R(d),r)<=0||(i.has(d.key)||Ol(t,d))&&(o=o.insert(d.key,d.mutableCopy()))}return M.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Z()}Or(e,t){return M.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new L0(this)}getSize(e){return M.resolve(this.size)}},L0=class extends Dp{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),M.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var j0=class{constructor(e){this.persistence=e,this.Nr=new Lr(t=>is(t),Nl),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Cl,this.targetCount=0,this.kr=Za.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),M.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Za(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,M.resolve()}updateTargetData(e,t){return this.Kn(t),M.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),M.waitFor(o).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return M.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),M.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),M.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),M.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return M.resolve(r)}containsKey(e,t){return M.resolve(this.Br.containsKey(t))}};var bp=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new xn(0),this.Kr=!1,this.Kr=!0,this.$r=new k0,this.referenceDelegate=e(this),this.Ur=new j0(this),this.indexManager=new D0,this.remoteDocumentCache=function(i){return new V0(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new mp(t),this.Gr=new P0(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new O0,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new F0(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){L("MemoryPersistence","Starting transaction:",e);let i=new U0(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return M.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},U0=class extends ip{constructor(e){super(),this.currentSequenceNumber=e}},Tp=class n{constructor(e){this.persistence=e,this.Jr=new Cl,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw Z()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),M.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),M.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Xr,r=>{let i=z.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,ie.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return M.or([()=>M.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var B0=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new op("createOrUpgrade",t);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",jx,{unique:!0}),u.createObjectStore("documentMutations")}(e),CR(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=M.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),CR(e)),s=s.next(()=>function(u){let l=u.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ie.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",d)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,l){return l.store("mutations").U().next(d=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",jx,{unique:!0});let f=l.store("mutations"),g=d.map(y=>f.put(y));return M.waitFor(g)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let l=u.createObjectStore("documentOverlays",{keyPath:dq});l.createIndex("collectionPathOverlayIndex",hq,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",fq,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let l=u.createObjectStore("remoteDocumentsV14",{keyPath:eq});l.createIndex("documentKeyIndex",tq),l.createIndex("collectionGroupIndex",nq)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:aq}).createIndex("sequenceNumberIndex",uq,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:cq}).createIndex("documentKeyIndex",lq,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(u){u.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=Ip(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>M.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>M.forEach(a,u=>{ee(u.userId===o.userId);let l=Yo(this.serializer,u);return jN(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let u=new be(s),l=function(f){return[0,un(f)]}(u);o.push(t.get(l).next(d=>d?M.resolve():(f=>t.put({targetId:0,path:un(f),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>M.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:sq});let r=t.store("collectionParents"),i=new Dl,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:un(u)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let u=new be(s);return o(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,u],l)=>{let d=Rr(a);return o(d.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=il(i),s=FN(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),u=function(f){return f.document?new z(be.fromString(f.document.name).popFirst(5)):f.noDocument?z.fromSegments(f.noDocument.path):f.unknownDocument?z.fromSegments(f.unknownDocument.path):Z()}(s).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>M.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=$N(this.serializer),o=new bp(Tp.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(u=>{var l;let d=(l=a.get(u.userId))!==null&&l!==void 0?l:de();Yo(this.serializer,u).keys().forEach(f=>d=d.add(f)),a.set(u.userId,d)}),M.forEach(a,(u,l)=>{let d=new It(l),f=vp.lt(this.serializer,d),g=o.getIndexManager(d),y=Ep.lt(d,this.serializer,g,o.referenceDelegate);return new Cp(i,y,f,g).recalculateAndSaveOverlaysForDocumentKeys(new hl(t,xn.oe),u).next()})})}};function CR(n){n.createObjectStore("targetDocuments",{keyPath:iq}).createIndex("documentTargetsIndex",oq,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",rq,{unique:!0}),n.createObjectStore("targetGlobal")}var Mw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",$0=class n{constructor(e,t,r,i,o,s,a,u,l,d,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=d,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=g=>Promise.resolve(),!n.D())throw new F(N.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new M0(this,i),this.Ai=t+"main",this.serializer=new mp(u),this.Ri=new no(this.Ai,this.hi,new B0(this.serializer)),this.$r=new m0,this.Ur=new b0(this.referenceDelegate,this.serializer),this.remoteDocumentCache=$N(this.serializer),this.Gr=new g0,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&ct("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new F(N.FAILED_PRECONDITION,Mw);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new xn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>x(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>x(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>x(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Kf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(fo(e))return L("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return L("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return nl(e).get("owner").next(t=>M.resolve(this.vi(t)))}Ci(e){return Kf(e).delete(this.clientId)}Fi(){return x(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=xt(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return M.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?M.resolve(!0):nl(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new F(N.FAILED_PRECONDITION,Mw);return!1}}return!(!this.networkEnabled||!this.inForeground)||Kf(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&L("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return x(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new hl(e,xn.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Kf(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return Ep.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new C0(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return vp.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){L("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(u){return u===17?mq:u===16?gq:u===15?FI:u===14?QR:u===13?KR:u===12?pq:u===11?WR:void Z()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new hl(a,this.Qr?this.Qr.next():xn.oe),t==="readwrite-primary"?this.wi(s).next(u=>!!u||this.Si(s)).next(u=>{if(!u)throw ct(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new F(N.FAILED_PRECONDITION,qR);return r(s)}).next(u=>this.Di(s).next(()=>u)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return nl(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new F(N.FAILED_PRECONDITION,Mw)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return nl(e).put("owner",t)}static D(){return no.D()}bi(e){let t=nl(e);return t.get("owner").next(r=>this.vi(r)?(L("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):M.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(ct(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;tm()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return L("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ct("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){ct("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function nl(n){return xt(n,"owner")}function Kf(n){return xt(n,"clientMetadata")}function zI(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var q0=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=de(),i=de();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var H0=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Ap=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return tm()?8:HR(Vu())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new H0;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Oa()<=hr.DEBUG&&L("QueryEngine","SDK will not create cache indexes for query:",ka(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),M.resolve()):(Oa()<=hr.DEBUG&&L("QueryEngine","Query:",ka(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Oa()<=hr.DEBUG&&L("QueryEngine","The SDK decides to create cache indexes for query:",ka(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cn(t))):M.resolve())}Yi(e,t){if(Zx(t))return M.resolve(null);let r=cn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=hp(t,null,"F"),r=cn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=de(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(t,a);return this.ns(t,l,s,u.readTime)?this.Yi(e,hp(t,null,"F")):this.rs(e,l,t,u)}))})))}Zi(e,t,r,i){return Zx(t)||i.isEqual(ie.min())?M.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?M.resolve(null):(Oa()<=hr.DEBUG&&L("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ka(t)),this.rs(e,s,t,BR(i,-1)).next(a=>a))})}ts(e,t){let r=new $e(cN(e));return t.forEach((i,o)=>{Ol(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Oa()<=hr.DEBUG&&L("QueryEngine","Using full collection scan to execute query:",ka(t)),this.Ji.getDocumentsMatchingQuery(e,t,Wn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var z0=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Qe(ue),this._s=new Lr(o=>is(o),Nl),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Cp(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function qN(n,e,t,r){return new z0(n,e,t,r)}function HN(n,e){return x(this,null,function*(){let t=H(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=de();for(let l of i){s.push(l.batchId);for(let d of l.mutations)u=u.add(d.key)}for(let l of o){a.push(l.batchId);for(let d of l.mutations)u=u.add(d.key)}return t.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function Qq(n,e){let t=H(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,d){let f=l.batch,g=f.keys(),y=M.resolve();return g.forEach(D=>{y=y.next(()=>d.getEntry(u,D)).next(C=>{let A=l.docVersions.get(D);ee(A!==null),C.version.compareTo(A)<0&&(f.applyToRemoteDocument(C,l),C.isValidDocument()&&(C.setReadTime(l.commitVersion),d.addEntry(C)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=de();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function zN(n){let e=H(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function Yq(n,e){let t=H(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((d,f)=>{let g=i.get(f);if(!g)return;a.push(t.Ur.removeMatchingKeys(o,d.removedDocuments,f).next(()=>t.Ur.addMatchingKeys(o,d.addedDocuments,f)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(ht.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(f,y),function(C,A,V){return C.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0}(g,y,d)&&a.push(t.Ur.updateTargetData(o,y))});let u=vn(),l=de();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(GN(o,s,e.documentUpdates).next(d=>{u=d.Ps,l=d.Is})),!r.isEqual(ie.min())){let d=t.Ur.getLastRemoteSnapshotVersion(o).next(f=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return M.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.os=i,o))}function GN(n,e,t){let r=de(),i=de();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=vn();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ie.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):L("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function Zq(n,e){let t=H(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ja(n,e){let t=H(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,M.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new Ya(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Xa(n,e,t){return x(this,null,function*(){let r=H(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!fo(s))throw s;L("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function Sp(n,e,t){let r=H(n),i=ie.min(),o=de();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,d){let f=H(u),g=f._s.get(d);return g!==void 0?M.resolve(f.os.get(g)):f.Ur.getTargetData(l,d)}(r,s,cn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:ie.min(),t?o:de())).next(a=>(QN(r,uN(e),a),{documents:a,Ts:o})))}function WN(n,e){let t=H(n),r=H(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function KN(n,e){let t=H(n),r=t.us.get(e)||ie.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,BR(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(QN(t,e,i),i))}function QN(n,e,t){let r=n.us.get(e)||ie.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function Jq(n,e,t,r){return x(this,null,function*(){let i=H(n),o=de(),s=vn();for(let l of t){let d=e.Es(l.metadata.name);l.document&&(o=o.add(d));let f=e.ds(l);f.setReadTime(e.As(l.metadata.readTime)),s=s.insert(d,f)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),u=yield Ja(i,function(d){return cn(au(be.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>GN(l,a,s).next(d=>(a.apply(l),d)).next(d=>i.Ur.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Ur.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,d.Ps,d.Is)).next(()=>d.Ps)))})}function Xq(r,i){return x(this,arguments,function*(n,e,t=de()){let o=yield Ja(n,cn(qI(e.bundledQuery))),s=H(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=dt(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(ht.EMPTY_BYTE_STRING,u);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function bR(n,e){return`firestore_clients_${n}_${e}`}function TR(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function xw(n,e){return`firestore_targets_${n}_${e}`}var Mp=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new F(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(ct("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},ul=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new F(r.error.code,r.error.message))),o?new n(e,r.state,i):(ct("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},xp=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=UI();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=zR(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(ct("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},G0=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(ct("SharedClientState",`Failed to parse online state: ${e}`),null)}},bl=class{constructor(){this.activeTargetIds=UI()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},cl=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Qe(ue),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=bR(this.persistenceKey,this.ps),this.vs=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new bl),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return x(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(bR(this.persistenceKey,r));if(i){let o=xp.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(xw(this.persistenceKey,e));if(i){let o=ul.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(xw(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return L("SharedClientState","READ",e,t),t}setItem(e,t){L("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){L("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(L("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void ct("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>x(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=xn.oe;if(o!=null)try{let a=JSON.parse(o);ee(typeof a=="number"),s=a}catch(a){ct("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==xn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new Mp(this.currentUser,e,t,r),o=TR(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=TR(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=xw(this.persistenceKey,e),o=new ul(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return xp.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Mp.Rs(new It(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return ul.Rs(i,t)}Ls(e){return G0.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return x(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);L("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=UI();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},Rp=class{constructor(){this.so=new bl,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new bl,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var W0=class{_o(e){}shutdown(){}};var Np=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){L("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){L("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Qf=null;function Rw(){return Qf===null?Qf=function(){return 268435456+Math.round(2147483648*Math.random())}():Qf++,"0x"+Qf.toString(16)}var e3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var K0=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Kt="WebChannelConnection",Q0=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=Rw(),u=this.xo(t,r.toUriEncodedString());L("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,u,l,i).then(d=>(L("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw ar("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",u,"request:",i),d})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+su}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=e3[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=Rw();return new Promise((s,a)=>{let u=new Dw;u.setWithCredentials(!0),u.listenOnce(Cw.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Jc.NO_ERROR:let d=u.getResponseJson();L(Kt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),s(d);break;case Jc.TIMEOUT:L(Kt,`RPC '${e}' ${o} timed out`),a(new F(N.DEADLINE_EXCEEDED,"Request time out"));break;case Jc.HTTP_ERROR:let f=u.getStatus();if(L(Kt,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);let y=g?.error;if(y&&y.status&&y.message){let D=function(A){let V=A.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(V)>=0?V:N.UNKNOWN}(y.status);a(new F(D,y.message))}else a(new F(N.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new F(N.UNAVAILABLE,"Connection failed."));break;default:Z()}}finally{L(Kt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);L(Kt,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=Rw(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Aw(),a=Tw(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let d=o.join("");L(Kt,`Creating RPC '${e}' stream ${i}: ${d}`,u);let f=s.createWebChannel(d,u),g=!1,y=!1,D=new K0({Io:A=>{y?L(Kt,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(g||(L(Kt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),L(Kt,`RPC '${e}' stream ${i} sending:`,A),f.send(A))},To:()=>f.close()}),C=(A,V,G)=>{A.listen(V,k=>{try{G(k)}catch(J){setTimeout(()=>{throw J},0)}})};return C(f,Ma.EventType.OPEN,()=>{y||(L(Kt,`RPC '${e}' stream ${i} transport opened.`),D.yo())}),C(f,Ma.EventType.CLOSE,()=>{y||(y=!0,L(Kt,`RPC '${e}' stream ${i} transport closed`),D.So())}),C(f,Ma.EventType.ERROR,A=>{y||(y=!0,ar(Kt,`RPC '${e}' stream ${i} transport errored:`,A),D.So(new F(N.UNAVAILABLE,"The operation could not be completed")))}),C(f,Ma.EventType.MESSAGE,A=>{var V;if(!y){let G=A.data[0];ee(!!G);let k=G,J=k.error||((V=k[0])===null||V===void 0?void 0:V.error);if(J){L(Kt,`RPC '${e}' stream ${i} received error:`,J);let oe=J.status,re=function(w){let E=_t[w];if(E!==void 0)return EN(E)}(oe),I=J.message;re===void 0&&(re=N.INTERNAL,I="Unknown error status: "+oe+" with message "+J.message),y=!0,D.So(new F(re,I)),f.close()}else L(Kt,`RPC '${e}' stream ${i} received:`,G),D.bo(G)}}),C(a,bw.STAT_EVENT,A=>{A.stat===zf.PROXY?L(Kt,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===zf.NOPROXY&&L(Kt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.wo()},0),D}};function YN(){return typeof window<"u"?window:null}function ep(){return typeof document<"u"?document:null}function kl(n){return new l0(n,!0)}var Tl=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&L("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Pp=class{constructor(e,t,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Tl(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return x(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return x(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return x(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===N.RESOURCE_EXHAUSTED?(ct(t.toString()),ct("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new F(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>x(this,null,function*(){this.state=0,this.start()}))}I_(e){return L("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(L("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Y0=class extends Pp{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=Lq(this.serializer,e),r=function(o){if(!("targetChange"in o))return ie.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ie.min():s.readTime?dt(s.readTime):ie.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=f0(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=lp(u)?{documents:xN(o,u)}:{query:RN(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=CN(o,s.resumeToken);let l=d0(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ie.min())>0){a.readTime=Qa(o,s.snapshotVersion.toTimestamp());let l=d0(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=Uq(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=f0(this.serializer),t.removeTarget=e,this.a_(t)}},Z0=class extends Pp{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ee(!!e.streamToken),this.lastStreamToken=e.streamToken,ee(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ee(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=jq(e.writeResults,e.commitTime),r=dt(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=f0(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>El(this.serializer,r))};this.a_(t)}};var J0=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new F(N.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,h0(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new F(N.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,h0(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(N.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},X0=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ct(t),this.D_=!1):L("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var eI=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>x(this,null,function*(){po(this)&&(L("RemoteStore","Restarting streams for network reachability change."),yield function(u){return x(this,null,function*(){let l=H(u);l.L_.add(4),yield uu(l),l.q_.set("Unknown"),l.L_.delete(4),yield Fl(l)})}(this))}))}),this.q_=new X0(r,i)}};function Fl(n){return x(this,null,function*(){if(po(n))for(let e of n.B_)yield e(!0)})}function uu(n){return x(this,null,function*(){for(let e of n.B_)yield e(!1)})}function eg(n,e){let t=H(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),KI(t)?WI(t):lu(t).r_()&&GI(t,e))}function eu(n,e){let t=H(n),r=lu(t);t.N_.delete(e),r.r_()&&ZN(t,e),t.N_.size===0&&(r.r_()?r.o_():po(t)&&t.q_.set("Unknown"))}function GI(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}lu(n).A_(e)}function ZN(n,e){n.Q_.xe(e),lu(n).R_(e)}function WI(n){n.Q_=new c0({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),lu(n).start(),n.q_.v_()}function KI(n){return po(n)&&!lu(n).n_()&&n.N_.size>0}function po(n){return H(n).L_.size===0}function JN(n){n.Q_=void 0}function t3(n){return x(this,null,function*(){n.q_.set("Online")})}function n3(n){return x(this,null,function*(){n.N_.forEach((e,t)=>{GI(n,e)})})}function r3(n,e){return x(this,null,function*(){JN(n),KI(n)?(n.q_.M_(e),WI(n)):n.q_.set("Unknown")})}function i3(n,e,t){return x(this,null,function*(){if(n.q_.set("Online"),e instanceof pp&&e.state===2&&e.cause)try{yield function(i,o){return x(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){L("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Op(n,r)}else if(e instanceof $a?n.Q_.Ke(e):e instanceof fp?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ie.min()))try{let r=yield zN(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let d=o.N_.get(l);d&&o.N_.set(l,d.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let d=o.N_.get(u);if(!d)return;o.N_.set(u,d.withResumeToken(ht.EMPTY_BYTE_STRING,d.snapshotVersion)),ZN(o,u);let f=new Ya(d.target,u,l,d.sequenceNumber);GI(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){L("RemoteStore","Failed to raise snapshot:",r),yield Op(n,r)}})}function Op(n,e,t){return x(this,null,function*(){if(!fo(e))throw e;n.L_.add(1),yield uu(n),n.q_.set("Offline"),t||(t=()=>zN(n.localStore)),n.asyncQueue.enqueueRetryable(()=>x(this,null,function*(){L("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Fl(n)}))})}function XN(n,e){return e().catch(t=>Op(n,t,e))}function cu(n){return x(this,null,function*(){let e=H(n),t=lo(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;o3(e);)try{let i=yield Zq(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,s3(e,i)}catch(i){yield Op(e,i)}eP(e)&&tP(e)})}function o3(n){return po(n)&&n.O_.length<10}function s3(n,e){n.O_.push(e);let t=lo(n);t.r_()&&t.V_&&t.m_(e.mutations)}function eP(n){return po(n)&&!lo(n).n_()&&n.O_.length>0}function tP(n){lo(n).start()}function a3(n){return x(this,null,function*(){lo(n).p_()})}function u3(n){return x(this,null,function*(){let e=lo(n);for(let t of n.O_)e.m_(t.mutations)})}function c3(n,e,t){return x(this,null,function*(){let r=n.O_.shift(),i=s0.from(r,e,t);yield XN(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield cu(n)})}function l3(n,e){return x(this,null,function*(){e&&lo(n).V_&&(yield function(r,i){return x(this,null,function*(){if(function(s){return IN(s)&&s!==N.ABORTED}(i.code)){let o=r.O_.shift();lo(r).s_(),yield XN(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield cu(r)}})}(n,e)),eP(n)&&tP(n)})}function AR(n,e){return x(this,null,function*(){let t=H(n);t.asyncQueue.verifyOperationInProgress(),L("RemoteStore","RemoteStore received new credentials");let r=po(t);t.L_.add(3),yield uu(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Fl(t)})}function tI(n,e){return x(this,null,function*(){let t=H(n);e?(t.L_.delete(2),yield Fl(t)):e||(t.L_.add(2),yield uu(t),t.q_.set("Unknown"))})}function lu(n){return n.K_||(n.K_=function(t,r,i){let o=H(t);return o.w_(),new Y0(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:t3.bind(null,n),Ro:n3.bind(null,n),mo:r3.bind(null,n),d_:i3.bind(null,n)}),n.B_.push(e=>x(this,null,function*(){e?(n.K_.s_(),KI(n)?WI(n):n.q_.set("Unknown")):(yield n.K_.stop(),JN(n))}))),n.K_}function lo(n){return n.U_||(n.U_=function(t,r,i){let o=H(t);return o.w_(),new Z0(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:a3.bind(null,n),mo:l3.bind(null,n),f_:u3.bind(null,n),g_:c3.bind(null,n)}),n.B_.push(e=>x(this,null,function*(){e?(n.U_.s_(),yield cu(n)):(yield n.U_.stop(),n.O_.length>0&&(L("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var nI=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Mt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function du(n,e){if(ct("AsyncQueue",`${e}: ${n}`),fo(n))return new F(N.UNAVAILABLE,`${e}: ${n}`);throw n}var kp=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||z.comparator(t.key,r.key):(t,r)=>z.comparator(t.key,r.key),this.keyedMap=rl(),this.sortedSet=new Qe(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Fp=class{constructor(){this.W_=new Qe(z.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Z():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},tu=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,kp.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var rI=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},iI=class{constructor(){this.queries=SR(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=H(t),o=i.queries;i.queries=SR(),o.forEach((s,a)=>{for(let u of a.j_)u.onError(r)})})(this,new F(N.ABORTED,"Firestore shutting down"))}};function SR(){return new Lr(n=>aN(n),Pl)}function QI(n,e){return x(this,null,function*(){let t=H(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new rI,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=du(s,`Initialization of query '${ka(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&ZI(t)})}function YI(n,e){return x(this,null,function*(){let t=H(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function d3(n,e){let t=H(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&ZI(t)}function h3(n,e,t){let r=H(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function ZI(n){n.Y_.forEach(e=>{e.next()})}var oI,MR;(MR=oI||(oI={})).ea="default",MR.Cache="cache";var Al=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new tu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=tu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==oI.Cache}};var sI=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var Vp=class{constructor(e){this.serializer=e}Es(e){return Or(this.serializer,e)}ds(e){return e.metadata.exists?MN(this.serializer,e.document,!1):Et.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return dt(e)}},aI=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=nP(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=be.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new Vp(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||de()).add(o);t.set(s,a)}}return t}complete(){return x(this,null,function*(){let e=yield Jq(this.localStore,new Vp(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield Xq(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function nP(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var Lp=class{constructor(e){this.key=e}},jp=class{constructor(e){this.key=e}},Up=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=de(),this.mutatedKeys=de(),this.Aa=cN(e),this.Ra=new kp(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Fp,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let g=i.get(d),y=Ol(this.query,f)?f:null,D=!!g&&this.mutatedKeys.has(g.key),C=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),A=!1;g&&y?g.data.isEqual(y.data)?D!==C&&(r.track({type:3,doc:y}),A=!0):this.ga(g,y)||(r.track({type:2,doc:y}),A=!0,(u&&this.Aa(y,u)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),A=!0):g&&!y&&(r.track({type:1,doc:g}),A=!0,(u||l)&&(a=!0)),A&&(y?(s=s.add(y),o=C?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((d,f)=>function(y,D){let C=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z()}};return C(y)-C(D)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,s.length!==0||l?{snapshot:new tu(this.query,e.Ra,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Fp,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=de(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new jp(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Lp(r))}),t}ba(e){this.Ta=e.Ts,this.da=de();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return tu.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},uI=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},cI=class{constructor(e){this.key=e,this.va=!1}},lI=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Lr(a=>aN(a),Pl),this.Ma=new Map,this.xa=new Set,this.Oa=new Qe(z.comparator),this.Na=new Map,this.La=new Cl,this.Ba={},this.ka=new Map,this.qa=Za.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function f3(n,e,t=!0){return x(this,null,function*(){let r=tg(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield rP(r,e,t,!0),i})}function p3(n,e){return x(this,null,function*(){let t=tg(n);yield rP(t,e,!0,!1)})}function rP(n,e,t,r){return x(this,null,function*(){let i=yield Ja(n.localStore,cn(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield JI(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&eg(n.remoteStore,i),a})}function JI(n,e,t,r,i){return x(this,null,function*(){n.Ka=(f,g,y)=>function(C,A,V,G){return x(this,null,function*(){let k=A.view.ma(V);k.ns&&(k=yield Sp(C.localStore,A.query,!1).then(({documents:I})=>A.view.ma(I,k)));let J=G&&G.targetChanges.get(A.targetId),oe=G&&G.targetMismatches.get(A.targetId)!=null,re=A.view.applyChanges(k,C.isPrimaryClient,J,oe);return dI(C,A.targetId,re.wa),re.snapshot})}(n,f,g,y);let o=yield Sp(n.localStore,e,!0),s=new Up(e,o.Ts),a=s.ma(o.documents),u=wl.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);dI(n,t,l.wa);let d=new uI(e,t,s);return n.Fa.set(e,d),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function g3(n,e,t){return x(this,null,function*(){let r=H(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Pl(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Xa(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&eu(r.remoteStore,i.targetId),nu(r,i.targetId)}).catch(ho))):(nu(r,i.targetId),yield Xa(r.localStore,i.targetId,!0))})}function m3(n,e){return x(this,null,function*(){let t=H(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),eu(t.remoteStore,r.targetId))})}function y3(n,e,t){return x(this,null,function*(){let r=nE(n);try{let i=yield function(s,a){let u=H(s),l=Ke.now(),d=a.reduce((y,D)=>y.add(D.key),de()),f,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let D=vn(),C=de();return u.cs.getEntries(y,d).next(A=>{D=A,D.forEach((V,G)=>{G.isValidDocument()||(C=C.add(V))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,D)).next(A=>{f=A;let V=[];for(let G of a){let k=Rq(G,f.get(G.key).overlayedDocument);k!=null&&V.push(new cr(G.key,k,eN(k.value.mapValue),at.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,V,a)}).next(A=>{g=A;let V=A.applyToLocalDocumentSet(f,C);return u.documentOverlayCache.saveOverlays(y,A.batchId,V)})}).then(()=>({batchId:g.batchId,changes:dN(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ba[s.currentUser.toKey()];l||(l=new Qe(ue)),l=l.insert(a,u),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield yi(r,i.changes),yield cu(r.remoteStore)}catch(i){let o=du(i,"Failed to persist write");t.reject(o)}})}function iP(n,e){return x(this,null,function*(){let t=H(n);try{let r=yield Yq(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(ee(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?ee(s.va):i.removedDocuments.size>0&&(ee(s.va),s.va=!1))}),yield yi(t,r,e)}catch(r){yield ho(r)}})}function xR(n,e,t){let r=H(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=H(s);u.onlineState=a;let l=!1;u.queries.forEach((d,f)=>{for(let g of f.j_)g.Z_(a)&&(l=!0)}),l&&ZI(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function v3(n,e,t){return x(this,null,function*(){let r=H(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new Qe(z.comparator);s=s.insert(o,Et.newNoDocument(o,ie.min()));let a=de().add(o),u=new _l(ie.min(),new Map,new Qe(ue),s,a);yield iP(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),tE(r)}else yield Xa(r.localStore,e,!1).then(()=>nu(r,e,t)).catch(ho)})}function _3(n,e){return x(this,null,function*(){let t=H(n),r=e.batch.batchId;try{let i=yield Qq(t.localStore,e);eE(t,r,null),XI(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield yi(t,i)}catch(i){yield ho(i)}})}function w3(n,e,t){return x(this,null,function*(){let r=H(n);try{let i=yield function(s,a){let u=H(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(ee(f!==null),d=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>u.localDocuments.getDocuments(l,d))})}(r.localStore,e);eE(r,e,t),XI(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield yi(r,i)}catch(i){yield ho(i)}})}function I3(n,e){return x(this,null,function*(){let t=H(n);po(t.remoteStore)||L("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=H(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=du(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function XI(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function eE(n,e,t){let r=H(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function nu(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||oP(n,r)})}function oP(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(eu(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),tE(n))}function dI(n,e,t){for(let r of t)r instanceof Lp?(n.La.addReference(r.key,e),E3(n,r)):r instanceof jp?(L("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||oP(n,r.key)):Z()}function E3(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(L("SyncEngine","New document in limbo: "+t),n.xa.add(r),tE(n))}function tE(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new z(be.fromString(e)),r=n.qa.next();n.Na.set(r,new cI(t)),n.Oa=n.Oa.insert(t,r),eg(n.remoteStore,new Ya(cn(au(t.path)),r,"TargetPurposeLimboResolution",xn.oe))}}function yi(n,e,t){return x(this,null,function*(){let r=H(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,t).then(l=>{var d;if((l||t)&&r.isPrimaryClient){let f=l?!l.fromCache:(d=t?.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(l){i.push(l);let f=q0.Wi(u.targetId,l);o.push(f)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(u,l){return x(this,null,function*(){let d=H(u);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>M.forEach(l,g=>M.forEach(g.$i,y=>d.persistence.referenceDelegate.addReference(f,g.targetId,y)).next(()=>M.forEach(g.Ui,y=>d.persistence.referenceDelegate.removeReference(f,g.targetId,y)))))}catch(f){if(!fo(f))throw f;L("LocalStore","Failed to update sequence numbers: "+f)}for(let f of l){let g=f.targetId;if(!f.fromCache){let y=d.os.get(g),D=y.snapshotVersion,C=y.withLastLimboFreeSnapshotVersion(D);d.os=d.os.insert(g,C)}}})}(r.localStore,o))})}function D3(n,e){return x(this,null,function*(){let t=H(n);if(!t.currentUser.isEqual(e)){L("SyncEngine","User change. New user:",e.toKey());let r=yield HN(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(u=>{u.reject(new F(N.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield yi(t,r.hs)}})}function C3(n,e){let t=H(n),r=t.Na.get(e);if(r&&r.va)return de().add(r.key);{let i=de(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function b3(n,e){return x(this,null,function*(){let t=H(n),r=yield Sp(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&dI(t,e.targetId,i.wa),i})}function T3(n,e){return x(this,null,function*(){let t=H(n);return KN(t.localStore,e).then(r=>yi(t,r))})}function A3(n,e,t,r){return x(this,null,function*(){let i=H(n),o=yield function(a,u){let l=H(a),d=H(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",f=>d.Mn(f,u).next(g=>g?l.localDocuments.getDocuments(f,g):M.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield cu(i.remoteStore):t==="acknowledged"||t==="rejected"?(eE(i,e,r||null),XI(i,e),function(a,u){H(H(a).mutationQueue).On(u)}(i.localStore,e)):Z(),yield yi(i,o)):L("SyncEngine","Cannot apply mutation batch with id: "+e)})}function S3(n,e){return x(this,null,function*(){let t=H(n);if(tg(t),nE(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield RR(t,r.toArray());t.Qa=!0,yield tI(t.remoteStore,!0);for(let o of i)eg(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(nu(t,s),Xa(t.localStore,s,!0))),eu(t.remoteStore,s)}),yield i,yield RR(t,r),function(s){let a=H(s);a.Na.forEach((u,l)=>{eu(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new Qe(z.comparator)}(t),t.Qa=!1,yield tI(t.remoteStore,!1)}})}function RR(n,e,t){return x(this,null,function*(){let r=H(n),i=[],o=[];for(let s of e){let a,u=r.Ma.get(s);if(u&&u.length!==0){a=yield Ja(r.localStore,cn(u[0]));for(let l of u){let d=r.Fa.get(l),f=yield b3(r,d);f.snapshot&&o.push(f.snapshot)}}else{let l=yield WN(r.localStore,s);a=yield Ja(r.localStore,l),yield JI(r,sP(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function sP(n){return sN(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function M3(n){return function(t){return H(H(t).persistence).Qi()}(H(n).localStore)}function x3(n,e,t,r){return x(this,null,function*(){let i=H(n);if(i.Qa)return void L("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield KN(i.localStore,uN(o[0])),a=_l.createSynthesizedRemoteEventForCurrentChange(e,t==="current",ht.EMPTY_BYTE_STRING);yield yi(i,s,a);break}case"rejected":yield Xa(i.localStore,e,!0),nu(i,e,r);break;default:Z()}})}function R3(n,e,t){return x(this,null,function*(){let r=tg(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){L("SyncEngine","Adding an already active target "+i);continue}let o=yield WN(r.localStore,i),s=yield Ja(r.localStore,o);yield JI(r,sP(o),s.targetId,!1,s.resumeToken),eg(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield Xa(r.localStore,i,!1).then(()=>{eu(r.remoteStore,i),nu(r,i)}).catch(ho))}})}function tg(n){let e=H(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=iP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=C3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=v3.bind(null,e),e.Ca.d_=d3.bind(null,e.eventManager),e.Ca.$a=h3.bind(null,e.eventManager),e}function nE(n){let e=H(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=w3.bind(null,e),e}function N3(n,e,t){let r=H(n);(function(o,s,a){return x(this,null,function*(){try{let u=yield s.getMetadata();if(yield function(y,D){let C=H(y),A=dt(D.createTime);return C.persistence.runTransaction("hasNewerBundle","readonly",V=>C.Gr.getBundleMetadata(V,D.id)).then(V=>!!V&&V.createTime.compareTo(A)>=0)}(o.localStore,u))return yield s.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(nP(u));let l=new aI(u,o.localStore,s.serializer),d=yield s.Ua();for(;d;){let g=yield l.la(d);g&&a._updateProgress(g),d=yield s.Ua()}let f=yield l.complete();return yield yi(o,f.Ia,void 0),yield function(y,D){let C=H(y);return C.persistence.runTransaction("Save bundle","readwrite",A=>C.Gr.saveBundleMetadata(A,D))}(o.localStore,u),a._completeWith(f.progress),Promise.resolve(f.Pa)}catch(u){return ar("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var hI=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return x(this,null,function*(){this.serializer=kl(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return qN(this.persistence,new Ap,t.initialUser,this.serializer)}Ga(t){return new bp(Tp.Zr,this.serializer)}Wa(t){return new Rp}terminate(){return x(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var Bp=class n extends hI{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return x(this,null,function*(){yield Xg(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield nE(this.Ja.syncEngine),yield cu(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return qN(this.persistence,new Ap,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new A0(r,e.asyncQueue,t)}Ha(e,t){let r=new Hw(t,this.persistence);return new qw(e.asyncQueue,r)}Ga(e){let t=zI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Gn.withCacheSize(this.cacheSizeBytes):Gn.DEFAULT;return new $0(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,YN(),ep(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new Rp}},fI=class n extends Bp{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return x(this,null,function*(){yield Xg(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof cl&&(this.sharedClientState.syncEngine={no:A3.bind(null,t),ro:x3.bind(null,t),io:R3.bind(null,t),Qi:M3.bind(null,t),eo:T3.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>x(this,null,function*(){yield S3(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=YN();if(!cl.D(t))throw new F(N.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=zI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new cl(t,e.asyncQueue,r,e.clientId,e.initialUser)}},rE=(()=>{class n{initialize(t,r){return x(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>xR(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=D3.bind(null,this.syncEngine),yield tI(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new iI}()}createDatastore(t){let r=kl(t.databaseInfo.databaseId),i=function(s){return new Q0(s)}(t.databaseInfo);return function(s,a,u,l){return new J0(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new eI(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>xR(this.syncEngine,r,0),function(){return Np.D()?new Np:new W0}())}createSyncEngine(t,r){return function(o,s,a,u,l,d,f){let g=new lI(o,s,a,u,l,d);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return x(this,null,function*(){var t,r;yield function(o){return x(this,null,function*(){let s=H(o);L("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield uu(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function NR(n,e=10240){let t=0;return{read(){return x(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return x(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var ru=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ct("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var pI=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new Mt,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return x(this,null,function*(){return this.metadata.promise})}Ua(){return x(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return x(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new sI(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return x(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return x(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return x(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var gI=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return x(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new F(N.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return x(this,null,function*(){let s=H(i),a={documents:o.map(f=>Il(s.serializer,f))},u=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,be.emptyPath(),a,o.length),l=new Map;u.forEach(f=>{let g=Vq(s.serializer,f);l.set(g.key.toString(),g)});let d=[];return o.forEach(f=>{let g=l.get(f.toString());ee(!!g),d.push(g)}),d})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new co(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return x(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=z.fromPath(r);this.mutations.push(new ml(i,this.precondition(i)))}),yield function(r,i){return x(this,null,function*(){let o=H(r),s={writes:i.map(a=>El(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,be.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Z();t=ie.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new F(N.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ie.min())?at.exists(!1):at.updateTime(t):at.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ie.min()))throw new F(N.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return at.updateTime(t)}return at.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var mI=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new Tl(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>x(this,null,function*(){let e=new gI(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!Rl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!IN(t)}return!1}};var yI=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=It.UNAUTHENTICATED,this.clientId=np.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>x(this,null,function*(){L("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(L("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Mt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>x(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=du(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Nw(n,e){return x(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),L("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>x(this,null,function*(){r.isEqual(i)||(yield HN(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function PR(n,e){return x(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield iE(n);L("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>AR(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>AR(e.remoteStore,i)),n._onlineComponents=e})}function iE(n){return x(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){L("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Nw(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;ar("Error using user provided cache. Falling back to memory cache: "+t),yield Nw(n,new hI)}}else L("FirestoreClient","Using default OfflineComponentProvider"),yield Nw(n,new hI);return n._offlineComponents})}function ng(n){return x(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(L("FirestoreClient","Using user provided OnlineComponentProvider"),yield PR(n,n._uninitializedComponentsProvider._online)):(L("FirestoreClient","Using default OnlineComponentProvider"),yield PR(n,new rE))),n._onlineComponents})}function aP(n){return iE(n).then(e=>e.persistence)}function oE(n){return iE(n).then(e=>e.localStore)}function uP(n){return ng(n).then(e=>e.remoteStore)}function sE(n){return ng(n).then(e=>e.syncEngine)}function P3(n){return ng(n).then(e=>e.datastore)}function iu(n){return x(this,null,function*(){let e=yield ng(n),t=e.eventManager;return t.onListen=f3.bind(null,e.syncEngine),t.onUnlisten=g3.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=p3.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=m3.bind(null,e.syncEngine),t})}function O3(n){return n.asyncQueue.enqueue(()=>x(this,null,function*(){let e=yield aP(n),t=yield uP(n);return e.setNetworkEnabled(!0),function(i){let o=H(i);return o.L_.delete(0),Fl(o)}(t)}))}function k3(n){return n.asyncQueue.enqueue(()=>x(this,null,function*(){let e=yield aP(n),t=yield uP(n);return e.setNetworkEnabled(!1),function(i){return x(this,null,function*(){let o=H(i);o.L_.add(0),yield uu(o),o.q_.set("Offline")})}(t)}))}function F3(n,e){let t=new Mt;return n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(i,o,s){return x(this,null,function*(){try{let a=yield function(l,d){let f=H(l);return f.persistence.runTransaction("read document","readonly",g=>f.localDocuments.getDocument(g,d))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new F(N.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=du(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield oE(n),e,t)})),t.promise}function cP(n,e,t={}){let r=new Mt;return n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(o,s,a,u,l){let d=new ru({next:g=>{d.Za(),s.enqueueAndForget(()=>YI(o,f));let y=g.docs.has(a);!y&&g.fromCache?l.reject(new F(N.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&u&&u.source==="server"?l.reject(new F(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new Al(au(a.path),d,{includeMetadataChanges:!0,_a:!0});return QI(o,f)}(yield iu(n),n.asyncQueue,e,t,r)})),r.promise}function V3(n,e){let t=new Mt;return n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(i,o,s){return x(this,null,function*(){try{let a=yield Sp(i,o,!0),u=new Up(o,a.Ts),l=u.ma(a.documents),d=u.applyChanges(l,!1);s.resolve(d.snapshot)}catch(a){let u=du(a,`Failed to execute query '${o} against cache`);s.reject(u)}})}(yield oE(n),e,t)})),t.promise}function lP(n,e,t={}){let r=new Mt;return n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(o,s,a,u,l){let d=new ru({next:g=>{d.Za(),s.enqueueAndForget(()=>YI(o,f)),g.fromCache&&u.source==="server"?l.reject(new F(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new Al(a,d,{includeMetadataChanges:!0,_a:!0});return QI(o,f)}(yield iu(n),n.asyncQueue,e,t,r)})),r.promise}function L3(n,e){let t=new ru(e);return n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(i,o){H(i).Y_.add(o),o.next()}(yield iu(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(i,o){H(i).Y_.delete(o)}(yield iu(n),t)}))}}function j3(n,e,t,r){let i=function(s,a){let u;return u=typeof s=="string"?DN().encode(s):s,function(d,f){return new pI(d,f)}(function(d,f){if(d instanceof Uint8Array)return NR(d,f);if(d instanceof ArrayBuffer)return NR(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(t,kl(e));n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){N3(yield sE(n),i,r)}))}function U3(n,e){return n.asyncQueue.enqueue(()=>x(this,null,function*(){return function(r,i){let o=H(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield oE(n),e)}))}function dP(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var OR=new Map;function aE(n,e,t){if(!t)throw new F(N.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function uE(n,e,t,r){if(e===!0&&r===!0)throw new F(N.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function kR(n){if(!z.isDocumentKey(n))throw new F(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function FR(n){if(z.isDocumentKey(n))throw new F(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function rg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Z()}function Ae(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new F(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=rg(n);throw new F(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function hP(n,e){if(e<=0)throw new F(N.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var $p=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new F(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new F(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}uE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new F(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new F(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new F(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},us=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $p({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new F(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new F(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $p(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Pw;switch(r.type){case"firstParty":return new Vw(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new F(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return x(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=OR.get(t);r&&(L("ComponentProvider","Removing Datastore"),OR.delete(t),r.terminate())}(this),Promise.resolve()}};function cE(n,e,t,r={}){var i;let o=(n=Ae(n,us))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&ar("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=It.MOCK_USER;else{a=aC(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new F(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new It(l)}n._authCredentials=new Ow(new tp(a,u))}}var Lt=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},ze=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},kr=class n extends Lt{constructor(e,t,r){super(e,t,au(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ze(this.firestore,null,new z(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Vl(n,e,...t){if(n=tt(n),aE("collection","path",e),n instanceof us){let r=be.fromString(e,...t);return FR(r),new kr(n,null,r)}{if(!(n instanceof ze||n instanceof kr))throw new F(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(be.fromString(e,...t));return FR(r),new kr(n.firestore,null,r)}}function lE(n,e){if(n=Ae(n,us),aE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new F(N.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Lt(n,null,function(r){return new ur(be.emptyPath(),r)}(e))}function fs(n,e,...t){if(n=tt(n),arguments.length===1&&(e=np.newId()),aE("doc","path",e),n instanceof us){let r=be.fromString(e,...t);return kR(r),new ze(n,null,new z(r))}{if(!(n instanceof ze||n instanceof kr))throw new F(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(be.fromString(e,...t));return kR(r),new ze(n.firestore,n instanceof kr?n.converter:null,new z(r))}}function Ll(n,e){return n=tt(n),e=tt(e),(n instanceof ze||n instanceof kr)&&(e instanceof ze||e instanceof kr)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function ig(n,e){return n=tt(n),e=tt(e),n instanceof Lt&&e instanceof Lt&&n.firestore===e.firestore&&Pl(n._query,e._query)&&n.converter===e.converter}var qp=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Tl(this,"async_queue_retry"),this.Vu=()=>{let r=ep();r&&L("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=ep();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=ep();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Mt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return x(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!fo(e))throw e;L("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw ct("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=nI.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&Z()}verifyOperationInProgress(){}wu(){return x(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function vI(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var _I=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Mt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var fP=-1,rt=class extends us{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new qp,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return x(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new qp(e),this._firestoreClient=void 0,yield e}})}};function jt(n){if(n._terminated)throw new F(N.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||pP(n),n._firestoreClient}function pP(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,d){return new zw(a,u,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,dP(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new yI(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}function dE(n,e){ar("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return gP(n,rE.provider,{build:r=>new Bp(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function hE(n){return x(this,null,function*(){ar("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();gP(n,rE.provider,{build:t=>new fI(t,e.cacheSizeBytes)})})}function gP(n,e,t){if((n=Ae(n,rt))._firestoreClient||n._terminated)throw new F(N.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new F(N.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},pP(n)}function fE(n){if(n._initialized&&!n._terminated)throw new F(N.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Mt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>x(this,null,function*(){try{yield function(r){return x(this,null,function*(){if(!no.D())return Promise.resolve();let i=r+"main";yield no.delete(i)})}(zI(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function pE(n){return function(t){let r=new Mt;return t.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return I3(yield sE(t),r)})),r.promise}(jt(n=Ae(n,rt)))}function gE(n){return O3(jt(n=Ae(n,rt)))}function mE(n){return k3(jt(n=Ae(n,rt)))}function yE(n,e){let t=jt(n=Ae(n,rt)),r=new _I;return j3(t,n._databaseId,e,r),r}function vE(n,e){return U3(jt(n=Ae(n,rt)),e).then(t=>t?new Lt(n,null,t.query):null)}var jr=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(ht.fromBase64String(e))}catch(t){throw new F(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var lr=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new F(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var gi=class{constructor(e){this._methodName=e}};var cs=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new F(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new F(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}};var Sl=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var B3=/^__.*__$/,wI=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new cr(e,this.data,this.fieldMask,t,this.fieldTransforms):new uo(e,this.data,t,this.fieldTransforms)}},Hp=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new cr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function mP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z()}}var zp=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Gp(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(mP(this.Cu)&&B3.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},II=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||kl(e)}Qu(e,t,r,i=!1){return new zp({Cu:e,methodName:t,qu:r,path:lt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function ps(n){let e=n._freezeSettings(),t=kl(n._databaseId);return new II(n._databaseId,!!e.ignoreUndefinedProperties,t)}function og(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);IE("Data must be an object, but it was:",s,r);let a=_P(r,s),u,l;if(o.merge)u=new Rn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let f of o.mergeFields){let g=TI(e,f,t);if(!s.contains(g))throw new F(N.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);IP(d,g)||d.push(g)}u=new Rn(d),l=s.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=s.fieldTransforms;return new wI(new Qt(a),u,l)}var Ml=class n extends gi{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function yP(n,e,t){return new zp({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var EI=class n extends gi{_toFieldTransform(e){return new os(e.path,new so)}isEqual(e){return e instanceof n}},DI=class n extends gi{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=yP(this,e,!0),r=this.Ku.map(o=>gs(o,t)),i=new fi(r);return new os(e.path,i)}isEqual(e){return e instanceof n&&nm(this.Ku,e.Ku)}},CI=class n extends gi{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=yP(this,e,!0),r=this.Ku.map(o=>gs(o,t)),i=new pi(r);return new os(e.path,i)}isEqual(e){return e instanceof n&&nm(this.Ku,e.Ku)}},bI=class n extends gi{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new ao(e.serializer,pN(e.serializer,this.$u));return new os(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function _E(n,e,t,r){let i=n.Qu(1,e,t);IE("Data must be an object, but it was:",i,r);let o=[],s=Qt.empty();hs(r,(u,l)=>{let d=EE(e,u,t);l=tt(l);let f=i.Nu(d);if(l instanceof Ml)o.push(d);else{let g=gs(l,f);g!=null&&(o.push(d),s.set(d,g))}});let a=new Rn(o);return new Hp(s,a,i.fieldTransforms)}function wE(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[TI(e,r,t)],u=[i];if(o.length%2!=0)throw new F(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(TI(e,o[g])),u.push(o[g+1]);let l=[],d=Qt.empty();for(let g=a.length-1;g>=0;--g)if(!IP(l,a[g])){let y=a[g],D=u[g];D=tt(D);let C=s.Nu(y);if(D instanceof Ml)l.push(y);else{let A=gs(D,C);A!=null&&(l.push(y),d.set(y,A))}}let f=new Rn(l);return new Hp(d,f,s.fieldTransforms)}function vP(n,e,t,r=!1){return gs(t,n.Qu(r?4:3,e))}function gs(n,e){if(wP(n=tt(n)))return IE("Unsupported field value:",e,n),_P(n,e);if(n instanceof gi)return function(r,i){if(!mP(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=gs(a,i.Lu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=tt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return pN(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ke.fromDate(r);return{timestampValue:Qa(i.serializer,o)}}if(r instanceof Ke){let o=new Ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qa(i.serializer,o)}}if(r instanceof cs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof jr)return{bytesValue:CN(i.serializer,r._byteString)};if(r instanceof ze){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:$I(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Sl)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return BI(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${rg(r)}`)}(n,e)}function _P(n,e){let t={};return YR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hs(n,(r,i)=>{let o=gs(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function wP(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ke||n instanceof cs||n instanceof jr||n instanceof ze||n instanceof gi||n instanceof Sl)}function IE(n,e,t){if(!wP(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=rg(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function TI(n,e,t){if((e=tt(e))instanceof lr)return e._internalPath;if(typeof e=="string")return EE(n,e);throw Gp("Field path arguments must be of type string or ",n,!1,void 0,t)}var $3=new RegExp("[~\\*/\\[\\]]");function EE(n,e,t){if(e.search($3)>=0)throw Gp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new lr(...e.split("."))._internalPath}catch{throw Gp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Gp(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new F(N.INVALID_ARGUMENT,a+n+u)}function IP(n,e){return n.some(t=>t.isEqual(e))}var ls=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ze(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new AI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(sg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},AI=class extends ls{data(){return super.data()}};function sg(n,e){return typeof e=="string"?EE(n,e):e instanceof lr?e._internalPath:e._delegate._internalPath}function EP(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new F(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var xl=class{},ds=class extends xl{};function Ur(n,e,...t){let r=[];e instanceof xl&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof SI).length,a=o.filter(u=>u instanceof Wp).length;if(s>1||s>0&&a>0)throw new F(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Wp=class n extends ds{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return CP(e._query,t),new Lt(e.firestore,e.converter,i0(e._query,t))}_parse(e){let t=ps(e.firestore);return function(o,s,a,u,l,d,f){let g;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new F(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){LR(f,d);let y=[];for(let D of f)y.push(VR(u,o,D));g={arrayValue:{values:y}}}else g=VR(u,o,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||LR(f,d),g=vP(a,s,f,d==="in"||d==="not-in");return Ie.create(l,d,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function DE(n,e,t){let r=e,i=sg("where",n);return Wp._create(i,r,t)}var SI=class n extends xl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Oe.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)CP(s,u),s=i0(s,u)}(e._query,t),new Lt(e.firestore,e.converter,i0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var MI=class n extends ds{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new F(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new F(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new rs(o,s)}(e._query,this._field,this._direction);return new Lt(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new ur(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function CE(n,e="asc"){let t=e,r=sg("orderBy",n);return MI._create(r,t)}var Kp=class n extends ds{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Lt(e.firestore,e.converter,hp(e._query,this._limit,this._limitType))}};function bE(n){return hP("limit",n),Kp._create("limit",n,"F")}function TE(n){return hP("limitToLast",n),Kp._create("limitToLast",n,"L")}var Qp=class n extends ds{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=DP(e,this.type,this._docOrFields,this._inclusive);return new Lt(e.firestore,e.converter,function(i,o){return new ur(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function AE(...n){return Qp._create("startAt",n,!0)}function SE(...n){return Qp._create("startAfter",n,!1)}var Yp=class n extends ds{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=DP(e,this.type,this._docOrFields,this._inclusive);return new Lt(e.firestore,e.converter,function(i,o){return new ur(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function ME(...n){return Yp._create("endBefore",n,!1)}function xE(...n){return Yp._create("endAt",n,!0)}function DP(n,e,t,r){if(t[0]=tt(t[0]),t[0]instanceof ls)return function(o,s,a,u,l){if(!u)throw new F(N.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let f of Ba(o))if(f.field.isKeyField())d.push(ns(s,u.key));else{let g=u.data.field(f.field);if(Jp(g))throw new F(N.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){let y=f.field.canonicalString();throw new F(N.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}d.push(g)}return new Vr(d,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=ps(n.firestore);return function(s,a,u,l,d,f){let g=s.explicitOrderBy;if(d.length>g.length)throw new F(N.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let D=0;D<d.length;D++){let C=d[D];if(g[D].field.isKeyField()){if(typeof C!="string")throw new F(N.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof C}`);if(!jI(s)&&C.indexOf("/")!==-1)throw new F(N.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${C}' contains a slash.`);let A=s.path.child(be.fromString(C));if(!z.isDocumentKey(A))throw new F(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${A}' is not because it contains an odd number of segments.`);let V=new z(A);y.push(ns(a,V))}else{let A=vP(u,l,C);y.push(A)}}return new Vr(y,f)}(n._query,n.firestore._databaseId,i,e,t,r)}}function VR(n,e,t){if(typeof(t=tt(t))=="string"){if(t==="")throw new F(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jI(e)&&t.indexOf("/")!==-1)throw new F(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(be.fromString(t));if(!z.isDocumentKey(r))throw new F(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ns(n,new z(r))}if(t instanceof ze)return ns(n,t._key);throw new F(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rg(t)}.`)}function LR(n,e){if(!Array.isArray(n)||n.length===0)throw new F(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function CP(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new F(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new F(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var ou=class{convertValue(e,t="none"){switch(ts(e)){case 0:return null;case 1:return e.booleanValue;case 2:return et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ro(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Z()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return hs(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>et(s.doubleValue));return new Sl(o)}convertGeoPoint(e){return new cs(et(e.latitude),et(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=VI(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(fl(e));default:return null}}convertTimestamp(e){let t=hi(e);return new Ke(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=be.fromString(e);ee(kN(r));let i=new io(r.get(1),r.get(3)),o=new z(r.popFirst(5));return i.isEqual(t)||ct(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function ag(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var xI=class extends ou{constructor(e){super(),this.firestore=e}convertBytes(e){return new jr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new ze(this.firestore,null,t)}};var di=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Kn=class extends ls{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new eo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(sg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},eo=class extends Kn{data(e={}){return super.data(e)}},dr=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new di(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new eo(this._firestore,this._userDataWriter,r.key,r,new di(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new F(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new eo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new di(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new eo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new di(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:q3(a.type),doc:u,oldIndex:l,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function q3(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z()}}function ug(n,e){return n instanceof Kn&&e instanceof Kn?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof dr&&e instanceof dr&&n._firestore===e._firestore&&ig(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function cg(n){n=Ae(n,ze);let e=Ae(n.firestore,rt);return cP(jt(e),n._key).then(t=>VE(e,n,t))}var mi=class extends ou{constructor(e){super(),this.firestore=e}convertBytes(e){return new jr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new ze(this.firestore,null,t)}};function RE(n){n=Ae(n,ze);let e=Ae(n.firestore,rt),t=jt(e),r=new mi(e);return F3(t,n._key).then(i=>new Kn(e,r,n._key,i,new di(i!==null&&i.hasLocalMutations,!0),n.converter))}function NE(n){n=Ae(n,ze);let e=Ae(n.firestore,rt);return cP(jt(e),n._key,{source:"server"}).then(t=>VE(e,n,t))}function PE(n){n=Ae(n,Lt);let e=Ae(n.firestore,rt),t=jt(e),r=new mi(e);return EP(n._query),lP(t,n._query).then(i=>new dr(e,r,n,i))}function OE(n){n=Ae(n,Lt);let e=Ae(n.firestore,rt),t=jt(e),r=new mi(e);return V3(t,n._query).then(i=>new dr(e,r,n,i))}function kE(n){n=Ae(n,Lt);let e=Ae(n.firestore,rt),t=jt(e),r=new mi(e);return lP(t,n._query,{source:"server"}).then(i=>new dr(e,r,n,i))}function lg(n,e,t){n=Ae(n,ze);let r=Ae(n.firestore,rt),i=ag(n.converter,e,t);return fu(r,[og(ps(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,at.none())])}function jl(n,e,t,...r){n=Ae(n,ze);let i=Ae(n.firestore,rt),o=ps(i),s;return s=typeof(e=tt(e))=="string"||e instanceof lr?wE(o,"updateDoc",n._key,e,t,r):_E(o,"updateDoc",n._key,e),fu(i,[s.toMutation(n._key,at.exists(!0))])}function dg(n){return fu(Ae(n.firestore,rt),[new co(n._key,at.none())])}function hg(n,e){let t=Ae(n.firestore,rt),r=fs(n),i=ag(n.converter,e);return fu(t,[og(ps(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,at.exists(!1))]).then(()=>r)}function hu(n,...e){var t,r,i;n=tt(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||vI(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(vI(e[s])){let f=e[s];e[s]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[s+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let u,l,d;if(n instanceof ze)l=Ae(n.firestore,rt),d=au(n._key.path),u={next:f=>{e[s]&&e[s](VE(l,n,f))},error:e[s+1],complete:e[s+2]};else{let f=Ae(n,Lt);l=Ae(f.firestore,rt),d=f._query;let g=new mi(l);u={next:y=>{e[s]&&e[s](new dr(l,g,f,y))},error:e[s+1],complete:e[s+2]},EP(n._query)}return function(g,y,D,C){let A=new ru(C),V=new Al(y,A,D);return g.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return QI(yield iu(g),V)})),()=>{A.Za(),g.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return YI(yield iu(g),V)}))}}(jt(l),d,a,u)}function FE(n,e){return L3(jt(n=Ae(n,rt)),vI(e)?e:{next:e})}function fu(n,e){return function(r,i){let o=new Mt;return r.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return y3(yield sE(r),i,o)})),o.promise}(jt(n),e)}function VE(n,e,t){let r=t.docs.get(e._key),i=new mi(n);return new Kn(n,i,e._key,r,new di(t.hasPendingWrites,t.fromCache),e.converter)}var H3={maxAttempts:5};var Zp=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ps(e)}set(e,t,r){this._verifyNotCommitted();let i=Ji(e,this._firestore),o=ag(i.converter,t,r),s=og(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,at.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=Ji(e,this._firestore),s;return s=typeof(t=tt(t))=="string"||t instanceof lr?wE(this._dataReader,"WriteBatch.update",o._key,t,r,i):_E(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,at.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Ji(e,this._firestore);return this._mutations=this._mutations.concat(new co(t._key,at.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new F(N.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ji(n,e){if((n=tt(n)).firestore!==e)throw new F(N.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var RI=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=ps(t)}get(t){let r=Ji(t,this._firestore),i=new xI(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return Z();let s=o[0];if(s.isFoundDocument())return new ls(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new ls(this._firestore,i,r._key,null,r.converter);throw Z()})}set(t,r,i){let o=Ji(t,this._firestore),s=ag(o.converter,r,i),a=og(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=Ji(t,this._firestore),a;return a=typeof(r=tt(r))=="string"||r instanceof lr?wE(this._dataReader,"Transaction.update",s._key,r,i,o):_E(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=Ji(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Ji(e,this._firestore),r=new mi(this._firestore);return super.get(e).then(i=>new Kn(this._firestore,r,t._key,i._document,new di(!1,!1),t.converter))}};function LE(n,e,t){n=Ae(n,rt);let r=Object.assign(Object.assign({},H3),t);return function(o){if(o.maxAttempts<1)throw new F(N.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let u=new Mt;return o.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){let l=yield P3(o);new mI(o.asyncQueue,l,a,s,u).au()})),u.promise}(jt(n),i=>e(new RI(n,i)),r)}function jE(){return new Ml("deleteField")}function UE(){return new EI("serverTimestamp")}function BE(...n){return new DI("arrayUnion",n)}function $E(...n){return new CI("arrayRemove",n)}function qE(n){return new bI("increment",n)}(function(e,t=!0){(function(i){su=i})(lC),Lu(new Io("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new rt(new kw(r.getProvider("auth-internal")),new jw(r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new F(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new io(l.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),dn(Fx,"4.7.3",e),dn(Fx,"4.7.3","esm2017")})();var z3="@firebase/firestore-compat",G3="0.3.38";function QE(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new F("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function bP(){if(typeof Uint8Array>"u")throw new F("unimplemented","Uint8Arrays are not available in this environment.")}function TP(){if(!ZR())throw new F("unimplemented","Blobs are unavailable in Firestore in this environment.")}var fg=class n{constructor(e){this._delegate=e}static fromBase64String(e){return TP(),new n(jr.fromBase64String(e))}static fromUint8Array(e){return bP(),new n(jr.fromUint8Array(e))}toBase64(){return TP(),this._delegate.toBase64()}toUint8Array(){return bP(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function HE(n){return W3(n,["next","error","complete"])}function W3(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var zE=class{enableIndexedDbPersistence(e,t){return dE(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return hE(e._delegate)}clearIndexedDbPersistence(e){return fE(e._delegate)}},pg=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof io||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ar("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){cE(this._delegate,e,t,r)}enableNetwork(){return gE(this._delegate)}disableNetwork(){return mE(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,uE("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return pE(this._delegate)}onSnapshotsInSync(e){return FE(this._delegate,e)}get app(){if(!this._appCompat)throw new F("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new mu(this,Vl(this._delegate,e))}catch(t){throw ln(t,"collection()","Firestore.collection()")}}doc(e){try{return new Br(this,fs(this._delegate,e))}catch(t){throw ln(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new _s(this,lE(this._delegate,e))}catch(t){throw ln(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return LE(this._delegate,t=>e(new gg(this,t)))}batch(){return jt(this._delegate),new mg(new Zp(this._delegate,e=>fu(this._delegate,e)))}loadBundle(e){return yE(this._delegate,e)}namedQuery(e){return vE(this._delegate,e).then(t=>t?new _s(this,t):null)}},pu=class extends ou{constructor(e){super(),this.firestore=e}convertBytes(e){return new fg(new jr(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return Br.forKey(t,this.firestore,null)}};function K3(n){NI(n)}var gg=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new pu(e)}get(e){let t=ms(e);return this._delegate.get(t).then(r=>new ys(this._firestore,new Kn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=ms(e);return r?(QE("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=ms(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=ms(e);return this._delegate.delete(t),this}},mg=class{constructor(e){this._delegate=e}set(e,t,r){let i=ms(e);return r?(QE("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=ms(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=ms(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},gu=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new eo(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new vs(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new pu(e),t),i.set(t,o)),o}};gu.INSTANCES=new WeakMap;var Br=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new pu(e)}static forPath(e,t,r){if(e.length%2!==0)throw new F("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new ze(t._delegate,r,new z(e)))}static forKey(e,t,r){return new n(t,new ze(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new mu(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new mu(this.firestore,Vl(this._delegate,e))}catch(t){throw ln(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=tt(e),e instanceof ze?Ll(this._delegate,e):!1}set(e,t){t=QE("DocumentReference.set",t);try{return t?lg(this._delegate,e,t):lg(this._delegate,e)}catch(r){throw ln(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?jl(this._delegate,e):jl(this._delegate,e,t,...r)}catch(i){throw ln(i,"updateDoc()","DocumentReference.update()")}}delete(){return dg(this._delegate)}onSnapshot(...e){let t=AP(e),r=SP(e,i=>new ys(this.firestore,new Kn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return hu(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=RE(this._delegate):e?.source==="server"?t=NE(this._delegate):t=cg(this._delegate),t.then(r=>new ys(this.firestore,new Kn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(gu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function ln(n,e,t){return n.message=n.message.replace(e,t),n}function AP(n){for(let e of n)if(typeof e=="object"&&!HE(e))return e;return{}}function SP(n,e){var t,r;let i;return HE(n[0])?i=n[0]:HE(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var ys=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Br(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return ug(this._delegate,e._delegate)}},vs=class extends ys{data(e){let t=this._delegate.data(e);return this._delegate._converter||jR(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},_s=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new pu(e)}where(e,t,r){try{return new n(this.firestore,Ur(this._delegate,DE(e,t,r)))}catch(i){throw ln(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,Ur(this._delegate,CE(e,t)))}catch(r){throw ln(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,Ur(this._delegate,bE(e)))}catch(t){throw ln(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,Ur(this._delegate,TE(e)))}catch(t){throw ln(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,Ur(this._delegate,AE(...e)))}catch(t){throw ln(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,Ur(this._delegate,SE(...e)))}catch(t){throw ln(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,Ur(this._delegate,ME(...e)))}catch(t){throw ln(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,Ur(this._delegate,xE(...e)))}catch(t){throw ln(t,"endAt()","Query.endAt()")}}isEqual(e){return ig(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=OE(this._delegate):e?.source==="server"?t=kE(this._delegate):t=PE(this._delegate),t.then(r=>new Ul(this.firestore,new dr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=AP(e),r=SP(e,i=>new Ul(this.firestore,new dr(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return hu(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(gu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},GE=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new vs(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Ul=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new _s(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new vs(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new GE(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new vs(this._firestore,r))})}isEqual(e){return ug(this._delegate,e._delegate)}},mu=class n extends _s{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Br(this.firestore,e):null}doc(e){try{return e===void 0?new Br(this.firestore,fs(this._delegate)):new Br(this.firestore,fs(this._delegate,e))}catch(t){throw ln(t,"doc()","CollectionReference.doc()")}}add(e){return hg(this._delegate,e).then(t=>new Br(this.firestore,t))}isEqual(e){return Ll(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(gu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function ms(n){return Ae(n,ze)}var WE=class n{constructor(...e){this._delegate=new lr(...e)}static documentId(){return new n(lt.keyField().canonicalString())}isEqual(e){return e=tt(e),e instanceof lr?this._delegate._internalPath.isEqual(e._internalPath):!1}};var KE=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=UE();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=jE();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=BE(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=$E(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=qE(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var Q3={Firestore:pg,GeoPoint:cs,Timestamp:Ke,Blob:fg,Transaction:gg,WriteBatch:mg,DocumentReference:Br,DocumentSnapshot:ys,Query:_s,QueryDocumentSnapshot:vs,QuerySnapshot:Ul,CollectionReference:mu,FieldPath:WE,FieldValue:KE,setLogLevel:K3,CACHE_SIZE_UNLIMITED:fP};function Y3(n,e){n.INTERNAL.registerComponent(new Io("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Q3)))}function Z3(n){Y3(n,(e,t)=>new pg(e,t,new zE)),n.registerVersion(z3,G3)}Z3(Jt);function J3(n,e=$u){return new ce(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function MP(n,e){return J3(n,e)}function X3(n,e){return MP(n,e).pipe(Ti(void 0),Vs(),X(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function JE(n,e){return MP(n,e).pipe(X(t=>({payload:t,type:"query"})))}var yg=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=OP(r,t);return new _g(i,o,this.afs)}snapshotChanges(){return X3(this.ref,this.afs.schedulers.outsideAngular).pipe(an)}valueChanges(e={}){return this.snapshotChanges().pipe(X(({payload:t})=>e.idField?Me(W({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return _e(this.ref.get(e)).pipe(an)}};function vg(n,e){return JE(n,e).pipe(Ti(void 0),Vs(),X(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let l=o.find(f=>f.doc.ref.isEqual(a.ref)),d=r?.payload.docs.find(f=>f.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function xP(n,e,t){return vg(n,t).pipe(bi((r,i)=>eH(r,i.map(o=>o.payload),e),[]),kd(),X(r=>r.map(i=>({type:i.type,payload:i}))))}function eH(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=tH(n,r))}),n}function YE(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function tH(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return YE(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return YE(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return YE(n,e.oldIndex,1);break}return n}function RP(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var _g=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=vg(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(X(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Ti(void 0),Vs(),pt(([r,i])=>i.length>0||!r),X(([,r])=>r),an)}auditTrail(e){return this.stateChanges(e).pipe(bi((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=RP(e);return xP(this.query,t,this.afs.schedulers.outsideAngular).pipe(an)}valueChanges(e={}){return JE(this.query,this.afs.schedulers.outsideAngular).pipe(X(t=>t.payload.docs.map(r=>e.idField?Me(W({},r.data()),{[e.idField]:r.id}):r.data())),an)}get(e){return _e(this.query.get(e)).pipe(an)}add(e){return this.ref.add(e)}doc(e){return new yg(this.ref.doc(e),this.afs)}},ZE=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?vg(this.query,this.afs.schedulers.outsideAngular).pipe(an):vg(this.query,this.afs.schedulers.outsideAngular).pipe(X(t=>t.filter(r=>e.indexOf(r.type)>-1)),pt(t=>t.length>0),an)}auditTrail(e){return this.stateChanges(e).pipe(bi((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=RP(e);return xP(this.query,t,this.afs.schedulers.outsideAngular).pipe(an)}valueChanges(e={}){return JE(this.query,this.afs.schedulers.outsideAngular).pipe(X(r=>r.payload.docs.map(i=>e.idField?W({[e.idField]:i.id},i.data()):i.data())),an)}get(e){return _e(this.query.get(e)).pipe(an)}},NP=new q("angularfire2.enableFirestorePersistence"),PP=new q("angularfire2.firestore.persistenceSettings"),nH=new q("angularfire2.firestore.settings"),rH=new q("angularfire2.firestore.use-emulator");function OP(n,e=t=>t){return{query:e(n),ref:n}}var iH=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,u,l,d,f,g,y,D,C,A,V,G){this.schedulers=u;let k=Zc(t,a,r),J=d;f&&Iw(k,a,g,D,C,A,y,V),[this.firestore,this.persistenceEnabled$]=qf(`${k.name}.firestore`,"AngularFirestore",k.name,()=>{let oe=a.runOutsideAngular(()=>k.firestore());if(o&&oe.settings(o),J&&oe.useEmulator(...J),i&&!oi(s)){let re=()=>{try{return _e(oe.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(I){return typeof console<"u"&&console.warn(I),te(!1)}};return[oe,a.runOutsideAngular(re)]}else return[oe,te(!1)]},[o,J,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=OP(i,r),a=this.schedulers.ngZone.run(()=>o);return new _g(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new ZE(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new yg(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(j(Aa),j(Sa,8),j(NP,8),j(nH,8),j(bt),j(Ee),j(Ca),j(PP,8),j(rH,8),j(Go,8),j(gw,8),j(mw,8),j(yw,8),j(vw,8),j(_w,8),j(ww,8),j(Gi,8))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),kP=(()=>{class n{constructor(){Jt.registerVersion("angularfire",zn.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:NP,useValue:!0},{provide:PP,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=yt({type:n});static \u0275inj=mt({providers:[iH]})}return n})();var wg=class{constructor(e,t,r,i){this.userId=e,this.dateCommande=t,this.detail=r,this.montant=i}};var yu=(()=>{class n{constructor(){this.PanierSubject=new Dt([])}addToCart(t){let r=this.PanierSubject.getValue(),i=r.find(o=>o.produit.id===t.id);i?i.quantite++:r.push({produit:t,quantite:1}),this.PanierSubject.next(r)}panier(){return this.PanierSubject.asObservable()}Supprimerproduit(t){let r=this.PanierSubject.getValue();r=r.filter(i=>i.produit.id!==t.id),this.PanierSubject.next(r)}TotalQuantite(){return this.PanierSubject.getValue().reduce((r,i)=>r+i.quantite,0)}updatepanier(){let r=this.PanierSubject.getValue().map(i=>(i.quantite<1&&(i.quantite=1),i));this.PanierSubject.next(r)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ig=function(){return Ig=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Ig.apply(this,arguments)};var sH={includeMetadataChanges:!1};function FP(n,e){return e===void 0&&(e=sH),new ce(function(t){var r=hu(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function VP(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:Ig(Ig({},r),(t={},t[e.idField]=n.id,t))}function LP(n){return FP(n,{includeMetadataChanges:!0}).pipe(X(function(e){return e.docs}))}function jP(n,e){return e===void 0&&(e={}),LP(n).pipe(X(function(t){return t.map(function(r){return VP(r,e)})}))}var go=class{constructor(e){return e}},UP="firestore",eD=class{constructor(){return uw(UP)}};var BP=new q("angularfire2.firestore-instances");function aH(n,e){let t=fx(UP,n,e);return t&&new go(t)}var uH={provide:eD,deps:[[new Dn,BP]]},cH={provide:go,useFactory:aH,deps:[[new Dn,BP],ba]},$P=(()=>{class n{constructor(){dn("angularfire",zn.full,"fst")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=yt({type:n});static \u0275inj=mt({providers:[cH,uH]})}return n})();var qP=ui(jP,!0);var HP=ui(hg,!0);var Eg=ui(Vl,!0);var zP=ui(dg,!0);var Dg=ui(fs,!0);var GP=ui(cg,!0);var WP=ui(jl,!0);var Cg=(()=>{class n{constructor(t){this.fireStore=t}addCommande(t){let r=Eg(this.fireStore,"orders");HP(r,W({},t)).then(()=>alert("Successfully added !!")).catch(i=>console.log("Error adding document:",i))}getAllOrders(){let t=Eg(this.fireStore,"orders");return qP(t,{idField:"id"})}getOrderId(t){let r=Eg(this.fireStore,"orders"),i=Dg(this.fireStore,"orders",t);return GP(i)}updateOrder(t){let r=Dg(this.fireStore,"products",t);WP(r,{name:"updated name",montant:1e3}).then(()=>console.log(`Order with ${t} updated successfully ! `)).catch(o=>console.log(o))}deleteOrder(t){let r=Dg(this.fireStore,"orders",t);zP(r).then(()=>console.log("data deleted !")).catch(i=>console.log(i))}static{this.\u0275fac=function(r){return new(r||n)(j(go))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var _n=(()=>{class n{constructor(t,r){this.fireAuth=t,this.router=r,this.isAuthenticated=!1}iAuth(){return this.isAuthenticated}setTrue(){this.isAuthenticated=!0}setFalse(){this.isAuthenticated=!1}login(t,r){this.fireAuth.signInWithEmailAndPassword(t,r).then(()=>{this.setTrue(),this.router.navigate(["/Listproduit"])}).catch(i=>{alert(i.message)})}register(t,r){this.fireAuth.createUserWithEmailAndPassword(t,r).then(()=>{this.setTrue(),alert("Successfully registered"),this.router.navigate(["/Auth"])}).catch(i=>{alert(i.message)})}getToken(){return""}getIdUser(){return x(this,null,function*(){try{let t=yield this.fireAuth.currentUser;if(t){let r=t.uid;return console.log("User ID:",r),r}else return console.log("No user is signed in."),null}catch(t){return console.error("Error fetching user ID:",t),null}})}static{this.\u0275fac=function(r){return new(r||n)(j(Go),j(He))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function dH(n,e){if(n&1){let t=on();P(0,"tr")(1,"td"),ye(2,"img",7),O(),P(3,"td"),Q(4),O(),P(5,"td",8),Q(6),ir(7,"currency"),O(),P(8,"td",9)(9,"input",10),St("ngModelChange",function(i){let o=Fe(t).$implicit;return Pt(o.quantite,i)||(o.quantite=i),Ve(i)}),we("change",function(){Fe(t);let i=Tt();return Ve(i.updatepanier())}),O()(),P(10,"td",11),Q(11),ir(12,"currency"),O(),P(13,"td")(14,"button",12),we("click",function(){let i=Fe(t).$implicit,o=Tt();return Ve(o.removeFromCart(i.produit))}),Q(15,"Supprimer"),O()()()}if(n&2){let t=e.$implicit;Y(2),le("ngSrc",t.produit.images[0]),Y(2),Wt(t.produit.description),Y(2),Wt(Fi(7,5,t.produit.price,"USD")),Y(3),At("ngModel",t.quantite),Y(2),Wt(Fi(12,8,t.quantite*t.produit.price,"USD"))}}var QP=(()=>{class n{constructor(t,r,i,o){this.router=t,this.PanierService=r,this.CommandeService=i,this.AuthService=o,this.Panier=[],this.totalPrice=0,this.Quantity=0}ngOnInit(){this.PanierService.panier().subscribe(t=>{this.Panier=t}),this.updatepanier()}removeFromCart(t){this.PanierService.Supprimerproduit(t),this.updatepanier()}calculateTotalPrice(t){this.totalPrice=t.reduce((r,i)=>r+i.quantite*i.produit.price,0)}updatepanier(){this.PanierService.updatepanier(),this.calculateTotalPrice(this.Panier),this.getTotalQuantite()}getTotalQuantite(){this.Quantity=this.PanierService.TotalQuantite()}Commander(){return x(this,null,function*(){let t=yield this.AuthService.getIdUser();if(!t){console.error("User ID is not available. Cannot proceed with the order.");return}let r=this.totalPrice,i=this.Panier,o=new Date,s=new wg(t,o,i,r);this.CommandeService.addCommande(s),this.router.navigate(["/Orders"])})}static{this.\u0275fac=function(r){return new(r||n)(U(He),U(yu),U(Cg),U(_n))}}static{this.\u0275cmp=Je({type:n,selectors:[["app-panier"]],standalone:!0,features:[Xe],decls:27,vars:6,consts:[[1,"handwritten","text-black","mt-5","ms-5","bi","bi-bag-check"],[1,"container","mt-5"],[1,"styled-table"],[4,"ngFor","ngForOf"],[1,"total-row"],["colspan","5",2,"text-align","right"],[1,"btn","btn-success",3,"click"],["width","50","height","50",3,"ngSrc"],[1,"price"],[1,"quantity-input"],["type","number","min","1",1,"form-control",3,"ngModelChange","change","ngModel"],[1,"total"],[1,"btn","btn-danger",3,"click"]],template:function(r,i){r&1&&(P(0,"h2",0),Q(1),O(),P(2,"div",1)(3,"table",2)(4,"thead")(5,"tr")(6,"th"),Q(7,"Image"),O(),P(8,"th"),Q(9,"D\xE9signation"),O(),P(10,"th"),Q(11,"Prix (USD)"),O(),P(12,"th"),Q(13,"Quantit\xE9"),O(),P(14,"th"),Q(15,"Totale (USD)"),O(),P(16,"th"),Q(17,"Action"),O()()(),P(18,"tbody"),st(19,dH,16,11,"tr",3),P(20,"tr",4)(21,"td",5),Q(22),ir(23,"currency"),O(),P(24,"td")(25,"button",6),we("click",function(){return i.Commander()}),Q(26,"COMMANDER"),O()()()()()()),r&2&&(Y(),Nt(" Mon Panier ( ",i.Quantity," produit(s))"),Y(18),le("ngForOf",i.Panier),Y(3),Nt("Total : ",Fi(23,3,i.totalPrice,"USD"),""))},dependencies:[yn,Hn,Wc,xr,sw,ai,br,fS,ef,kP],styles:[".quantity-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:60px;text-align:center}.styled-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-family:Arial,sans-serif;margin-bottom:20px}.styled-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .styled-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;border-bottom:1px solid #ddd}.styled-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#f2f2f2;color:#333;font-weight:700}.styled-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.styled-table[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%], .styled-table[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{text-align:right}.total-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-weight:700;background-color:#f9f9f9}@media screen and (max-width: 768px){.table-container[_ngcontent-%COMP%]{padding:5px}.styled-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .styled-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px}}.handwritten[_ngcontent-%COMP%]{font-family:Patrick Hand,cursive}"]})}}return n})();var hH=()=>({color:"orange"}),YP=n=>({color:n});function fH(n,e){if(n&1&&(P(0,"span",9)(1,"strong"),Q(2),O()()),n&2){let t=Tt();le("ngStyle",Tv(2,YP,t.getColor())),Y(2),Wt(t.getStatut())}}function pH(n,e){if(n&1&&(P(0,"span",9)(1,"strong"),Q(2),O()()),n&2){let t=Tt();le("ngStyle",Tv(2,YP,t.getColor())),Y(2),Wt(t.getStatut())}}function gH(n,e){if(n&1){let t=on();P(0,"a",10),we("click",function(){Fe(t);let i=Tt();return Ve(i.addTopanier())}),Q(1," Ajouter au panier "),ye(2,"i",11),O()}}var bg=(()=>{class n{constructor(t,r){this.panier=t,this.route=r,this.SelectedProduct=new Ze}addTopanier(){this.panier.addToCart(this.product)}getColor(){return this.getStatut()=="En Stock"?"green":"red"}getStatut(){return this.product.stock>0?"En Stock":"En rupture de Stock"}ProductSelected(){this.route.navigate(["/Produit",this.product.id])}static{this.\u0275fac=function(r){return new(r||n)(U(yu),U(He))}}static{this.\u0275cmp=Je({type:n,selectors:[["app-product-items"]],inputs:{product:"product"},outputs:{SelectedProduct:"SelectedProduct"},standalone:!0,features:[Xe],decls:16,vars:9,consts:[[1,"card","h-100"],[1,"d-flex","justify-content-center","align-items-center"],["alt","Card image",1,"card-img-top","img-fluid","w-50",3,"src"],[1,"card-body"],[3,"ngStyle",4,"ngIf"],[1,"bg-transparent","border-0",3,"click","ngStyle"],[1,"card-title","text-secondary"],[1,"card-text"],["class","btn btn-success",3,"click",4,"ngIf"],[3,"ngStyle"],[1,"btn","btn-success",3,"click"],[1,"bi","bi-basket"]],template:function(r,i){r&1&&(P(0,"div",0)(1,"div",1),ye(2,"img",2),O(),P(3,"div",3),st(4,fH,3,4,"span",4)(5,pH,3,4,"span",4),ye(6,"br"),P(7,"button",5),we("click",function(){return i.ProductSelected()}),P(8,"strong"),Q(9),O()(),P(10,"h4",6),Q(11),O(),P(12,"p",7),Q(13),ye(14,"br"),O(),st(15,gH,3,0,"a",8),O()()),r&2&&(Y(2),le("src",i.product.images[0],Dr),Y(2),le("ngIf",i.product.stock===0),Y(),le("ngIf",i.product.stock>0),Y(2),le("ngStyle",kh(8,hH)),Y(2),Wt(i.product.title),Y(2),Nt("",i.product.price," $"),Y(2),Nt(" ",i.product.description," "),Y(2),le("ngIf",i.product.stock>0))},dependencies:[cS,Tr],styles:[".card[_ngcontent-%COMP%]{transition:transform .3s ease,box-shadow .3s ease}.card[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 4px 20px #0ff3}"]})}}return n})();var mo=(()=>{class n{constructor(t){this.http=t}getAllProducts(){return this.http.get("https://dummyjson.com/products")}getProductsByCategory(t){return this.http.get("https://dummyjson.com/products/category/"+t)}getListCategory(){return this.http.get("https://dummyjson.com/products/category-list")}getProductBykey(t){return this.http.get(`https://dummyjson.com/products/search?q=${t}`)}getProductById(t){return this.http.get(`https://dummyjson.com/products/${t}`)}static{this.\u0275fac=function(r){return new(r||n)(j(e_))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function mH(n,e){if(n&1&&(P(0,"option",17),Q(1),O()),n&2){let t=e.$implicit;le("value",t),Y(),Nt(" ",t," ")}}function yH(n,e){if(n&1){let t=on();P(0,"li",12)(1,"a",18),we("click",function(){Fe(t);let i=Tt();return Ve(i.Auth())}),O()()}}function vH(n,e){if(n&1){let t=on();P(0,"li",12)(1,"a",19),we("click",function(){Fe(t);let i=Tt();return Ve(i.LogOut())}),O()()}}var ZP=(()=>{class n{constructor(t,r,i,o){this.cdr=t,this.p=r,this.AuthService=i,this.router=o,this.categories=[],this.Authen=this.AuthService.iAuth()}ngOnInit(){this.p.getListCategory().subscribe(t=>{console.log(t),this.categories=t},t=>{console.error("Erreur lors de la r\xE9cup\xE9ration des cat\xE9gories:",t)})}searchbycategorie(){this.selectedCategory&&this.router.navigate(["/Listproduit"],{queryParams:{cat:this.selectedCategory}})}searchByKey(){this.searchKey&&this.router.navigate(["/Listproduit"],{queryParams:{recherche:this.searchKey}})}Auth(){this.Authen=!0}LogOut(){confirm("\xCAtes-vous s\xFBr de vouloir vous d\xE9connecter ?")&&(this.AuthService.setFalse(),this.Authen=!1,this.cdr.detectChanges())}static{this.\u0275fac=function(r){return new(r||n)(U(jn),U(mo),U(_n),U(He))}}static{this.\u0275cmp=Je({type:n,selectors:[["app-navbar"]],standalone:!0,features:[Xe],decls:23,vars:5,consts:[[1,"navbar","navbar-expand-sm","navbar-light"],[1,"container-fluid"],["href","#",1,"navbar-brand"],[1,"d-flex","w-50"],["name","category",1,"form-select","me-2","bg-light",2,"width","15%",3,"ngModelChange","ngModel"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],[1,"d-flex","w-100"],["name","searchTerm","type","text","placeholder","Cherchez un produit, une marque ou une cat\xE9gorie","aria-label","Search",1,"form-control","me-2",2,"width","60%",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","bi-search",3,"click"],["id","mynavbar",1,"navbar-collapse","d-flex"],[1,"navbar-nav","ms-auto"],[1,"nav-item"],["routerLink","/Listproduit",1,"nav-link","bi","bi-house"],["class","nav-item",4,"ngIf"],["routerLink","/Orders",1,"nav-link","bi","bi-card-list"],["routerLink","/Panier","routerLinkActive","active",1,"nav-link","bi","bi-cart"],[3,"value"],["routerLink","/Auth",1,"nav-link","bi","bi-person-fill",3,"click"],[1,"nav-link","bi","bi-box-arrow-right",3,"click"]],template:function(r,i){r&1&&(P(0,"nav",0)(1,"div",1)(2,"a",2),Q(3,"EmiShop"),O(),P(4,"div",3)(5,"select",4),St("ngModelChange",function(s){return Pt(i.selectedCategory,s)||(i.selectedCategory=s),s}),we("ngModelChange",function(){return i.searchbycategorie()}),P(6,"option",5),Q(7,"All"),O(),st(8,mH,2,2,"option",6),O(),P(9,"div",7)(10,"input",8),we("ngModelChange",function(){return i.searchByKey()}),St("ngModelChange",function(s){return Pt(i.searchKey,s)||(i.searchKey=s),s}),O(),P(11,"button",9),we("click",function(){return i.searchByKey()}),Q(12,"Rechercher"),O()()(),P(13,"div",10)(14,"ul",11)(15,"li",12),ye(16,"a",13),O(),st(17,yH,2,0,"li",14)(18,vH,2,0,"li",14),P(19,"li",12),ye(20,"a",15),O(),P(21,"li",12),ye(22,"a",16),O()()()()()),r&2&&(Y(5),At("ngModel",i.selectedCategory),Y(3),le("ngForOf",i.categories),Y(2),At("ngModel",i.searchKey),Y(7),le("ngIf",i.Authen===!1),Y(),le("ngIf",i.Authen===!0))},dependencies:[$i,yn,sx,ux,Hn,Lf,xr,ai,br,Tr,wM],styles:[".navbar[_ngcontent-%COMP%]{box-shadow:0 4px 20px #0ff3}.navbar-brand[_ngcontent-%COMP%]{color:#000;font-weight:700}.navbar-brand[_ngcontent-%COMP%]:hover{color:red}.nav-link[_ngcontent-%COMP%]{color:#000;font-weight:700}.nav-link[_ngcontent-%COMP%]:hover{color:#00bfff}"]})}}return n})();var Ag=class{constructor(e,t){this.produit=e,this.quantite=t}};var JP=(()=>{class n{ngOnInit(){}constructor(t){this.fb=t,this.LesCommentiares=new Ze,this.nextId=1,this.commentaireForm=this.fb.group({user:["",ma.required],contenu:["",ma.required],rating:["",ma.required]})}ajouterCommentaire(){if(this.commentaireForm.valid){let t={user:this.commentaireForm.value.user,comment:this.commentaireForm.value.contenu,rating:this.commentaireForm.value.rating,date:new Date};this.commentaire=t,this.LesCommentiares.emit(this.commentaire),this.commentaireForm.reset()}}static{this.\u0275fac=function(r){return new(r||n)(U(dx))}}static{this.\u0275cmp=Je({type:n,selectors:[["app-commentaire"]],outputs:{LesCommentiares:"LesCommentiares"},standalone:!0,features:[Xe],decls:18,vars:2,consts:[[1,"container","mt-3"],[1,"container","d-flex","mt-5"],[1,"card","p-4","shadow-sm",2,"width","400px"],[3,"ngSubmit","formGroup"],[1,"form-group","mb-3"],["for","user",1,"form-label"],["id","user","formControlName","user","type","text","placeholder","Votre nom",1,"form-control"],["for","contenu",1,"form-label"],["id","contenu","formControlName","contenu","placeholder","Votre commentaire",1,"form-control"],["for","rating",1,"form-label"],["id","rating","formControlName","rating","type","number","placeholder","Votre rating",1,"form-control"],["type","submit",1,"btn","btn-primary","w-100",3,"disabled"]],template:function(r,i){r&1&&(P(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3),we("ngSubmit",function(){return i.ajouterCommentaire()}),P(4,"div",4)(5,"label",5),Q(6,"Auteur :"),O(),ye(7,"input",6),O(),P(8,"div",4)(9,"label",7),Q(10,"Commentaire :"),O(),ye(11,"textarea",8),O(),P(12,"div",4)(13,"label",9),Q(14,"Rating :"),O(),ye(15,"input",10),O(),P(16,"button",11),Q(17,"Ajouter"),O()()()()()),r&2&&(Y(3),le("formGroup",i.commentaireForm),Y(13),le("disabled",i.commentaireForm.invalid))},dependencies:[hx,Ea,Hn,Wc,xr,wa,iw,ow]})}}return n})();var _H=()=>[1,2,3,4,5],wH=(n,e)=>({"bi-star-fill":n,"bi-star":e});function IH(n,e){if(n&1&&(P(0,"div",32)(1,"div",33),ye(2,"img",34),O(),P(3,"div",35),ye(4,"img",34),O(),P(5,"div",35),ye(6,"img",34),O()()),n&2){let t=Tt();Y(2),le("src",t.ProductAdetaile.images[0],Dr),Y(2),le("src",t.ProductAdetaile.images[1],Dr),Y(2),le("src",t.ProductAdetaile.images[2],Dr)}}function EH(n,e){if(n&1&&(P(0,"div",32)(1,"div",33),ye(2,"img",34),O()()),n&2){let t=Tt();Y(2),le("src",t.ProductAdetaile.images[0],Dr)}}function DH(n,e){if(n&1&&ye(0,"span",36),n&2){let t=e.index,r=Tt();le("ngClass",PA(1,wH,t<r.ProductAdetaile.rating,t+1>r.ProductAdetaile.rating))}}function CH(n,e){if(n&1&&(P(0,"div",37)(1,"p")(2,"strong"),Q(3),O(),Q(4),ir(5,"date"),O(),P(6,"p"),Q(7),O()()),n&2){let t=e.$implicit;Y(3),Wt(t.user),Y(),uc(" (",Fh(5,4,t.date),") : ",t.comment," "),Y(3),Nt("Rating : ",t.rating,"")}}function bH(n,e){if(n&1){let t=on();P(0,"app-commentaire",38),we("LesCommentiares",function(i){Fe(t);let o=Tt();return Ve(o.onCommentaireAjoute(i))}),O()}}var XP=(()=>{class n{constructor(t,r,i){this.route=t,this.service=r,this.panier=i,this.Cm=!1,this.commentaires=[]}ngOnInit(){let t=this.route.snapshot.params.id;this.service.getProductById(t).subscribe(r=>{this.ProductAdetaile=r},r=>{console.log("Error",r)})}addTopanier(){this.panier.addToCart(this.ProductAdetaile)}AjouterCommentaire(){this.Cm=!0}onCommentaireAjoute(t){this.commentaires.push(t),this.Cm=!1}static{this.\u0275fac=function(r){return new(r||n)(U(qn),U(mo),U(yu))}}static{this.\u0275cmp=Je({type:n,selectors:[["app-detail-product"]],standalone:!0,features:[Xe],decls:47,vars:12,consts:[[1,"container","mb-5"],[1,"card"],[1,"d-flex","row"],[1,"preview","col-md-6"],["id","demo","data-bs-ride","carousel",1,"carousel","slide"],[1,"carousel-indicators"],["type","button","data-bs-target","#demo","data-bs-slide-to","0",1,"active"],["type","button","data-bs-target","#demo","data-bs-slide-to","1"],["type","button","data-bs-target","#demo","data-bs-slide-to","2"],["class","carousel-inner",4,"ngIf"],["type","button","data-bs-target","#demo","data-bs-slide","prev",1,"carousel-control-prev"],[1,"carousel-control-prev-icon"],["type","button","data-bs-target","#demo","data-bs-slide","next",1,"carousel-control-next"],[1,"carousel-control-next-icon"],[1,"details","col-md-6"],[1,"product-title"],[1,"ticket-style"],[1,"rating"],[1,"text-danger"],[1,"product-description"],[1,"checked"],[1,"text-success"],[1,"vote"],[1,"stars","mb-4"],["class","bi",3,"ngClass",4,"ngFor","ngForOf"],[1,"action","align-content-between"],["type","button",1,"btn","btn-primary",3,"click"],[1,"bi","bi-cart-check"],[1,"btn","btn-success","ms-5",3,"click"],[1,"mt-2"],["class","mt-3",4,"ngFor","ngForOf"],[3,"LesCommentiares",4,"ngIf"],[1,"carousel-inner"],[1,"carousel-item","active"],["alt","",1,"d-block","w-100",3,"src"],[1,"carousel-item"],[1,"bi",3,"ngClass"],[1,"mt-3"],[3,"LesCommentiares"]],template:function(r,i){r&1&&(P(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),ye(6,"button",6)(7,"button",7)(8,"button",8),O(),st(9,IH,7,3,"div",9)(10,EH,3,1,"div",9),P(11,"button",10),ye(12,"span",11),O(),P(13,"button",12),ye(14,"span",13),O()()(),P(15,"div",14)(16,"h3",15),Q(17),O(),P(18,"h4",16),Q(19),O(),P(20,"div",17)(21,"span",18)(22,"strong"),Q(23),O()()(),P(24,"p",19),Q(25),O(),P(26,"h4",20),Q(27,"PRIX ACTUELL: "),P(28,"span",21),Q(29),O()(),P(30,"p",22)(31,"strong"),Q(32),O()(),P(33,"div",23),st(34,DH,1,4,"span",24),O(),P(35,"div",25)(36,"button",26),we("click",function(){return i.addTopanier()}),Q(37,"Ajouter Au panier "),ye(38,"i",27),O(),P(39,"button",28),we("click",function(){return i.AjouterCommentaire()}),Q(40,"Ajouter un commentaire"),O()(),P(41,"div")(42,"p",29)(43,"strong"),Q(44,"Customer reviews"),O()(),st(45,CH,8,6,"div",30),O(),st(46,bH,1,0,"app-commentaire",31),O()()()()),r&2&&(Y(9),le("ngIf",i.ProductAdetaile.images.length>1),Y(),le("ngIf",i.ProductAdetaile.images.length===1),Y(7),Wt(i.ProductAdetaile.title),Y(2),Nt("Marque : ",i.ProductAdetaile.brand,""),Y(4),Nt("Solde : ",i.ProductAdetaile.discountPercentage," %"),Y(2),Wt(i.ProductAdetaile.description),Y(4),Nt("",i.ProductAdetaile.price," $"),Y(3),Nt("Rating : ",i.ProductAdetaile.rating," / 5"),Y(2),le("ngForOf",kh(11,_H)),Y(11),le("ngForOf",i.commentaires),Y(),le("ngIf",i.Cm===!0))},dependencies:[yn,br,Tr,uS,JP,Xh],styles:[".card[_ngcontent-%COMP%]{margin-top:50px;background:#eee;padding:3em;line-height:1.5em}.product-title[_ngcontent-%COMP%], .price[_ngcontent-%COMP%], .sizes[_ngcontent-%COMP%], .colors[_ngcontent-%COMP%]{text-transform:UPPERCASE;font-weight:700}.product-title[_ngcontent-%COMP%], .rating[_ngcontent-%COMP%], .product-description[_ngcontent-%COMP%], .price[_ngcontent-%COMP%], .vote[_ngcontent-%COMP%], .sizes[_ngcontent-%COMP%]{margin-bottom:15px}.product-title[_ngcontent-%COMP%]{margin-top:0}.size[_ngcontent-%COMP%]{margin-right:10px}.size[_ngcontent-%COMP%]:first-of-type{margin-left:40px}.color[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;margin-right:10px;height:2em;width:2em;border-radius:2px}.color[_ngcontent-%COMP%]:first-of-type{margin-left:20px}.ticket-style[_ngcontent-%COMP%]{background-color:#f8f9fa;border:2px dashed #000;padding:10px 20px;border-radius:10px;display:inline-block;font-family:Courier New,monospace}"]})}}return n})();function TH(n,e){if(n&1){let t=on();P(0,"div",2)(1,"app-product-items",3),we("SelectedProduct",function(i){Fe(t);let o=Tt();return Ve(o.AddToPanier(i))}),O()()}if(n&2){let t=e.$implicit;Y(),le("product",t)}}var e1=(()=>{class n{constructor(t,r){this.service=t,this.route=r,this.products=[],this.selectedCategorie="",this.Recherche="",this.detailPanier=[]}ngOnInit(){this.service.getAllProducts().subscribe(t=>{this.products=t.products}),this.route.queryParams.subscribe(t=>{this.selectedCategorie=t.cat,this.selectedCategorie&&this.service.getProductsByCategory(this.selectedCategorie).subscribe(r=>{this.products=r.products||[]},r=>{console.log("Error fetching data:",r)})}),this.route.queryParams.subscribe(t=>{this.Recherche=t.recherche,this.Recherche&&this.service.getProductBykey(this.Recherche).subscribe(r=>{this.products=r.products||[]},r=>{console.log("Error",r)})})}AddToPanier(t){let r=this.detailPanier.find(i=>i.produit.id===t.id);if(r)r.quantite++;else{let i=new Ag(t,1);this.detailPanier.push(i)}}static{this.\u0275fac=function(r){return new(r||n)(U(mo),U(qn))}}static{this.\u0275cmp=Je({type:n,selectors:[["app-listproduit"]],standalone:!0,features:[Xe],decls:3,vars:1,consts:[[1,"row","p-5"],["class","col-sm-3 mt-4",4,"ngFor","ngForOf"],[1,"col-sm-3","mt-4"],[3,"SelectedProduct","product"]],template:function(r,i){r&1&&(P(0,"div")(1,"div",0),st(2,TH,2,1,"div",1),O()()),r&2&&(Y(2),le("ngForOf",i.products))},dependencies:[br,bg]})}}return n})();var t1=(()=>{class n{constructor(t,r){this.AuthService=t,this.route=r,this.user={username:"",email:"",password:"",sexe:"",tel:"",datenaissance:new Date}}register(t){let r=t.value.email,i=t.value.password;console.log("Email:",r,"Password:",i),this.AuthService.login(r,i)}static{this.\u0275fac=function(r){return new(r||n)(U(_n),U(He))}}static{this.\u0275cmp=Je({type:n,selectors:[["app-auth"]],standalone:!0,features:[Xe],decls:19,vars:2,consts:[["f","ngForm"],[1,"container"],[1,"text-center"],["src","../../assets/logo_transparent.png","height","200","width","200"],["id","login-form-wrap"],["id","login-form",3,"ngSubmit"],["type","email","id","email","name","email","required","","placeholder","Votre email",3,"ngModelChange","ngModel"],["type","password","id","password","name","password","required","","placeholder","Votre mot de passe",3,"ngModelChange","ngModel"],["type","submit","id","login","value","Login"],["id","create-account-wrap"],["routerLink","/inscription"]],template:function(r,i){if(r&1){let o=on();P(0,"div",1)(1,"div",2),ye(2,"img",3),O(),P(3,"div",4)(4,"h2"),Q(5,"Se connecter"),O(),P(6,"form",5,0),we("ngSubmit",function(){Fe(o);let a=ac(7);return Ve(i.register(a))}),P(8,"p")(9,"input",6),St("ngModelChange",function(a){return Fe(o),Pt(i.user.email,a)||(i.user.email=a),Ve(a)}),O()(),P(10,"p")(11,"input",7),St("ngModelChange",function(a){return Fe(o),Pt(i.user.password,a)||(i.user.password=a),Ve(a)}),O()(),P(12,"p"),ye(13,"input",8),O()(),P(14,"div",9)(15,"p"),Q(16,"Nouveau chez EMISHOP? "),P(17,"a",10),Q(18,"Cr\xE9er votre compte"),O()()()()()}r&2&&(Y(9),At("ngModel",i.user.email),Y(2),At("ngModel",i.user.password))},dependencies:[yn,Ea,Hn,xr,wa,Kc,ai,Gc,$i],styles:['h2[_ngcontent-%COMP%]{font-weight:300;text-align:center}p[_ngcontent-%COMP%]{position:relative}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:link, a[_ngcontent-%COMP%]:visited, a[_ngcontent-%COMP%]:active{color:#3ca9e2;-webkit-transition:all .2s ease;transition:all .2s ease}a[_ngcontent-%COMP%]:focus, a[_ngcontent-%COMP%]:hover, a[_ngcontent-%COMP%]:link:focus, a[_ngcontent-%COMP%]:link:hover, a[_ngcontent-%COMP%]:visited:focus, a[_ngcontent-%COMP%]:visited:hover, a[_ngcontent-%COMP%]:active:focus, a[_ngcontent-%COMP%]:active:hover{color:#329dd5;-webkit-transition:all .2s ease;transition:all .2s ease}#login-form-wrap[_ngcontent-%COMP%]{background-color:#fff;width:35%;margin:30px auto;text-align:center;padding:20px 0 0;border-radius:4px;box-shadow:0 30px 50px #0003}#login-form[_ngcontent-%COMP%]{padding:0 60px}input[_ngcontent-%COMP%]{display:block;box-sizing:border-box;width:100%;outline:none;height:60px;line-height:60px;border-radius:4px}input[type=text][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%]{width:100%;padding:0 0 0 10px;margin:0;color:#8a8b8e;border:1px solid #c2c0ca;font-style:normal;font-size:16px;-webkit-appearance:none;-moz-appearance:none;appearance:none;position:relative;display:inline-block;background:none}input[type=text][_ngcontent-%COMP%]:focus, input[type=email][_ngcontent-%COMP%]:focus{border-color:#3ca9e2}input[type=text][_ngcontent-%COMP%]:focus:invalid, input[type=email][_ngcontent-%COMP%]:focus:invalid{color:#cc1e2b;border-color:#cc1e2b}input[type=text][_ngcontent-%COMP%]:valid ~ .validation[_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%]:valid ~ .validation[_ngcontent-%COMP%]{display:block;border-color:#0c0}input[type=text][_ngcontent-%COMP%]:valid ~ .validation[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%]:valid ~ .validation[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#0c0;position:absolute;border-radius:6px}input[type=text][_ngcontent-%COMP%]:valid ~ .validation[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child, input[type=email][_ngcontent-%COMP%]:valid ~ .validation[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{top:30px;left:14px;width:20px;height:3px;-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}input[type=text][_ngcontent-%COMP%]:valid ~ .validation[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child, input[type=email][_ngcontent-%COMP%]:valid ~ .validation[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{top:35px;left:8px;width:11px;height:3px;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.validation[_ngcontent-%COMP%]{display:none;position:absolute;content:" ";height:60px;width:30px;right:15px;top:0}input[type=submit][_ngcontent-%COMP%]{border:none;display:block;background-color:#3ca9e2;color:#fff;font-weight:700;text-transform:uppercase;-webkit-transition:all .2s ease;transition:all .2s ease;font-size:18px;position:relative;display:inline-block;cursor:pointer;text-align:center}input[type=submit][_ngcontent-%COMP%]:hover{background-color:#329dd5;-webkit-transition:all .2s ease;transition:all .2s ease}#create-account-wrap[_ngcontent-%COMP%]{background-color:#eeedf1;color:#8a8b8e;font-size:14px;width:100%;padding:10px 0;border-radius:0 0 4px 4px}']})}}return n})();function AH(n,e){if(n&1&&ye(0,"img",11),n&2){let t=Tt().$implicit;le("src",t.produit.images[0],Dr)}}function SH(n,e){if(n&1&&(P(0,"div",7)(1,"div",8),st(2,AH,1,1,"img",9),O(),P(3,"div",10)(4,"h5"),Q(5),O(),P(6,"p"),Q(7),ir(8,"currency"),O(),P(9,"p")(10,"strong"),Q(11),O()()()()),n&2){let t=e.$implicit;Y(2),le("ngIf",t.produit==null||t.produit.images==null?null:t.produit.images[0]),Y(3),Wt(t.produit.title),Y(2),Wt(Fi(8,4,t.produit.price,"USD")),Y(4),Nt("Quantit\xE9: ",t.quantite,"")}}function MH(n,e){if(n&1&&(P(0,"div",3)(1,"div",4)(2,"h4")(3,"strong"),Q(4),ir(5,"date"),ir(6,"date"),O()()(),P(7,"div",5),st(8,SH,12,7,"div",6),O()()),n&2){let t=e.$implicit;Y(4),uc("",Fi(5,3,t.dateCommande,"fullDate")," \xE0 ",Fi(6,6,t.dateCommande,"shortTime"),""),Y(4),le("ngForOf",t.detail)}}var n1=(()=>{class n{constructor(t){this.commandeService=t}ngOnInit(){this.commandes=this.commandeService.getAllOrders().pipe(X(t=>t.map(r=>{let i=r;return Me(W({},i),{dateCommande:i.dateCommande instanceof Ke?i.dateCommande.toDate():i.dateCommande})}))),this.calculateTotal()}calculateTotal(){this.total$=this.commandes.pipe(X(t=>t.reduce((r,i)=>r+(i.detail?i.detail.reduce((o,s)=>o+(s.produit?.price||0)*(s.quantite||0),0):0),0)))}static{this.\u0275fac=function(r){return new(r||n)(U(Cg))}}static{this.\u0275cmp=Je({type:n,selectors:[["app-orders"]],standalone:!0,features:[Xe],decls:5,vars:3,consts:[[1,"handwritten","text-primary","mt-5","ms-5","bi","bi-bag-check"],[1,"container","mt-5"],["class","order-card",4,"ngFor","ngForOf"],[1,"order-card"],[1,"order-header"],[1,"order-items"],["class","product-card",4,"ngFor","ngForOf"],[1,"product-card"],[1,"product-img"],["alt","Product Image",3,"src",4,"ngIf"],[1,"product-info"],["alt","Product Image",3,"src"]],template:function(r,i){r&1&&(P(0,"h2",0),Q(1,"Mes commandes :"),O(),P(2,"div",1),st(3,MH,9,9,"div",2),ir(4,"async"),O()),r&2&&(Y(3),le("ngForOf",Fh(4,1,i.commandes)))},dependencies:[ef,yn,br,lS,Tr,Xh],styles:[".container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.order-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;margin:20px 0;padding:20px}.order-header[_ngcontent-%COMP%]{background-color:#009879;color:#fff;padding:10px;border-radius:8px;margin-bottom:20px}.order-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:1.2em}.order-items[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px}.product-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#f9f9f9;border:1px solid #ddd;border-radius:8px;padding:15px;width:220px;box-sizing:border-box;text-align:center;transition:transform .2s ease}.product-card[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.product-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:150px;object-fit:cover;border-radius:5px}.product-info[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.1em;margin:10px 0;font-weight:700}.product-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;color:#555}.order-total[_ngcontent-%COMP%]{background-color:#f9f9f9;text-align:right;padding:10px 15px;border-top:1px solid #ddd;font-weight:700}"]})}}return n})();var tD=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return this.Etat=this.authService.iAuth(),this.Etat?!0:(this.router.navigate(["/Auth"]),!1)}static{this.\u0275fac=function(r){return new(r||n)(j(_n),j(He))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var r1=(()=>{class n{constructor(t){this.AuthService=t,this.user={username:"",civility:"",dateNaissance:"",telephone:"",email:"",confirmEmail:"",password:"",confirmPassword:""}}inscription(t){t.valid?(console.log("Form Data:",this.user),this.AuthService.register(this.user.email,this.user.password)):console.log("Form is invalid")}static{this.\u0275fac=function(r){return new(r||n)(U(_n))}}static{this.\u0275cmp=Je({type:n,selectors:[["app-inscription"]],standalone:!0,features:[Xe],decls:63,vars:10,consts:[["f","ngForm"],[1,"container","mt-5","mb-5"],[1,"text-center"],["src","../../assets/logo_transparent.png","height","200","width","200"],[1,"text-center","mb-4"],[3,"ngSubmit"],[1,"row"],[1,"col-md-6"],[1,"mb-3"],["for","username",1,"form-label"],["type","text","id","username","name","username","placeholder","Nom Complet","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-label"],[1,"form-check","form-check-inline"],["type","radio","name","civility","id","homme","value","homme",1,"form-check-input",3,"ngModelChange","ngModel"],["for","homme",1,"form-check-label"],["type","radio","name","civility","id","femme","value","femme",1,"form-check-input",3,"ngModelChange","ngModel"],["for","femme",1,"form-check-label"],["for","date_naissance",1,"form-label"],["type","date","id","date_naissance","name","date_naissance","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","telephone",1,"form-label"],[1,"input-group"],[1,"input-group-text"],["type","tel","id","telephone","name","telephone","placeholder","Mon t\xE9l\xE9phone","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","email",1,"form-label"],["type","email","id","email","name","email","placeholder","Mon e-mail","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","confirm_email",1,"form-label"],["type","email","id","confirm_email","name","confirm_email","placeholder","Je confirme mon e-mail","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","password",1,"form-label"],["type","password","id","password","name","password","placeholder","Mon mot de passe","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","confirm_password",1,"form-label"],["type","password","id","confirm_password","name","confirm_password","placeholder","Je confirme mon mot de passe","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-center"],["type","submit",1,"btn","btn-primary","mt-3",3,"disabled"],[1,"text-center","mt-3"],["routerLink","/Auth",1,"text-decoration-text","text-success"]],template:function(r,i){if(r&1){let o=on();P(0,"div",1)(1,"div",2),ye(2,"img",3),O(),P(3,"h1",4),Q(4,"Je cr\xE9e mon compte"),O(),P(5,"form",5,0),we("ngSubmit",function(){Fe(o);let a=ac(6);return Ve(i.inscription(a))}),P(7,"div",6)(8,"div",7)(9,"h4",8),Q(10,"Mes informations personnelles"),O(),P(11,"div",8)(12,"label",9),Q(13,"Nom Complet *"),O(),P(14,"input",10),St("ngModelChange",function(a){return Fe(o),Pt(i.user.username,a)||(i.user.username=a),Ve(a)}),O()(),P(15,"label",11),Q(16,"Le sexe"),O(),ye(17,"br"),P(18,"div",12)(19,"input",13),St("ngModelChange",function(a){return Fe(o),Pt(i.user.civility,a)||(i.user.civility=a),Ve(a)}),O(),P(20,"label",14),Q(21,"Homme"),O()(),P(22,"div",12)(23,"input",15),St("ngModelChange",function(a){return Fe(o),Pt(i.user.civility,a)||(i.user.civility=a),Ve(a)}),O(),P(24,"label",16),Q(25,"Femme"),O()(),P(26,"div",8)(27,"label",17),Q(28,"Ma date de naissance *"),O(),P(29,"input",18),St("ngModelChange",function(a){return Fe(o),Pt(i.user.dateNaissance,a)||(i.user.dateNaissance=a),Ve(a)}),O()(),P(30,"div",8)(31,"label",19),Q(32,"Mon t\xE9l\xE9phone *"),O(),P(33,"div",20)(34,"span",21),Q(35,"+212"),O(),P(36,"input",22),St("ngModelChange",function(a){return Fe(o),Pt(i.user.telephone,a)||(i.user.telephone=a),Ve(a)}),O()()()(),P(37,"div",7)(38,"h4",8),Q(39,"Mes informations de connexion"),O(),P(40,"div",8)(41,"label",23),Q(42,"Mon e-mail *"),O(),P(43,"input",24),St("ngModelChange",function(a){return Fe(o),Pt(i.user.email,a)||(i.user.email=a),Ve(a)}),O()(),P(44,"div",8)(45,"label",25),Q(46,"Je confirme mon e-mail *"),O(),P(47,"input",26),St("ngModelChange",function(a){return Fe(o),Pt(i.user.confirmEmail,a)||(i.user.confirmEmail=a),Ve(a)}),O()(),P(48,"div",8)(49,"label",27),Q(50,"Mon mot de passe *"),O(),P(51,"input",28),St("ngModelChange",function(a){return Fe(o),Pt(i.user.password,a)||(i.user.password=a),Ve(a)}),O()(),P(52,"div",8)(53,"label",29),Q(54,"Je confirme mon mot de passe *"),O(),P(55,"input",30),St("ngModelChange",function(a){return Fe(o),Pt(i.user.confirmPassword,a)||(i.user.confirmPassword=a),Ve(a)}),O()()(),P(56,"div",31)(57,"button",32),Q(58,"Je cr\xE9e mon compte"),O()(),P(59,"p",33),Q(60,"Vous avez d\xE9j\xE0 un compte? "),P(61,"a",34),Q(62,"Connectez-vous"),O()()()()()}if(r&2){let o=ac(6);Y(14),At("ngModel",i.user.username),Y(5),At("ngModel",i.user.civility),Y(4),At("ngModel",i.user.civility),Y(6),At("ngModel",i.user.dateNaissance),Y(7),At("ngModel",i.user.telephone),Y(7),At("ngModel",i.user.email),Y(4),At("ngModel",i.user.confirmEmail),Y(4),At("ngModel",i.user.password),Y(4),At("ngModel",i.user.confirmPassword),Y(2),le("disabled",o.invalid)}},dependencies:[$i,yn,Ea,Hn,rw,xr,wa,Kc,ai,Gc],styles:[".container[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:10px;box-shadow:0 4px 8px #7aadd8}.form-label[_ngcontent-%COMP%]{font-weight:700}.text-right[_ngcontent-%COMP%]{text-align:right}.img[_ngcontent-%COMP%]{text-align:center;align-items:center}"]})}}return n})();var i1=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Je({type:n,selectors:[["app-paiement"]],standalone:!0,features:[Xe],decls:2,vars:0,template:function(r,i){r&1&&(P(0,"p"),Q(1,"paiement works!"),O())}})}}return n})();var o1=[{path:"Panier",component:QP},{path:"paiement",component:i1,canActivate:[tD]},{path:"Listproduit",component:e1},{path:"Produit/:id",component:XP},{path:"ProductItems",component:bg},{path:"Auth",component:t1},{path:"inscription",component:r1},{path:"Orders",component:n1,canActivate:[tD]},{path:"",redirectTo:"Listproduit",pathMatch:"full"}];var s1=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}intercept(t,r){let i;if(i=this.authService.iAuth(),i){let o=t.clone({headers:t.headers.set("Authorization","Bearer "+this.authService.getToken())});return r.handle(o)}return r.handle(t)}static{this.\u0275fac=function(r){return new(r||n)(j(_n),j(He))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})();var a1={apiKey:"AIzaSyCdJBlmnjTeC_KqIVqgyr4dA2t0mcv3TYo",authDomain:"emishop-8df18.firebaseapp.com",projectId:"emishop-8df18",storageBucket:"emishop-8df18.appspot.com",messagingSenderId:"1021896970735",appId:"1:1021896970735:web:04aadabb3ba0dcfe3ce61a",measurementId:"G-VLWMB1SS77"},SJ=rm(a1),u1={providers:[{provide:t_,useClass:s1,multi:!0},Lo(Rx.initializeApp(a1)),Lo(Go),Lo(Nx),EM(o1),Lo(bS),Lo($P,go,mx,Ta)]};function xH(n,e){n&1&&ye(0,"app-navbar")}var c1=(()=>{class n{constructor(t,r,i){this.router=t,this.service=r,this.Auth=i,this.title="EMISHOP",this.afficherNavbar=!0,this.products=[]}ngOnInit(){this.router.events.subscribe(t=>{t instanceof Mn&&(t.url==="/inscription"||t.url==="/Auth"?this.afficherNavbar=!1:this.afficherNavbar=!0)})}static{this.\u0275fac=function(r){return new(r||n)(U(He),U(mo),U(_n))}}static{this.\u0275cmp=Je({type:n,selectors:[["app-root"]],standalone:!0,features:[Xe],decls:2,vars:1,consts:[[4,"ngIf"]],template:function(r,i){r&1&&(st(0,xH,1,0,"app-navbar",0),ye(1,"router-outlet")),r&2&&le("ngIf",i.afficherNavbar)},dependencies:[yn,AM,$_,ZP,Tr]})}}return n})();PS(c1,u1).catch(n=>console.error(n));
